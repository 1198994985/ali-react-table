(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1115:function(module,exports,__webpack_require__){"use strict";__webpack_require__(43),__webpack_require__(94),__webpack_require__(114),__webpack_require__(280),__webpack_require__(93),__webpack_require__(571),__webpack_require__(1116),__webpack_require__(105),__webpack_require__(115);var _clientApi=__webpack_require__(308),_clientLogger=__webpack_require__(188),_configFilename=__webpack_require__(1117);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1117:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"globalTypes",(function(){return globalTypes})),__webpack_require__.d(__webpack_exports__,"decorators",(function(){return decorators}));var assets_src_index__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(146),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),globalTypes={theme:{name:"主题",description:"表格主题",defaultValue:"default",toolbar:{icon:"cog",items:[{value:"default",title:"默认样式，使用一小部分 alibaba fusion 样式"},{value:"hippo",title:"盒马 Hippo Design"},{value:"antd",title:"Ant Design，开发中，敬请期待"}]}}};function withThemeProvider(Story,context){var node,theme=context.globals.theme;return node="hippo"===theme?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(assets_src_index__WEBPACK_IMPORTED_MODULE_0__.f,null):"antd"===theme?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(assets_src_index__WEBPACK_IMPORTED_MODULE_0__.b,null):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(assets_src_index__WEBPACK_IMPORTED_MODULE_0__.d,null),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(assets_src_index__WEBPACK_IMPORTED_MODULE_0__.c.Provider,{value:theme},node,react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Story,context))}withThemeProvider.displayName="withThemeProvider";var decorators=[withThemeProvider]},1164:function(module,exports,__webpack_require__){var map={"./af":585,"./af.js":585,"./ar":586,"./ar-dz":587,"./ar-dz.js":587,"./ar-kw":588,"./ar-kw.js":588,"./ar-ly":589,"./ar-ly.js":589,"./ar-ma":590,"./ar-ma.js":590,"./ar-sa":591,"./ar-sa.js":591,"./ar-tn":592,"./ar-tn.js":592,"./ar.js":586,"./az":593,"./az.js":593,"./be":594,"./be.js":594,"./bg":595,"./bg.js":595,"./bm":596,"./bm.js":596,"./bn":597,"./bn-bd":598,"./bn-bd.js":598,"./bn.js":597,"./bo":599,"./bo.js":599,"./br":600,"./br.js":600,"./bs":601,"./bs.js":601,"./ca":602,"./ca.js":602,"./cs":603,"./cs.js":603,"./cv":604,"./cv.js":604,"./cy":605,"./cy.js":605,"./da":606,"./da.js":606,"./de":607,"./de-at":608,"./de-at.js":608,"./de-ch":609,"./de-ch.js":609,"./de.js":607,"./dv":610,"./dv.js":610,"./el":611,"./el.js":611,"./en-au":612,"./en-au.js":612,"./en-ca":613,"./en-ca.js":613,"./en-gb":614,"./en-gb.js":614,"./en-ie":615,"./en-ie.js":615,"./en-il":616,"./en-il.js":616,"./en-in":617,"./en-in.js":617,"./en-nz":618,"./en-nz.js":618,"./en-sg":619,"./en-sg.js":619,"./eo":620,"./eo.js":620,"./es":621,"./es-do":622,"./es-do.js":622,"./es-mx":623,"./es-mx.js":623,"./es-us":624,"./es-us.js":624,"./es.js":621,"./et":625,"./et.js":625,"./eu":626,"./eu.js":626,"./fa":627,"./fa.js":627,"./fi":628,"./fi.js":628,"./fil":629,"./fil.js":629,"./fo":630,"./fo.js":630,"./fr":631,"./fr-ca":632,"./fr-ca.js":632,"./fr-ch":633,"./fr-ch.js":633,"./fr.js":631,"./fy":634,"./fy.js":634,"./ga":635,"./ga.js":635,"./gd":636,"./gd.js":636,"./gl":637,"./gl.js":637,"./gom-deva":638,"./gom-deva.js":638,"./gom-latn":639,"./gom-latn.js":639,"./gu":640,"./gu.js":640,"./he":641,"./he.js":641,"./hi":642,"./hi.js":642,"./hr":643,"./hr.js":643,"./hu":644,"./hu.js":644,"./hy-am":645,"./hy-am.js":645,"./id":646,"./id.js":646,"./is":647,"./is.js":647,"./it":648,"./it-ch":649,"./it-ch.js":649,"./it.js":648,"./ja":650,"./ja.js":650,"./jv":651,"./jv.js":651,"./ka":652,"./ka.js":652,"./kk":653,"./kk.js":653,"./km":654,"./km.js":654,"./kn":655,"./kn.js":655,"./ko":656,"./ko.js":656,"./ku":657,"./ku.js":657,"./ky":658,"./ky.js":658,"./lb":659,"./lb.js":659,"./lo":660,"./lo.js":660,"./lt":661,"./lt.js":661,"./lv":662,"./lv.js":662,"./me":663,"./me.js":663,"./mi":664,"./mi.js":664,"./mk":665,"./mk.js":665,"./ml":666,"./ml.js":666,"./mn":667,"./mn.js":667,"./mr":668,"./mr.js":668,"./ms":669,"./ms-my":670,"./ms-my.js":670,"./ms.js":669,"./mt":671,"./mt.js":671,"./my":672,"./my.js":672,"./nb":673,"./nb.js":673,"./ne":674,"./ne.js":674,"./nl":675,"./nl-be":676,"./nl-be.js":676,"./nl.js":675,"./nn":677,"./nn.js":677,"./oc-lnc":678,"./oc-lnc.js":678,"./pa-in":679,"./pa-in.js":679,"./pl":680,"./pl.js":680,"./pt":681,"./pt-br":682,"./pt-br.js":682,"./pt.js":681,"./ro":683,"./ro.js":683,"./ru":684,"./ru.js":684,"./sd":685,"./sd.js":685,"./se":686,"./se.js":686,"./si":687,"./si.js":687,"./sk":688,"./sk.js":688,"./sl":689,"./sl.js":689,"./sq":690,"./sq.js":690,"./sr":691,"./sr-cyrl":692,"./sr-cyrl.js":692,"./sr.js":691,"./ss":693,"./ss.js":693,"./sv":694,"./sv.js":694,"./sw":695,"./sw.js":695,"./ta":696,"./ta.js":696,"./te":697,"./te.js":697,"./tet":698,"./tet.js":698,"./tg":699,"./tg.js":699,"./th":700,"./th.js":700,"./tk":701,"./tk.js":701,"./tl-ph":702,"./tl-ph.js":702,"./tlh":703,"./tlh.js":703,"./tr":704,"./tr.js":704,"./tzl":705,"./tzl.js":705,"./tzm":706,"./tzm-latn":707,"./tzm-latn.js":707,"./tzm.js":706,"./ug-cn":708,"./ug-cn.js":708,"./uk":709,"./uk.js":709,"./ur":710,"./ur.js":710,"./uz":711,"./uz-latn":712,"./uz-latn.js":712,"./uz.js":711,"./vi":713,"./vi.js":713,"./x-pseudo":714,"./x-pseudo.js":714,"./yo":715,"./yo.js":715,"./zh-cn":716,"./zh-cn.js":716,"./zh-hk":717,"./zh-hk.js":717,"./zh-mo":718,"./zh-mo.js":718,"./zh-tw":719,"./zh-tw.js":719};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1164},1174:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(512).configure)([__webpack_require__(1175)],module,!1)}).call(this,__webpack_require__(236)(module))},1175:function(module,exports,__webpack_require__){var map={"./big-data.stories.tsx":1176,"./biz/ROI-analysis-table.stories.tsx":1318,"./biz/data-report.stories.tsx":1319,"./biz/rank-table.stories.tsx":1323,"./biz/remain-matrix.stories.tsx":1324,"./others/drill-tree-table/drillable-tree-table.stories.tsx":1332,"./others/filter.stories.tsx":1328,"./others/simple-pivot-table.stories.tsx":1333,"./pipeline.stories.tsx":1331,"./table.stories.tsx":1330,"./transforms.stories.tsx":1334};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1175},1176:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"滚动容器为window",(function(){return 滚动容器为window})),__webpack_require__.d(__webpack_exports__,"滚动容器为指定高度的div",(function(){return 滚动容器为指定高度的div})),__webpack_require__.d(__webpack_exports__,"双向虚拟滚动",(function(){return 双向虚拟滚动}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(326),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(327),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_17__),assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(34),_themed_table__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(52);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={parameters:{storySource:{source:"import { ArtColumn } from 'ali-react-table'\nimport React from 'react'\nimport { cols, useAllDataSource } from 'assets/src/ncov19-assets'\nimport { ThemedBaseTable } from './themed-table'\n\nexport default { title: '大数据测试' }\n\nexport function 滚动容器为window() {\n  const { dataSource, isLoading } = useAllDataSource()\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      dataSource={dataSource}\n      columns={[\n        {\n          lock: true,\n          width: 80,\n          name: 'index',\n          getValue(record: any, rowIndex: number) {\n            return rowIndex\n          },\n        },\n        cols.updateTime,\n        cols.provinceName,\n        cols.cityName,\n        ...cols.indCols,\n      ]}\n    />\n  )\n}\n\nexport function 滚动容器为指定高度的div() {\n  const { dataSource, isLoading } = useAllDataSource()\n  return (\n    <ThemedBaseTable\n      style={{ height: 400, overflow: 'auto' }}\n      useOuterBorder\n      isLoading={isLoading}\n      dataSource={dataSource}\n      columns={[\n        {\n          lock: true,\n          width: 80,\n          name: 'index',\n          getValue(record: any, rowIndex: number) {\n            return rowIndex\n          },\n        },\n        cols.updateTime,\n        cols.provinceName,\n        cols.cityName,\n        ...cols.indCols,\n      ]}\n    />\n  )\n}\n\nexport function 双向虚拟滚动() {\n  const { dataSource, isLoading } = useAllDataSource()\n  const repeatedColumns: ArtColumn[] = []\n\n  for (let i = 0; i < 1000; i++) {\n    for (const col of cols.indCols) {\n      repeatedColumns.push({ ...col, name: `copy-${i} ${col.name}` })\n    }\n  }\n\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      useVirtual={true}\n      dataSource={[dataSource, dataSource, dataSource, dataSource, dataSource].flat()}\n      columns={[\n        {\n          lock: true,\n          width: 80,\n          name: 'index',\n          getValue(record: any, rowIndex: number) {\n            return rowIndex\n          },\n        },\n        cols.updateTime,\n        cols.provinceName,\n        cols.cityName,\n        ...repeatedColumns,\n      ]}\n    />\n  )\n}\n",locationsMap:{"滚动容器为window":{startLoc:{col:7,line:8},endLoc:{col:1,line:30},startBody:{col:7,line:8},endBody:{col:1,line:30}},"滚动容器为指定高度的div":{startLoc:{col:7,line:32},endLoc:{col:1,line:56},startBody:{col:7,line:32},endBody:{col:1,line:56}},"双向虚拟滚动":{startLoc:{col:7,line:58},endLoc:{col:1,line:89},startBody:{col:7,line:58},endBody:{col:1,line:89}}}}},title:"大数据测试"};var 滚动容器为window=function 滚动容器为window(){var _useAllDataSource=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.c)(),dataSource=_useAllDataSource.dataSource,isLoading=_useAllDataSource.isLoading;return react__WEBPACK_IMPORTED_MODULE_17___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_19__.a,{isLoading:isLoading,dataSource:dataSource,columns:[{lock:!0,width:80,name:"index",getValue:function getValue(record,rowIndex){return rowIndex}},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.updateTime,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.provinceName,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.cityName].concat(_toConsumableArray(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.indCols))})};滚动容器为window.displayName="滚动容器为window";var 滚动容器为指定高度的div=function 滚动容器为指定高度的div(){var _useAllDataSource2=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.c)(),dataSource=_useAllDataSource2.dataSource,isLoading=_useAllDataSource2.isLoading;return react__WEBPACK_IMPORTED_MODULE_17___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_19__.a,{style:{height:400,overflow:"auto"},useOuterBorder:!0,isLoading:isLoading,dataSource:dataSource,columns:[{lock:!0,width:80,name:"index",getValue:function getValue(record,rowIndex){return rowIndex}},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.updateTime,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.provinceName,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.cityName].concat(_toConsumableArray(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.indCols))})};滚动容器为指定高度的div.displayName="滚动容器为指定高度的div";var 双向虚拟滚动=function 双向虚拟滚动(){for(var _useAllDataSource3=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.c)(),dataSource=_useAllDataSource3.dataSource,isLoading=_useAllDataSource3.isLoading,repeatedColumns=[],i=0;i<1e3;i++){var _step,_iterator=_createForOfIteratorHelper(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.indCols);try{for(_iterator.s();!(_step=_iterator.n()).done;){var col=_step.value;repeatedColumns.push(Object.assign({},col,{name:"copy-".concat(i," ").concat(col.name)}))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}return react__WEBPACK_IMPORTED_MODULE_17___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_19__.a,{isLoading:isLoading,useVirtual:!0,dataSource:[dataSource,dataSource,dataSource,dataSource,dataSource].flat(),columns:[{lock:!0,width:80,name:"index",getValue:function getValue(record,rowIndex){return rowIndex}},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.updateTime,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.provinceName,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_18__.a.cityName].concat(repeatedColumns)})};双向虚拟滚动.displayName="双向虚拟滚动"},118:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getAppTrafficData})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getIncomeData})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getNCoV2019Data}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(114),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(244),__webpack_require__(189),__webpack_require__(64),__webpack_require__(54),__webpack_require__(561),__webpack_require__(115),__webpack_require__(55);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var cdnLinks_mockBizData="https://gw.alipayobjects.com/os/bmw-prod/2eb02d0b-993f-4531-8424-a8df1899299e.json",cdnLinks_mockSellData="https://gw.alipayobjects.com/os/bmw-prod/22986070-97e7-43a2-a3e4-200742c3d913.json",cdnLinks_ncov2019Data="https://gw.alipayobjects.com/os/basement_prod/8e44b543-0764-411f-adfc-0dae716ef96a.csv",appTrafficCache=null;function getAppTrafficData(){return appTrafficCache||(appTrafficCache=fetch(cdnLinks_mockBizData).then((function(res){return res.json()}))),appTrafficCache}var incomeCache=null;function getIncomeData(){return incomeCache||(incomeCache=fetch(cdnLinks_mockSellData).then((function(res){return res.json()}))),incomeCache}var ncov2019Cache=null;function getNCoV2019Data(){return ncov2019Cache||(ncov2019Cache=fetch(cdnLinks_ncov2019Data).then((function(res){return res.text()})).then((function(csvString){var _step,allStrRows=csvString.split("\n"),head=allStrRows[0],body=allStrRows.slice(1),keys=head.split(","),result=[],_loop=function _loop(strRow){if(""===strRow)return"continue";var values=strRow.split(","),row={};keys.forEach((function(k,i){row[k]=values[i]})),result.push(row)},_iterator=_createForOfIteratorHelper(body);try{for(_iterator.s();!(_step=_iterator.n()).done;)_loop(_step.value)}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}))),ncov2019Cache}},1318:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"投入产出分析表格",(function(){return 投入产出分析表格}));__webpack_require__(75),__webpack_require__(94),__webpack_require__(65);var _alifd_next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(174),ali_react_table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(203),ali_react_table__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(229),ali_react_table__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(375),ali_react_table__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(228),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__),styled_components__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(71),assets_src_format__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(29),HintDiv=styled_components__WEBPACK_IMPORTED_MODULE_9__.b.div.withConfig({displayName:"ROI-analysis-tablestories__HintDiv",componentId:"sc-7rb3ru-0"})(["margin-bottom:16px;font-size:16px;color:darkred;"]);var pbp=ali_react_table__WEBPACK_IMPORTED_MODULE_4__.a.array({align:"right",render:assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c,width:100,features:ali_react_table__WEBPACK_IMPORTED_MODULE_4__.a.object({pbp:!0,dateOrder:ali_react_table__WEBPACK_IMPORTED_MODULE_4__.a.number})}),PbpRatioCell=styled_components__WEBPACK_IMPORTED_MODULE_9__.b.div.withConfig({displayName:"ROI-analysis-tablestories__PbpRatioCell",componentId:"sc-7rb3ru-1"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:flex-end;cursor:pointer;padding-right:12px;user-select:none;:hover{background:#d6d6d6;}"]);function redIfSmallerThanZero(v){if(v<0)return{style:{background:"#f9cace"}}}function rowRender(value,row,rowIndex){return row.render(value,row,rowIndex)}function pbpRatioRender(v,col,row){if(isNaN(v)||null==v)return null;var dateOrder=col.features.dateOrder,getTableRow=function getTableRow(codePrefix,name,render){var current=row["".concat(codePrefix,"day").concat(dateOrder)],left1=row["".concat(codePrefix,"day").concat(dateOrder-1)];return{name:name,current:current,left1:left1,left2:row["".concat(codePrefix,"day").concat(dateOrder-2)],lfl:(current-left1)/left1,render:render}},pbp_rate=getTableRow("pbp_rate_","回本率",assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c),app_trd_amt=getTableRow("app_trd_amt_","线上GMV",assets_src_format__WEBPACK_IMPORTED_MODULE_10__.a),pos_trd_amt=getTableRow("pos_trd_amt_","线下GMV",assets_src_format__WEBPACK_IMPORTED_MODULE_10__.a),market_cost=getTableRow("market_cost_","营销费用",assets_src_format__WEBPACK_IMPORTED_MODULE_10__.a),net_profit=getTableRow("net_profit_","净利额",assets_src_format__WEBPACK_IMPORTED_MODULE_10__.a),currentCol={name:"第".concat(dateOrder,"天"),code:"current",align:"right",getCellProps:redIfSmallerThanZero,render:rowRender},left1Col={name:"第".concat(dateOrder-1,"天"),code:"left1",align:"right",getCellProps:redIfSmallerThanZero,render:rowRender},left2Col={name:"第".concat(dateOrder-2,"天"),code:"left2",align:"right",getCellProps:redIfSmallerThanZero,render:rowRender},lflCol={name:"对比第".concat(dateOrder-1,"天"),code:"lfl",align:"right",render:assets_src_format__WEBPACK_IMPORTED_MODULE_10__.b},dataSource=[pbp_rate,app_trd_amt,pos_trd_amt,market_cost,net_profit];return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a,{trigger:react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(PbpRatioCell,null,Object(assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c)(v)),closable:!1,triggerType:"click",style:{maxWidth:"none",width:500}},react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(ali_react_table__WEBPACK_IMPORTED_MODULE_5__.a,{columns:[{name:"明细",code:"name"},{name:"".concat(row.stat_date," 第").concat(dateOrder,"天"),align:"center",children:[currentCol,dateOrder>=2&&lflCol].filter(Boolean)},dateOrder>=2&&left1Col,dateOrder>=3&&left2Col].filter(Boolean),dataSource:dataSource}))}pbpRatioRender.displayName="pbpRatioRender",__webpack_exports__.default={parameters:{storySource:{source:"import * as hippo from '@alifd/next'\nimport { applyTransforms, ArtColumn, BaseTable, proto, traverseColumn } from 'ali-react-table'\nimport React, { useMemo } from 'react'\nimport styled from 'styled-components'\nimport { amount, lfl, ratio } from 'assets/src/format'\n\nconst HintDiv = styled.div`\n  margin-bottom: 16px;\n  font-size: 16px;\n  color: darkred;\n`\n\nfunction generateRandomData() {\n  const mockData: any[] = []\n\n  const randomPbpRate = () => {\n    const array = [0.3, 0.4, 0.5, 0.6]\n    return array[Math.floor(Math.random() * array.length)]\n  }\n\n  const randomAppTrdAmt = () => {\n    const array = [300, 400, 500, 600]\n    return array[Math.floor(Math.random() * array.length)]\n  }\n\n  const randomPosTrdAmt = () => {\n    const array = [400, 500, 600, 800]\n    return array[Math.floor(Math.random() * array.length)]\n  }\n\n  const randomMarketCost = () => {\n    const array = [100, 200, 300, 500]\n    return array[Math.floor(Math.random() * array.length)]\n  }\n\n  const randomNetProfit = () => {\n    const array = [100, 200, 300]\n    return array[Math.floor(Math.random() * array.length)]\n  }\n\n  for (let i = 1; i <= 11; i++) {\n    const item: any = {\n      stat_date: `3月${i}号`,\n      pbp_rate_stage1: 0.4,\n      pbp_rate_stage2: 0.5,\n      pbp_rate_stage3: 0.6,\n    }\n\n    for (let d = 1; d <= 10; d++) {\n      if (d + i <= 11) {\n        item[`pbp_rate_day${d}`] = randomPbpRate()\n        item[`app_trd_amt_day${d}`] = randomAppTrdAmt()\n        item[`pos_trd_amt_day${d}`] = randomPosTrdAmt()\n        item[`market_cost_day${d}`] = randomMarketCost()\n        item[`net_profit_day${d}`] = randomNetProfit()\n      }\n    }\n\n    mockData.push(item)\n  }\n\n  return mockData\n}\n\nconst pbp = proto.array<ArtColumn>({\n  align: 'right',\n  render: ratio,\n  width: 100,\n  features: proto.object({\n    pbp: true,\n    dateOrder: proto.number,\n  }),\n})\n\nconst PbpRatioCell = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  cursor: pointer;\n  padding-right: 12px;\n  user-select: none;\n\n  :hover {\n    background: #d6d6d6;\n  }\n`\n\nfunction redIfSmallerThanZero(v: number) {\n  if (v < 0) {\n    return { style: { background: '#f9cace' } }\n  }\n}\n\n/** 使用 row.render 来渲染单元格 */\nfunction rowRender(value: any, row: any, rowIndex: number) {\n  return row.render(value, row, rowIndex)\n}\n\nfunction pbpRatioRender(v: number, col: ArtColumn, row: any) {\n  if (isNaN(v) || v == null) {\n    return null\n  }\n\n  const dateOrder = col.features.dateOrder\n\n  const getTableRow = (codePrefix: string, name: string, render: any) => {\n    const current = row[`${codePrefix}day${dateOrder}`]\n    const left1 = row[`${codePrefix}day${dateOrder - 1}`]\n    const left2 = row[`${codePrefix}day${dateOrder - 2}`]\n    const lfl = (current - left1) / left1\n    return { name, current, left1, left2, lfl, render }\n  }\n\n  const pbp_rate = getTableRow('pbp_rate_', '回本率', ratio)\n  const app_trd_amt = getTableRow('app_trd_amt_', '线上GMV', amount)\n  const pos_trd_amt = getTableRow('pos_trd_amt_', '线下GMV', amount)\n  const market_cost = getTableRow('market_cost_', '营销费用', amount)\n  const net_profit = getTableRow('net_profit_', '净利额', amount)\n\n  const currentCol = {\n    name: `第${dateOrder}天`,\n    code: 'current',\n    align: 'right' as const,\n    getCellProps: redIfSmallerThanZero,\n    render: rowRender,\n  }\n  const left1Col = {\n    name: `第${dateOrder - 1}天`,\n    code: 'left1',\n    align: 'right' as const,\n    getCellProps: redIfSmallerThanZero,\n    render: rowRender,\n  }\n  const left2Col = {\n    name: `第${dateOrder - 2}天`,\n    code: 'left2',\n    align: 'right' as const,\n    getCellProps: redIfSmallerThanZero,\n    render: rowRender,\n  }\n  const lflCol = {\n    name: `对比第${dateOrder - 1}天`,\n    code: 'lfl',\n    align: 'right' as const,\n    render: lfl,\n  }\n\n  const dataSource = [pbp_rate, app_trd_amt, pos_trd_amt, market_cost, net_profit]\n\n  return (\n    <hippo.Balloon\n      trigger={<PbpRatioCell>{ratio(v)}</PbpRatioCell>}\n      closable={false}\n      triggerType=\"click\"\n      style={{ maxWidth: 'none', width: 500 }}\n    >\n      <BaseTable\n        columns={[\n          { name: '明细', code: 'name' },\n          {\n            name: `${row.stat_date} 第${dateOrder}天`,\n            align: 'center' as const,\n            children: [currentCol, dateOrder >= 2 && lflCol].filter(Boolean),\n          },\n          dateOrder >= 2 && left1Col,\n          dateOrder >= 3 && left2Col,\n        ].filter(Boolean)}\n        dataSource={dataSource}\n      />\n    </hippo.Balloon>\n  )\n}\n\nexport default { title: '业务示例 / 投入产出分析表格' }\n\nexport function 投入产出分析表格() {\n  const dataSource = useMemo(() => generateRandomData(), [])\n\n  const columnProto = proto.array<ArtColumn>({ width: 100, align: 'right' })\n\n  const columns = columnProto([\n    { lock: true, code: 'stat_date', name: '日期' },\n    {\n      name: '阶段情况',\n      align: 'left',\n      children: columnProto([\n        { code: 'pbp_rate_stage1', name: '阶段1回本率', render: ratio },\n        { code: 'pbp_rate_stage2', name: '阶段2回本率', render: ratio },\n        { code: 'pbp_rate_stage3', name: '阶段3回本率', render: ratio },\n      ]),\n    },\n    {\n      name: '分日情况',\n      align: 'left',\n      children: pbp([\n        { code: 'pbp_rate_day1', name: '第1天回本率', features: { dateOrder: 1 } },\n        { code: 'pbp_rate_day2', name: '第2天回本率', features: { dateOrder: 2 } },\n        { code: 'pbp_rate_day3', name: '第3天回本率', features: { dateOrder: 3 } },\n        { code: 'pbp_rate_day4', name: '第4天回本率', features: { dateOrder: 4 } },\n        { code: 'pbp_rate_day5', name: '第5天回本率', features: { dateOrder: 5 } },\n        { code: 'pbp_rate_day6', name: '第6天回本率', features: { dateOrder: 6 } },\n        { code: 'pbp_rate_day7', name: '第7天回本率', features: { dateOrder: 7 } },\n        { code: 'pbp_rate_day8', name: '第8天回本率', features: { dateOrder: 8 } },\n        { code: 'pbp_rate_day9', name: '第9天回本率', features: { dateOrder: 9 } },\n        { code: 'pbp_rate_day10', name: '第10天回本率', features: { dateOrder: 10 } },\n      ]),\n    },\n  ])\n\n  const renderData = applyTransforms(\n    { dataSource: dataSource, columns },\n    traverseColumn((col) => {\n      if (!col.features?.pbp) {\n        return col\n      }\n      return {\n        ...col,\n        getCellProps() {\n          return { style: { padding: 0 } }\n        },\n        render(v: number, row: any) {\n          return pbpRatioRender(v, col, row)\n        },\n      }\n    }),\n  )\n\n  return (\n    <div>\n      <HintDiv>交互提示：点击分日情况单元格 查看详细数据</HintDiv>\n      <BaseTable columns={renderData.columns} dataSource={renderData.dataSource} />\n    </div>\n  )\n}\n",locationsMap:{"投入产出分析表格":{startLoc:{col:7,line:178},endLoc:{col:1,line:236},startBody:{col:7,line:178},endBody:{col:1,line:236}}}}},title:"业务示例 / 投入产出分析表格"};var 投入产出分析表格=function 投入产出分析表格(){var dataSource=Object(react__WEBPACK_IMPORTED_MODULE_8__.useMemo)((function(){return function generateRandomData(){for(var mockData=[],randomPbpRate=function randomPbpRate(){var array=[.3,.4,.5,.6];return array[Math.floor(Math.random()*array.length)]},randomAppTrdAmt=function randomAppTrdAmt(){var array=[300,400,500,600];return array[Math.floor(Math.random()*array.length)]},randomPosTrdAmt=function randomPosTrdAmt(){var array=[400,500,600,800];return array[Math.floor(Math.random()*array.length)]},randomMarketCost=function randomMarketCost(){var array=[100,200,300,500];return array[Math.floor(Math.random()*array.length)]},randomNetProfit=function randomNetProfit(){var array=[100,200,300];return array[Math.floor(Math.random()*array.length)]},i=1;i<=11;i++){for(var item={stat_date:"3月".concat(i,"号"),pbp_rate_stage1:.4,pbp_rate_stage2:.5,pbp_rate_stage3:.6},d=1;d<=10;d++)d+i<=11&&(item["pbp_rate_day".concat(d)]=randomPbpRate(),item["app_trd_amt_day".concat(d)]=randomAppTrdAmt(),item["pos_trd_amt_day".concat(d)]=randomPosTrdAmt(),item["market_cost_day".concat(d)]=randomMarketCost(),item["net_profit_day".concat(d)]=randomNetProfit());mockData.push(item)}return mockData}()}),[]),columnProto=ali_react_table__WEBPACK_IMPORTED_MODULE_4__.a.array({width:100,align:"right"}),columns=columnProto([{lock:!0,code:"stat_date",name:"日期"},{name:"阶段情况",align:"left",children:columnProto([{code:"pbp_rate_stage1",name:"阶段1回本率",render:assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c},{code:"pbp_rate_stage2",name:"阶段2回本率",render:assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c},{code:"pbp_rate_stage3",name:"阶段3回本率",render:assets_src_format__WEBPACK_IMPORTED_MODULE_10__.c}])},{name:"分日情况",align:"left",children:pbp([{code:"pbp_rate_day1",name:"第1天回本率",features:{dateOrder:1}},{code:"pbp_rate_day2",name:"第2天回本率",features:{dateOrder:2}},{code:"pbp_rate_day3",name:"第3天回本率",features:{dateOrder:3}},{code:"pbp_rate_day4",name:"第4天回本率",features:{dateOrder:4}},{code:"pbp_rate_day5",name:"第5天回本率",features:{dateOrder:5}},{code:"pbp_rate_day6",name:"第6天回本率",features:{dateOrder:6}},{code:"pbp_rate_day7",name:"第7天回本率",features:{dateOrder:7}},{code:"pbp_rate_day8",name:"第8天回本率",features:{dateOrder:8}},{code:"pbp_rate_day9",name:"第9天回本率",features:{dateOrder:9}},{code:"pbp_rate_day10",name:"第10天回本率",features:{dateOrder:10}}])}]),renderData=Object(ali_react_table__WEBPACK_IMPORTED_MODULE_6__.a)({dataSource:dataSource,columns:columns},Object(ali_react_table__WEBPACK_IMPORTED_MODULE_7__.a)((function(col){var _col$features;return(null===(_col$features=col.features)||void 0===_col$features?void 0:_col$features.pbp)?Object.assign({},col,{getCellProps:function getCellProps(){return{style:{padding:0}}},render:function render(v,row){return pbpRatioRender(v,col,row)}}):col})));return react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(HintDiv,null,"交互提示：点击分日情况单元格 查看详细数据"),react__WEBPACK_IMPORTED_MODULE_8___default.a.createElement(ali_react_table__WEBPACK_IMPORTED_MODULE_5__.a,{columns:renderData.columns,dataSource:renderData.dataSource}))};投入产出分析表格.displayName="投入产出分析表格"},1319:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"典型数据报表",(function(){return 典型数据报表}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(248),__webpack_require__(1320),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var ali_react_table__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(375),ali_react_table__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(1337),ali_react_table__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(229),ali_react_table__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(95),ali_react_table_pivot__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(374),ali_react_table_pivot__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(1336),react__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_22__),rxjs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(295),assets_src_cdn_data__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(118);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={parameters:{storySource:{source:"import { applyTransforms, ArtColumn, BaseTable, isLeafNode, makeTreeModeTransform } from 'ali-react-table'\nimport { buildDrillTree, buildRecordMap, DrillNode } from 'ali-react-table/pivot'\nimport React, { useEffect, useState } from 'react'\nimport { identity } from 'rxjs'\nimport { getAppTrafficData } from 'assets/src/cdn-data'\n\nexport default { title: '业务示例 / 典型数据报表' }\n\nconst amount = (v: any) => Number(v).toFixed(2)\nconst ratio = (v: any) => `${(Number(v) * 100).toFixed(2)}%`\n\nexport function 典型数据报表() {\n  const indicatorTree: ArtColumn[] = [\n    {\n      name: 'APP指标',\n      code: 'app_qty_pbt',\n      render: String,\n      children: [\n        { code: 'imp_uv_dau_pct', name: '曝光UV占DAU比例', render: ratio },\n        {\n          code: 'all_app_trd_amt_1d',\n          name: 'APP成交金额汇总',\n          render(value: any, record: any, recordIndex: number) {\n            return amount(value)\n          },\n          getCellProps(value: any, record: any, recordIndex: number) {\n            if (value > 30) {\n              return { style: { color: 'red' } }\n            }\n          },\n        },\n        { code: 'app_trd_usr_cnt_1d', name: 'APP成交用户数', render: amount },\n      ],\n    },\n    {\n      name: '转换率',\n      code: 'all_imp2pay_rate',\n      render: ratio,\n      children: [\n        { code: 'all_imp2pay_rate', name: '整体曝光至成交转化率', render: ratio },\n        { code: 'search_imp2pay_rate', name: '搜索曝光至成交转化率', render: ratio },\n        { code: 'classis_imp2pay_rate', name: '分类曝光至成交转化率', render: ratio },\n        { code: 'cart_imp2pay_rate', name: '购物车曝光至成交转化率', render: ratio },\n      ],\n    },\n  ]\n\n  const mainCol: ArtColumn = {\n    name: '指标',\n    width: 200,\n    lock: true,\n    render(value: any, record: any, recordIndex: number) {\n      return record.name\n    },\n  }\n\n  const [state, setState] = useState({\n    isLoading: true,\n    columns: [] as ArtColumn[],\n  })\n\n  useEffect(() => {\n    getAppTrafficData().then((data) => {\n      const codes = ['city_name', 'shop_name']\n      const topTree = buildDrillTree(data, codes)\n      const recordMap = buildRecordMap({ data, codes })\n\n      // 动态生成表格列\n      const columns = convertDrillTreeToColumns(recordMap, topTree)\n      setState({ isLoading: false, columns })\n    })\n  }, [])\n\n  const [openKeys, onChangeOpenKeys] = useState(['APP指标', '转换率'])\n\n  const renderData = applyTransforms(\n    // 使用 indicatorTree 作为 dataSource，因为现在表格行和指标树是对应的\n    { columns: [mainCol, ...state.columns], dataSource: indicatorTree },\n    makeTreeModeTransform({ primaryKey: 'name', openKeys, onChangeOpenKeys, indentSize: 20 }),\n  )\n\n  return <BaseTable dataSource={renderData.dataSource} columns={renderData.columns} isLoading={state.isLoading} />\n\n  function convertDrillTreeToColumns(recordMap: Map<string, any>, nodes: DrillNode[]): ArtColumn[] {\n    const result: ArtColumn[] = []\n    for (const node of nodes) {\n      result.push({\n        name: node.value,\n        code: node.key,\n        render(_v, { code, render }) {\n          const record = recordMap.get(node.key)\n          return (render ?? identity)(record?.[code])\n        },\n        getCellProps(_v, { code, getCellProps }) {\n          const record = recordMap.get(node.key)\n          if (getCellProps != null) {\n            return getCellProps(record?.[code])\n          }\n        },\n        width: 150,\n        children: isLeafNode(node) ? null : convertDrillTreeToColumns(recordMap, node.children),\n      })\n    }\n    return result\n  }\n}\n",locationsMap:{"典型数据报表":{startLoc:{col:7,line:12},endLoc:{col:1,line:106},startBody:{col:7,line:12},endBody:{col:1,line:106}}}}},title:"业务示例 / 典型数据报表"};var amount=function amount(v){return Number(v).toFixed(2)},ratio=function ratio(v){return"".concat((100*Number(v)).toFixed(2),"%")},典型数据报表=function 典型数据报表(){var indicatorTree=[{name:"APP指标",code:"app_qty_pbt",render:String,children:[{code:"imp_uv_dau_pct",name:"曝光UV占DAU比例",render:ratio},{code:"all_app_trd_amt_1d",name:"APP成交金额汇总",render:function render(value,record,recordIndex){return amount(value)},getCellProps:function getCellProps(value,record,recordIndex){if(value>30)return{style:{color:"red"}}}},{code:"app_trd_usr_cnt_1d",name:"APP成交用户数",render:amount}]},{name:"转换率",code:"all_imp2pay_rate",render:ratio,children:[{code:"all_imp2pay_rate",name:"整体曝光至成交转化率",render:ratio},{code:"search_imp2pay_rate",name:"搜索曝光至成交转化率",render:ratio},{code:"classis_imp2pay_rate",name:"分类曝光至成交转化率",render:ratio},{code:"cart_imp2pay_rate",name:"购物车曝光至成交转化率",render:ratio}]}],_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_22__.useState)({isLoading:!0,columns:[]}),2),state=_useState2[0],setState=_useState2[1];Object(react__WEBPACK_IMPORTED_MODULE_22__.useEffect)((function(){Object(assets_src_cdn_data__WEBPACK_IMPORTED_MODULE_24__.a)().then((function(data){var codes=["city_name","shop_name"],topTree=Object(ali_react_table_pivot__WEBPACK_IMPORTED_MODULE_20__.a)(data,codes),columns=function convertDrillTreeToColumns(recordMap,nodes){var _step,result=[],_loop=function _loop(node){result.push({name:node.value,code:node.key,render:function render(_v,_ref){var code=_ref.code,_render=_ref.render,record=recordMap.get(node.key);return(null!=_render?_render:rxjs__WEBPACK_IMPORTED_MODULE_23__.a)(null==record?void 0:record[code])},getCellProps:function getCellProps(_v,_ref2){var code=_ref2.code,_getCellProps=_ref2.getCellProps,record=recordMap.get(node.key);if(null!=_getCellProps)return _getCellProps(null==record?void 0:record[code])},width:150,children:Object(ali_react_table__WEBPACK_IMPORTED_MODULE_19__.a)(node)?null:convertDrillTreeToColumns(recordMap,node.children)})},_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;_loop(node)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}(Object(ali_react_table_pivot__WEBPACK_IMPORTED_MODULE_21__.a)({data:data,codes:codes}),topTree);setState({isLoading:!1,columns:columns})}))}),[]);var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_22__.useState)(["APP指标","转换率"]),2),openKeys=_useState4[0],onChangeOpenKeys=_useState4[1],renderData=Object(ali_react_table__WEBPACK_IMPORTED_MODULE_16__.a)({columns:[{name:"指标",width:200,lock:!0,render:function render(value,record,recordIndex){return record.name}}].concat(_toConsumableArray(state.columns)),dataSource:indicatorTree},Object(ali_react_table__WEBPACK_IMPORTED_MODULE_17__.a)({primaryKey:"name",openKeys:openKeys,onChangeOpenKeys:onChangeOpenKeys,indentSize:20}));return react__WEBPACK_IMPORTED_MODULE_22___default.a.createElement(ali_react_table__WEBPACK_IMPORTED_MODULE_18__.a,{dataSource:renderData.dataSource,columns:renderData.columns,isLoading:state.isLoading})}},1323:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RankTable",(function(){return RankTable}));var ali_react_table__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(229),assets_src_format__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(29),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(71);__webpack_exports__.default={parameters:{storySource:{source:"import { BaseTable } from 'ali-react-table'\nimport { amount, lfl } from 'assets/src/format'\nimport React from 'react'\nimport styled from 'styled-components'\n\nexport default { title: '业务示例 / 商品排行榜' }\n\nconst StyledBaseTable = styled(BaseTable)`\n  --border-color: none;\n  --header-bgcolor: none;\n  --row-height: 36px;\n\n  .art-table-header {\n    border-top: 1px solid #dfe3e8;\n    border-bottom: 1px solid #dfe3e8;\n  }\n\n  .art-table-header-cell {\n    height: 48px;\n  }\n`\n\nexport function RankTable() {\n  return (\n    <StyledBaseTable\n      style={{ paddingRight: 16 }}\n      columns={[\n        { name: '排名', code: 'rank', width: 50 },\n        { name: '商品名称', code: 'sku_name' },\n        { name: '指标', code: 'value', render: amount, width: 100, align: 'right' },\n        { name: '环比', code: 'rated', render: lfl, width: 100, align: 'right' },\n        { name: '周比', code: 'ratew', render: lfl, width: 100, align: 'right' },\n      ]}\n      dataSource={[\n        { rank: 1, sku_name: '青浦白鹤红颜草莓300g', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n        { rank: 2, sku_name: '凤达草鸡蛋12枚', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n        { rank: 3, sku_name: 'Dole进口甜香蕉650g', value: 1234567, rated: 0, ratew: -0.087654 },\n        { rank: 4, sku_name: '崇明芦笋350g', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n        { rank: 5, sku_name: '北海道原味吐司面包210g', value: 1234567, rated: -0.0123456, ratew: -0.087654 },\n        { rank: 6, sku_name: '盒马珍珠生虾仁150g', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n        { rank: 7, sku_name: '洛川红富士苹果4个', value: 1234567, rated: -0.0123456, ratew: -0.087654 },\n        { rank: 8, sku_name: '湾仔码头大白菜猪肉水饺300g', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n        { rank: 9, sku_name: '牛奶小蛋糕', value: 1234567, rated: 0.0123456, ratew: 0 },\n        { rank: 10, sku_name: '六记雄潮汕牛肉丸250g', value: 1234567, rated: 0.0123456, ratew: 0.087654 },\n      ]}\n    />\n  )\n}\n",locationsMap:{"rank-table":{startLoc:{col:7,line:23},endLoc:{col:1,line:48},startBody:{col:7,line:23},endBody:{col:1,line:48}}}}},title:"业务示例 / 商品排行榜"};var StyledBaseTable=Object(styled_components__WEBPACK_IMPORTED_MODULE_3__.b)(ali_react_table__WEBPACK_IMPORTED_MODULE_0__.a).withConfig({displayName:"rank-tablestories__StyledBaseTable",componentId:"mg5b7j-0"})(["--border-color:none;--header-bgcolor:none;--row-height:36px;.art-table-header{border-top:1px solid #dfe3e8;border-bottom:1px solid #dfe3e8;}.art-table-header-cell{height:48px;}"]),RankTable=function RankTable(){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(StyledBaseTable,{style:{paddingRight:16},columns:[{name:"排名",code:"rank",width:50},{name:"商品名称",code:"sku_name"},{name:"指标",code:"value",render:assets_src_format__WEBPACK_IMPORTED_MODULE_1__.a,width:100,align:"right"},{name:"环比",code:"rated",render:assets_src_format__WEBPACK_IMPORTED_MODULE_1__.b,width:100,align:"right"},{name:"周比",code:"ratew",render:assets_src_format__WEBPACK_IMPORTED_MODULE_1__.b,width:100,align:"right"}],dataSource:[{rank:1,sku_name:"青浦白鹤红颜草莓300g",value:1234567,rated:.0123456,ratew:.087654},{rank:2,sku_name:"凤达草鸡蛋12枚",value:1234567,rated:.0123456,ratew:.087654},{rank:3,sku_name:"Dole进口甜香蕉650g",value:1234567,rated:0,ratew:-.087654},{rank:4,sku_name:"崇明芦笋350g",value:1234567,rated:.0123456,ratew:.087654},{rank:5,sku_name:"北海道原味吐司面包210g",value:1234567,rated:-.0123456,ratew:-.087654},{rank:6,sku_name:"盒马珍珠生虾仁150g",value:1234567,rated:.0123456,ratew:.087654},{rank:7,sku_name:"洛川红富士苹果4个",value:1234567,rated:-.0123456,ratew:-.087654},{rank:8,sku_name:"湾仔码头大白菜猪肉水饺300g",value:1234567,rated:.0123456,ratew:.087654},{rank:9,sku_name:"牛奶小蛋糕",value:1234567,rated:.0123456,ratew:0},{rank:10,sku_name:"六记雄潮汕牛肉丸250g",value:1234567,rated:.0123456,ratew:.087654}]})};RankTable.displayName="RankTable"},1324:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"RemainMatrix",(function(){return RemainMatrix}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var ali_react_table__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(229),ali_react_table__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(69),ali_react_table__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(203),d3__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(368),react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),styled_components__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(71),assets_src_format__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(29);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var COLORS=["#E8F3FF","#D6E9FF","#ADD1FF","#85B6FF","#5790F2","#2E6BE6","#1D4DBF","#0F3499","#061F73","#03124D"],data=[{date:"1月04号",user_cnt:300,day1:.4,day2:.4,day3:.35,day4:.4,day5:.35,day6:.3,day7:.25},{date:"1月05号",user_cnt:350,day1:.4,day2:.36,day3:.45,day4:.3,day5:.3,day6:.2,day7:-1},{date:"1月06号",user_cnt:400,day1:.4,day2:.4,day3:.5,day4:.4,day5:.3,day6:-1,day7:-1},{date:"1月07号",user_cnt:350,day1:.45,day2:.4,day3:.3,day4:.2,day5:-1,day6:-1,day7:-1},{date:"1月08号",user_cnt:400,day1:.5,day2:.5,day3:.4,day4:-1,day5:-1,day6:-1,day7:-1},{date:"1月09号",user_cnt:500,day1:.6,day2:.48,day3:-1,day4:-1,day5:-1,day6:-1,day7:-1},{date:"1月10号",user_cnt:400,day1:.52,day2:-1,day3:-1,day4:-1,day5:-1,day6:-1,day7:-1}],colorIdx=d3__WEBPACK_IMPORTED_MODULE_18__.b().domain([.2,.6]).range(COLORS.map((function(c,i){return i})));__webpack_exports__.default={parameters:{storySource:{source:"import { ArtColumn, BaseTable, Classes, proto } from 'ali-react-table'\nimport * as d3 from 'd3'\nimport React from 'react'\nimport styled from 'styled-components'\nimport { amount, ratio } from 'assets/src/format'\n\nconst COLORS = [\n  '#E8F3FF',\n  '#D6E9FF',\n  '#ADD1FF',\n  '#85B6FF',\n  '#5790F2',\n  // 从这里开始字体颜色要变为白色\n  '#2E6BE6',\n  '#1D4DBF',\n  '#0F3499',\n  '#061F73',\n  '#03124D',\n]\n\nconst data = [\n  { date: '1月04号', user_cnt: 300, day1: 0.4, day2: 0.4, day3: 0.35, day4: 0.4, day5: 0.35, day6: 0.3, day7: 0.25 },\n  { date: '1月05号', user_cnt: 350, day1: 0.4, day2: 0.36, day3: 0.45, day4: 0.3, day5: 0.3, day6: 0.2, day7: -1 },\n  { date: '1月06号', user_cnt: 400, day1: 0.4, day2: 0.4, day3: 0.5, day4: 0.4, day5: 0.3, day6: -1, day7: -1 },\n  { date: '1月07号', user_cnt: 350, day1: 0.45, day2: 0.4, day3: 0.3, day4: 0.2, day5: -1, day6: -1, day7: -1 },\n  { date: '1月08号', user_cnt: 400, day1: 0.5, day2: 0.5, day3: 0.4, day4: -1, day5: -1, day6: -1, day7: -1 },\n  { date: '1月09号', user_cnt: 500, day1: 0.6, day2: 0.48, day3: -1, day4: -1, day5: -1, day6: -1, day7: -1 },\n  { date: '1月10号', user_cnt: 400, day1: 0.52, day2: -1, day3: -1, day4: -1, day5: -1, day6: -1, day7: -1 },\n]\n\nconst colorIdx = d3\n  .scaleQuantize()\n  .domain([0.2, 0.6])\n  .range(COLORS.map((c, i) => i))\n\nexport default { title: '业务示例 / 用户留存矩阵' }\n\nconst StyledBaseTable = styled(BaseTable)`\n  --border-color: none;\n  --header-bgcolor: none;\n\n  .${Classes.tableHeader} {\n    border-top: 1px solid #dfe3e8;\n    border-bottom: 1px solid #dfe3e8;\n  }\n\n  .${Classes.tableHeaderCell} {\n    height: 48px;\n  }\n`\n\nexport function RemainMatrix() {\n  const remainCol = proto.array<ArtColumn>({\n    align: 'right',\n    render: remainRateWithCount,\n    getCellProps: getRemainCellProps,\n  })\n  return (\n    <StyledBaseTable\n      defaultColumnWidth={100}\n      columns={[\n        { code: 'date', name: '日期' },\n        { code: 'user_cnt', name: '用户数' },\n        ...remainCol([\n          { code: 'day1', name: '第一日' },\n          { code: 'day2', name: '第二日' },\n          { code: 'day3', name: '第三日' },\n          { code: 'day4', name: '第四日' },\n          { code: 'day5', name: '第五日' },\n          { code: 'day6', name: '第六日' },\n          { code: 'day7', name: '第七日' },\n        ]),\n      ]}\n      dataSource={data}\n    />\n  )\n\n  function getRemainCellProps(rate: any) {\n    if (rate == -1) {\n      return\n    }\n    const i = colorIdx(rate)\n    return {\n      style: {\n        backgroundColor: COLORS[i],\n        color: i <= 4 ? '#03124D' : 'white',\n      },\n    }\n  }\n\n  function remainRateWithCount(rate: any, record: any) {\n    if (rate == -1) {\n      return null\n    }\n    return (\n      <div style={{ lineHeight: '20px' }}>\n        <div>{ratio(rate)}</div>\n        <div>{amount(rate * record.user_cnt)}</div>\n      </div>\n    )\n  }\n}\n",locationsMap:{"remain-matrix":{startLoc:{col:7,line:52},endLoc:{col:1,line:102},startBody:{col:7,line:52},endBody:{col:1,line:102}}}}},title:"业务示例 / 用户留存矩阵"};var StyledBaseTable=Object(styled_components__WEBPACK_IMPORTED_MODULE_20__.b)(ali_react_table__WEBPACK_IMPORTED_MODULE_15__.a).withConfig({displayName:"remain-matrixstories__StyledBaseTable",componentId:"sc-1ywtpqp-0"})(["--border-color:none;--header-bgcolor:none;.","{border-top:1px solid #dfe3e8;border-bottom:1px solid #dfe3e8;}.","{height:48px;}"],ali_react_table__WEBPACK_IMPORTED_MODULE_16__.a.tableHeader,ali_react_table__WEBPACK_IMPORTED_MODULE_16__.a.tableHeaderCell),RemainMatrix=function RemainMatrix(){var remainCol=ali_react_table__WEBPACK_IMPORTED_MODULE_17__.a.array({align:"right",render:function remainRateWithCount(rate,record){if(-1==rate)return null;return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("div",{style:{lineHeight:"20px"}},react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("div",null,Object(assets_src_format__WEBPACK_IMPORTED_MODULE_21__.c)(rate)),react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("div",null,Object(assets_src_format__WEBPACK_IMPORTED_MODULE_21__.a)(rate*record.user_cnt)))},getCellProps:function getRemainCellProps(rate){if(-1==rate)return;var i=colorIdx(rate);return{style:{backgroundColor:COLORS[i],color:i<=4?"#03124D":"white"}}}});return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(StyledBaseTable,{defaultColumnWidth:100,columns:[{code:"date",name:"日期"},{code:"user_cnt",name:"用户数"}].concat(_toConsumableArray(remainCol([{code:"day1",name:"第一日"},{code:"day2",name:"第二日"},{code:"day3",name:"第三日"},{code:"day4",name:"第四日"},{code:"day5",name:"第五日"},{code:"day6",name:"第六日"},{code:"day7",name:"第七日"}]))),dataSource:data})}},1328:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"筛选",(function(){return 筛选}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(190),__webpack_require__(94),__webpack_require__(457),__webpack_require__(67),__webpack_require__(191),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(458),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(248),__webpack_require__(65),__webpack_require__(93),__webpack_require__(41),__webpack_require__(64),__webpack_require__(129),__webpack_require__(211),__webpack_require__(54),__webpack_require__(55);var _alifd_next__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(109),_alifd_next__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(50),_alifd_next__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(459),_alifd_next__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(72),_alifd_next__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(73),d3__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(368),_carbon_icons_react__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(1338),ali_react_table__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(375),ali_react_table__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(1335),ali_react_table__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(74),ali_react_table__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(228),ali_react_table__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(203),ali_react_table__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(229),lodash__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(120),lodash__WEBPACK_IMPORTED_MODULE_39___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_39__),react__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_40___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_40__),assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(34);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function NormalFilter(_ref){var code=_ref.code,valueList=_ref.valueList,selectedValues=_ref.selectedValues,filterState=_ref.filterState,onChangeFilterState=_ref.onChangeFilterState,fitFilterValues=_ref.fitFilterValues;return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{background:"white",minHeight:150,minWidth:150,border:"1px solid #ccc"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{maxHeight:300,overflow:"auto",padding:16}},valueList.map((function(v){var checked=selectedValues.includes(v);return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{key:v,style:{height:24,display:"flex",alignItems:"center"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_26__.a,{checked:checked,onChange:function onChange(){onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,checked?selectedValues.filter((function(x){return x!==v})):selectedValues.concat([v]))))}},v))}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{padding:4,display:"flex",justifyContent:"space-between"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a.Group,{size:"small"},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a,{size:"small",type:"primary",onClick:function onClick(){onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,null)))}},"重置"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a,{size:"small",onClick:function onClick(){onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,fitFilterValues)))}},"自适应匹配"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a,{size:"small",onClick:function onClick(){var selectedValueSet=new Set(selectedValues);onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,valueList.filter((function(v){return!selectedValueSet.has(v)})))))}},"反选"))))}function RangeFilter(_ref2){var code=_ref2.code,extent=_ref2.extent,selectedRange=_ref2.selectedRange,filterState=_ref2.filterState,onChangeFilterState=_ref2.onChangeFilterState;return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{background:"white",minHeight:100,minWidth:250,border:"1px solid #ccc"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{padding:"8px 20px"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_28__.a,{slider:"double",min:extent[0],max:extent[1],marks:extent,value:selectedRange,onChange:function onChange(r){onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,r)))}})),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{padding:4}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,"最小值：",react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_29__.a,{type:"number",size:"small",value:selectedRange[0],onChange:function onChange(min){var minNum=Number(min);isNaN(minNum)||onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,[minNum,selectedRange[1]])))}})),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,"最大值：",react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_29__.a,{type:"number",size:"small",value:selectedRange[1],onChange:function onChange(max){var maxNum=Number(max);isNaN(maxNum)||onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,[selectedRange[0],maxNum])))}}))),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{padding:4,display:"flex",justifyContent:"space-between"}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a,{size:"small",onClick:function onClick(){onChangeFilterState(Object.assign({},filterState,_defineProperty({},code,null)))}},"重置")))}function makeFilterTransform(_ref3){var filterState=_ref3.filterState,onChangeFilterState=_ref3.onChangeFilterState;return function(input){return Object(ali_react_table__WEBPACK_IMPORTED_MODULE_33__.a)(input,(function(_ref4){var _step,dataSource=_ref4.dataSource,columns=_ref4.columns,filterCols=Object(ali_react_table__WEBPACK_IMPORTED_MODULE_34__.a)(columns,"leaf-only").filter((function(col){var _col$features;return null!=col.code&&(null===(_col$features=col.features)||void 0===_col$features?void 0:_col$features.filter)})),cache=new Map,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(filterCols);try{for(_iterator.s();!(_step=_iterator.n()).done;){var col=_step.value;"range"!==col.features.filter&&(null!=filterState[col.code]&&cache.set(col.code,new Set(filterState[col.code])))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{dataSource:dataSource.filter((function(record,rowIndex){return filterCols.every((function(col){if(null==filterState[col.code])return!0;if("range"===col.features.filter){var selectedRange=filterState[col.code],v=ali_react_table__WEBPACK_IMPORTED_MODULE_35__.a.safeGetValue(col,record,rowIndex);return selectedRange[0]<=v&&v<=selectedRange[1]}return cache.get(col.code).has(ali_react_table__WEBPACK_IMPORTED_MODULE_35__.a.safeGetValue(col,record,rowIndex))}))})),columns:columns}}),Object(ali_react_table__WEBPACK_IMPORTED_MODULE_36__.a)((function(col,_ref5){var _col$features2,dataSource=_ref5.dataSource;if(null==col.code||!(null===(_col$features2=col.features)||void 0===_col$features2?void 0:_col$features2.filter))return col;var align,isActiveFilter,filterView,justifyContent="right"===col.align?"flex-end":"center"===col.align?"center":"flex-start",prevTitle=ali_react_table__WEBPACK_IMPORTED_MODULE_35__.a.safeRenderHeader(col),valueList=lodash__WEBPACK_IMPORTED_MODULE_39___default.a.uniq(input.dataSource.map((function(record,rowIndex){return ali_react_table__WEBPACK_IMPORTED_MODULE_35__.a.safeGetValue(col,record,rowIndex)})));if("range"===col.features.filter){var _filterState$col$code,extent=d3__WEBPACK_IMPORTED_MODULE_31__.a(valueList),selectedRange=null!==(_filterState$col$code=filterState[col.code])&&void 0!==_filterState$col$code?_filterState$col$code:extent;isActiveFilter=!(selectedRange[0]===extent[0]&&selectedRange[1]===extent[1]),align="tc bc",filterView=react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(RangeFilter,{code:col.code,extent:extent,filterState:filterState,onChangeFilterState:onChangeFilterState,selectedRange:selectedRange})}else{var _filterState$col$code2,selectedValues=null!==(_filterState$col$code2=filterState[col.code])&&void 0!==_filterState$col$code2?_filterState$col$code2:valueList;isActiveFilter=selectedValues.length!==valueList.length;var fitFilterValues=lodash__WEBPACK_IMPORTED_MODULE_39___default.a.uniq(dataSource.map((function(record,rowIndex){return ali_react_table__WEBPACK_IMPORTED_MODULE_35__.a.safeGetValue(col,record,rowIndex)})));filterView=react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(NormalFilter,{code:col.code,filterState:filterState,onChangeFilterState:onChangeFilterState,selectedValues:selectedValues,valueList:valueList,fitFilterValues:fitFilterValues})}return Object.assign({},col,{title:react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:justifyContent}},react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_30__.a.Popup,{triggerType:"click",align:align,trigger:react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",{style:{cursor:"pointer",display:"flex",alignItems:"center",color:isActiveFilter?"blue":void 0,fontWeight:isActiveFilter?"bold":"normal"}},prevTitle,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_carbon_icons_react__WEBPACK_IMPORTED_MODULE_32__.a,{style:{marginLeft:2}}))},filterView))})})))}}__webpack_exports__.default={parameters:{storySource:{source:"import { Range, Button, Checkbox, Overlay, Input } from '@alifd/next'\nimport * as d3 from 'd3'\nimport { Filter16 } from '@carbon/icons-react'\nimport {\n  applyTransforms,\n  ArtColumn,\n  BaseTable,\n  collectNodes,\n  internals,\n  proto,\n  TableTransform,\n  traverseColumn,\n} from 'ali-react-table'\nimport _ from 'lodash'\nimport React, { ReactNode, useRef, useState } from 'react'\nimport { cols, useCityDataSource } from 'assets/src/ncov19-assets'\n\nexport default { title: '其他 / 筛选' }\n\ntype FilterState = { [code: string]: any }\n\nfunction NormalFilter({\n  code,\n  valueList,\n  selectedValues,\n  filterState,\n  onChangeFilterState,\n  fitFilterValues,\n}: {\n  code: string\n  valueList: (string | number)[]\n  selectedValues: (string | number)[]\n  filterState: FilterState\n  onChangeFilterState(nextValue: FilterState): void\n  fitFilterValues: (string | number)[]\n}) {\n  return (\n    <div style={{ background: 'white', minHeight: 150, minWidth: 150, border: '1px solid #ccc' }}>\n      <div style={{ maxHeight: 300, overflow: 'auto', padding: 16 }}>\n        {valueList.map((v) => {\n          const checked = selectedValues.includes(v)\n          return (\n            <div key={v} style={{ height: 24, display: 'flex', alignItems: 'center' }}>\n              <Checkbox\n                checked={checked}\n                onChange={() => {\n                  onChangeFilterState({\n                    ...filterState,\n                    [code]: checked ? selectedValues.filter((x) => x !== v) : selectedValues.concat([v]),\n                  })\n                }}\n              >\n                {v}\n              </Checkbox>\n            </div>\n          )\n        })}\n      </div>\n      <div style={{ padding: 4, display: 'flex', justifyContent: 'space-between' }}>\n        <Button.Group size=\"small\">\n          <Button\n            size=\"small\"\n            type=\"primary\"\n            onClick={() => {\n              onChangeFilterState({ ...filterState, [code]: null })\n            }}\n          >\n            重置\n          </Button>\n          <Button\n            size=\"small\"\n            onClick={() => {\n              onChangeFilterState({ ...filterState, [code]: fitFilterValues })\n            }}\n          >\n            自适应匹配\n          </Button>\n          <Button\n            size=\"small\"\n            onClick={() => {\n              const selectedValueSet = new Set(selectedValues)\n              onChangeFilterState({ ...filterState, [code]: valueList.filter((v) => !selectedValueSet.has(v)) })\n            }}\n          >\n            反选\n          </Button>\n        </Button.Group>\n      </div>\n    </div>\n  )\n}\n\nfunction RangeFilter({\n  code,\n  extent,\n  selectedRange,\n  filterState,\n  onChangeFilterState,\n}: {\n  code: string\n  extent: [number, number]\n  selectedRange: [number, number]\n  filterState: FilterState\n  onChangeFilterState(nextValue: FilterState): void\n}) {\n  return (\n    <div style={{ background: 'white', minHeight: 100, minWidth: 250, border: '1px solid #ccc' }}>\n      <div style={{ padding: '8px 20px' }}>\n        <Range\n          slider=\"double\"\n          min={extent[0]}\n          max={extent[1]}\n          marks={extent}\n          value={selectedRange}\n          onChange={(r) => {\n            onChangeFilterState({ ...filterState, [code]: r })\n          }}\n        />\n      </div>\n      <div style={{ padding: 4 }}>\n        <div>\n          最小值：\n          <Input\n            type=\"number\"\n            size=\"small\"\n            value={selectedRange[0]}\n            onChange={(min) => {\n              const minNum = Number(min)\n              if (isNaN(minNum)) {\n                return\n              }\n              onChangeFilterState({ ...filterState, [code]: [minNum, selectedRange[1]] })\n            }}\n          />\n        </div>\n        <div>\n          最大值：\n          <Input\n            type=\"number\"\n            size=\"small\"\n            value={selectedRange[1]}\n            onChange={(max) => {\n              const maxNum = Number(max)\n              if (isNaN(maxNum)) {\n                return\n              }\n              onChangeFilterState({ ...filterState, [code]: [selectedRange[0], maxNum] })\n            }}\n          />\n        </div>\n      </div>\n\n      <div style={{ padding: 4, display: 'flex', justifyContent: 'space-between' }}>\n        <Button\n          size=\"small\"\n          onClick={() => {\n            onChangeFilterState({ ...filterState, [code]: null })\n          }}\n        >\n          重置\n        </Button>\n      </div>\n    </div>\n  )\n}\n\nfunction makeFilterTransform({\n  filterState,\n  onChangeFilterState,\n}: {\n  filterState: FilterState\n  onChangeFilterState(nextValue: FilterState): void\n}): TableTransform {\n  return (input) =>\n    applyTransforms(\n      input,\n      ({ dataSource, columns }) => {\n        const filterCols = collectNodes(columns, 'leaf-only').filter((col) => col.code != null && col.features?.filter)\n        const cache = new Map<string, Set<number>>()\n        for (const col of filterCols) {\n          if (col.features.filter === 'range') {\n            // RangeFilter 不需要 cache\n            continue\n          }\n          if (filterState[col.code] == null) {\n            continue\n          }\n          cache.set(col.code, new Set(filterState[col.code]))\n        }\n\n        return {\n          dataSource: dataSource.filter((record, rowIndex) => {\n            return filterCols.every((col) => {\n              if (filterState[col.code] == null) {\n                return true\n              }\n              if (col.features.filter === 'range') {\n                const selectedRange = filterState[col.code]\n                const v = internals.safeGetValue(col, record, rowIndex)\n                return selectedRange[0] <= v && v <= selectedRange[1]\n              } else {\n                return cache.get(col.code).has(internals.safeGetValue(col, record, rowIndex))\n              }\n            })\n          }),\n          columns,\n        }\n      },\n      traverseColumn((col, { dataSource }) => {\n        if (col.code == null || !col.features?.filter) {\n          return col\n        }\n\n        const justifyContent = col.align === 'right' ? 'flex-end' : col.align === 'center' ? 'center' : 'flex-start'\n\n        const prevTitle = internals.safeRenderHeader(col)\n        const valueList = _.uniq(\n          input.dataSource.map((record, rowIndex) => internals.safeGetValue(col, record, rowIndex)),\n        )\n\n        let align: string\n        let isActiveFilter: boolean\n        let filterView: ReactNode\n\n        if (col.features.filter === 'range') {\n          const extent = d3.extent(valueList)\n          const selectedRange = (filterState[col.code] ?? extent) as [number, number]\n          isActiveFilter = !(selectedRange[0] === extent[0] && selectedRange[1] === extent[1])\n          align = 'tc bc'\n          filterView = (\n            <RangeFilter\n              code={col.code}\n              extent={extent}\n              filterState={filterState}\n              onChangeFilterState={onChangeFilterState}\n              selectedRange={selectedRange}\n            />\n          )\n        } else {\n          const selectedValues = filterState[col.code] ?? valueList\n          isActiveFilter = selectedValues.length !== valueList.length\n\n          const fitFilterValues = _.uniq(\n            dataSource.map((record, rowIndex) => internals.safeGetValue(col, record, rowIndex)),\n          )\n\n          filterView = (\n            <NormalFilter\n              code={col.code}\n              filterState={filterState}\n              onChangeFilterState={onChangeFilterState}\n              selectedValues={selectedValues}\n              valueList={valueList}\n              fitFilterValues={fitFilterValues}\n            />\n          )\n        }\n\n        return {\n          ...col,\n          title: (\n            <div style={{ display: 'flex', alignItems: 'center', justifyContent }}>\n              <Overlay.Popup\n                triggerType=\"click\"\n                align={align}\n                trigger={\n                  <div\n                    style={{\n                      cursor: 'pointer',\n                      display: 'flex',\n                      alignItems: 'center',\n                      color: isActiveFilter ? 'blue' : undefined,\n                      fontWeight: isActiveFilter ? 'bold' : 'normal',\n                    }}\n                  >\n                    {prevTitle}\n                    <Filter16 style={{ marginLeft: 2 }} />\n                  </div>\n                }\n              >\n                {filterView}\n              </Overlay.Popup>\n            </div>\n          ),\n        }\n      }),\n    )\n}\n\nexport function 筛选() {\n  const { dataSource, isLoading } = useCityDataSource()\n  const [filterState, onChangeFilterState] = useState<FilterState>({})\n  const tableRef = useRef<BaseTable>()\n\n  const colProto = proto.array<ArtColumn>({\n    features: proto.object({ filter: true }),\n  })\n\n  const columns = colProto([\n    { lock: true, width: 80, name: '', code: 'order', features: { filter: false } },\n    cols.provinceName,\n    cols.cityName,\n    { ...cols.confirmedCount, features: { filter: 'range' } },\n    { ...cols.curedCount, features: { filter: 'range' } },\n    { ...cols.deadCount, features: { filter: 'range' } },\n    cols.updateTime,\n  ])\n\n  const renderData = applyTransforms(\n    {\n      dataSource: dataSource\n        .slice(0, 15)\n        .flatMap((prov) => prov.children)\n        .map((row, i) => ({ ...row, order: i + 1 })),\n      columns,\n    },\n    makeFilterTransform({ filterState, onChangeFilterState }),\n  )\n\n  return (\n    <div>\n      <p>tips: 自适应匹配 —— 根据其他列的筛选条件缩小当前列的筛选范围</p>\n      <div>\n        <Button onClick={() => onChangeFilterState({})}>重置筛选</Button>\n      </div>\n      <BaseTable\n        ref={tableRef}\n        style={{ marginTop: 8 }}\n        isLoading={isLoading}\n        dataSource={renderData.dataSource}\n        columns={renderData.columns}\n      />\n    </div>\n  )\n}\n",locationsMap:{"筛选":{startLoc:{col:7,line:290},endLoc:{col:1,line:335},startBody:{col:7,line:290},endBody:{col:1,line:335}}}}},title:"其他 / 筛选"},NormalFilter.displayName="NormalFilter",RangeFilter.displayName="RangeFilter";var 筛选=function 筛选(){var _useCityDataSource=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.d)(),dataSource=_useCityDataSource.dataSource,isLoading=_useCityDataSource.isLoading,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_40__.useState)({}),2),filterState=_useState2[0],onChangeFilterState=_useState2[1],tableRef=Object(react__WEBPACK_IMPORTED_MODULE_40__.useRef)(),columns=ali_react_table__WEBPACK_IMPORTED_MODULE_37__.a.array({features:ali_react_table__WEBPACK_IMPORTED_MODULE_37__.a.object({filter:!0})})([{lock:!0,width:80,name:"",code:"order",features:{filter:!1}},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.provinceName,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.cityName,Object.assign({},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.confirmedCount,{features:{filter:"range"}}),Object.assign({},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.curedCount,{features:{filter:"range"}}),Object.assign({},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.deadCount,{features:{filter:"range"}}),assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_41__.a.updateTime]),renderData=Object(ali_react_table__WEBPACK_IMPORTED_MODULE_33__.a)({dataSource:dataSource.slice(0,15).flatMap((function(prov){return prov.children})).map((function(row,i){return Object.assign({},row,{order:i+1})})),columns:columns},makeFilterTransform({filterState:filterState,onChangeFilterState:onChangeFilterState}));return react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("p",null,"tips: 自适应匹配 —— 根据其他列的筛选条件缩小当前列的筛选范围"),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return onChangeFilterState({})}},"重置筛选")),react__WEBPACK_IMPORTED_MODULE_40___default.a.createElement(ali_react_table__WEBPACK_IMPORTED_MODULE_38__.a,{ref:tableRef,style:{marginTop:8},isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns}))};筛选.displayName="筛选"},1330:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"基本用法",(function(){return 基本用法})),__webpack_require__.d(__webpack_exports__,"表格样式",(function(){return 表格样式})),__webpack_require__.d(__webpack_exports__,"数据为空",(function(){return 数据为空})),__webpack_require__.d(__webpack_exports__,"空数据加载",(function(){return 空数据加载})),__webpack_require__.d(__webpack_exports__,"表格数据加载",(function(){return 表格数据加载})),__webpack_require__.d(__webpack_exports__,"左侧锁列",(function(){return 左侧锁列})),__webpack_require__.d(__webpack_exports__,"左侧与右侧锁列",(function(){return 左侧与右侧锁列})),__webpack_require__.d(__webpack_exports__,"表头吸顶",(function(){return 表头吸顶})),__webpack_require__.d(__webpack_exports__,"自定义表头单元格样式",(function(){return 自定义表头单元格样式})),__webpack_require__.d(__webpack_exports__,"表格吸底",(function(){return 表格吸底})),__webpack_require__.d(__webpack_exports__,"列分组",(function(){return 列分组})),__webpack_require__.d(__webpack_exports__,"单元格合并",(function(){return 单元格合并})),__webpack_require__.d(__webpack_exports__,"虚拟滚动与单元格合并",(function(){return 虚拟滚动与单元格合并})),__webpack_require__.d(__webpack_exports__,"自定义单元格样式",(function(){return 自定义单元格样式})),__webpack_require__.d(__webpack_exports__,"自定义表格行props",(function(){return 自定义表格行props})),__webpack_require__.d(__webpack_exports__,"限定表格容器大小",(function(){return 限定表格容器大小})),__webpack_require__.d(__webpack_exports__,"不限定表格容器大小",(function(){return 不限定表格容器大小})),__webpack_require__.d(__webpack_exports__,"Props组合",(function(){return Props组合}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(457),__webpack_require__(114),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(458),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(115),__webpack_require__(55);var _alifd_next__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(109),_alifd_next__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(50),assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(76),assets_src_format__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(29),assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(34),classnames__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(3),classnames__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_26__),react__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_27__),styled_components__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(71),_themed_table__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(52);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={parameters:{storySource:{source:"import { Button, Checkbox } from '@alifd/next'\nimport { ArtColumn, CellProps, SpanRect } from 'ali-react-table'\nimport { columns1, columns2, dataSource1, dataSource2, operationCol, repeat } from 'assets/src/biz-assets'\nimport { amount, time } from 'assets/src/format'\nimport { cols, testProvColumns, useCityDataSource, useProvinceDataSource } from 'assets/src/ncov19-assets'\nimport cx from 'classnames'\nimport React, { useState } from 'react'\nimport styled from 'styled-components'\nimport { ThemedBaseTable } from './themed-table'\n\nexport default { title: 'BaseTable 示例' }\n\nexport function 基本用法() {\n  const dataSource = [\n    { prov: '湖北省', confirmed: 54406, cured: 4793, dead: 1457, t: '2020-02-15 19:52:02' },\n    { prov: '广东省', confirmed: 1294, cured: 409, dead: 2, t: '2020-02-15 19:52:02' },\n    { prov: '河南省', confirmed: 1212, cured: 390, dead: 13, t: '2020-02-15 19:52:02' },\n    { prov: '浙江省', confirmed: 1162, cured: 428, dead: 0, t: '2020-02-15 19:52:02' },\n    { prov: '湖南省', confirmed: 1001, cured: 417, dead: 2, t: '2020-02-15 19:52:02' },\n  ]\n\n  const columns: ArtColumn[] = [\n    { code: 'prov', name: '省份', width: 150 },\n    { code: 'confirmed', name: '确诊', width: 100, align: 'right' },\n    { code: 'cured', name: '治愈', width: 100, align: 'right' },\n    { code: 'dead', name: '死亡', width: 100, align: 'right' },\n    { code: 't', name: '最后更新时间', width: 180 },\n  ]\n  return <ThemedBaseTable dataSource={dataSource} columns={columns} />\n}\n\nexport function 表格样式() {\n  const [compact, setCompact] = useState(true)\n  const [zebra, setZebra] = useState(false)\n  const [bordered, setBordered] = useState(false)\n  const [hasHeader, setHasHeader] = useState(true)\n  const [isLoading, setIsLoading] = useState(false)\n\n  return (\n    <div>\n      <div style={{ marginBottom: 16 }}>\n        <div>\n          <Checkbox checked={compact} onChange={() => setCompact(!compact)}>\n            紧凑型(仅在盒马主题下生效)\n          </Checkbox>\n          <Checkbox style={{ marginLeft: 16 }} checked={zebra} onChange={() => setZebra(!zebra)}>\n            斑马线(仅在盒马主题下生效)\n          </Checkbox>\n          <Checkbox style={{ marginLeft: 16 }} checked={bordered} onChange={() => setBordered(!bordered)}>\n            边框(仅在盒马主题下生效)\n          </Checkbox>\n        </div>\n        <div style={{ marginTop: 8 }}>\n          <Checkbox checked={hasHeader} onChange={() => setHasHeader(!hasHeader)}>\n            展示表头\n          </Checkbox>\n          <Checkbox style={{ marginLeft: 16 }} checked={isLoading} onChange={() => setIsLoading(!isLoading)}>\n            加载状态\n          </Checkbox>\n        </div>\n      </div>\n      <ThemedBaseTable\n        className={cx({ compact, zebra, bordered })}\n        isLoading={isLoading}\n        hasHeader={hasHeader}\n        dataSource={dataSource1}\n        columns={columns1}\n      />\n    </div>\n  )\n}\n\nexport function 数据为空() {\n  // 与基本表格相比，行高降低，通过较小的尺寸在屏幕中显示更多的数据，高度40px\n  return <ThemedBaseTable dataSource={[]} columns={columns2} />\n}\n\nexport function 空数据加载() {\n  return <ThemedBaseTable isLoading dataSource={[]} columns={columns2} />\n}\n\nexport function 表格数据加载() {\n  return <ThemedBaseTable isLoading dataSource={dataSource2} columns={columns2} />\n}\n\nexport function 左侧锁列() {\n  const { dataSource, isLoading } = useProvinceDataSource()\n\n  return (\n    <ThemedBaseTable\n      style={{ width: 500, height: 300, overflow: 'auto' }}\n      useOuterBorder\n      isLoading={isLoading}\n      dataSource={dataSource}\n      columns={[\n        { lock: true, code: 'provinceName', name: '省份', width: 150 },\n        { code: 'confirmedCount', name: '确诊', width: 100, render: amount, align: 'right' },\n        { code: 'suspectedCount', name: '疑似', width: 100, render: amount, align: 'right' },\n        { code: 'curedCount', name: '治愈', width: 100, render: amount, align: 'right' },\n        { code: 'deadCount', name: '死亡', width: 100, render: amount, align: 'right' },\n        { code: 'updateTime', name: '最后更新时间', width: 180, render: time },\n      ]}\n    />\n  )\n}\n\nexport function 左侧与右侧锁列() {\n  const { dataSource, isLoading } = useCityDataSource()\n\n  // 注意为表格设置 style.overflow = 'auto' 之后，必须同时设置 style.height 或 style.maxHeight\n  return (\n    <ThemedBaseTable\n      style={{ width: 600, height: 400, overflow: 'auto' }}\n      isLoading={isLoading}\n      useOuterBorder\n      dataSource={dataSource.flatMap((d) => d.children)}\n      columns={[cols.lockProvCol, cols.cityName, ...cols.indCols, cols.lockTimeCol]}\n    />\n  )\n}\n\nexport function 表头吸顶() {\n  const { dataSource, isLoading } = useProvinceDataSource()\n\n  return (\n    <div>\n      <div\n        style={{\n          position: 'sticky',\n          top: 0,\n          height: 48,\n          border: '1px solid #ccc',\n          zIndex: 30,\n          background: 'white',\n          color: '#333',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <div>表格操作栏，这里适合放置一些功能按钮</div>\n      </div>\n      <ThemedBaseTable\n        isStickyHead\n        stickyTop={48}\n        isLoading={isLoading}\n        dataSource={dataSource}\n        columns={testProvColumns}\n      />\n    </div>\n  )\n}\n\nexport function 自定义表头单元格样式() {\n  const { dataSource, isLoading } = useProvinceDataSource()\n\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      dataSource={dataSource.slice(0, 5)}\n      columns={[\n        {\n          code: 'provinceName',\n          name: '省份',\n          width: 150,\n          headerCellProps: {\n            style: { color: 'white', fontSize: 20, background: '#1ea7fd' },\n          },\n        },\n        ...cols.indCols,\n        {\n          code: 'updateTime',\n          name: '最后更新时间',\n          width: 180,\n          render: time,\n          headerCellProps: {\n            style: {\n              letterSpacing: 10,\n              fontSize: 20,\n              fontWeight: 'bold',\n              textAlign: 'center',\n            },\n          },\n        },\n      ]}\n    />\n  )\n}\n\nexport function 表格吸底() {\n  const { dataSource, isLoading } = useProvinceDataSource()\n\n  return (\n    <div>\n      <ThemedBaseTable\n        isStickyHead\n        stickyBottom={48}\n        isLoading={isLoading}\n        dataSource={dataSource}\n        columns={testProvColumns}\n      />\n      <div\n        style={{\n          position: 'sticky',\n          bottom: 0,\n          height: 48,\n          border: '1px solid #ccc',\n          zIndex: 30,\n          background: 'white',\n          color: '#333',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <div>表格底部操作栏，可以放置分页控件 或 表格总结信息</div>\n      </div>\n      <div style={{ border: '1px solid #ccc', height: '30vh', marginTop: 32 }}>OTHER CONTENT</div>\n    </div>\n  )\n}\n\nexport function 列分组() {\n  const { dataSource, isLoading } = useProvinceDataSource()\n\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      dataSource={dataSource}\n      columns={[\n        {\n          name: '基本信息',\n          lock: true,\n          children: [cols.provinceName, cols.updateTime],\n        },\n        {\n          name: '指标分组',\n          children: [\n            { name: '指标分组1', children: [cols.confirmedCount, cols.suspectedCount] },\n            { name: '指标分组2', children: [cols.curedCount, cols.deadCount] },\n          ],\n        },\n      ]}\n    />\n  )\n}\n\nexport function 单元格合并() {\n  const dataSource = [\n    { prov: '湖北省', confirmed: 54406, cured: 4793, t: '2020-02-15 19:52:02' },\n    { prov: '广东省', confirmed: 1294, cured: 409, t: '2020-02-15 19:52:02' },\n    { prov: '河南省', confirmed: 1212, cured: 390, t: '2020-02-15 19:52:02' },\n    { prov: '浙江省', confirmed: 1162, cured: 428, t: '2020-02-15 19:52:02' },\n    { prov: '湖南省', confirmed: 1001, cured: 417, t: '2020-02-15 19:52:02' },\n  ]\n\n  const columns: ArtColumn[] = [\n    {\n      code: 'prov',\n      name: '省份',\n      getCellProps(value: any, record: any, rowIndex: number): CellProps {\n        if (rowIndex === 3) {\n          return { colSpan: 2, rowSpan: 2 }\n        }\n      },\n    },\n    { code: 'confirmed', name: '确诊', align: 'right' },\n    { code: 'cured', name: '治愈', align: 'right' },\n    {\n      code: 't',\n      name: '最后更新时间',\n      getCellProps(value: any, record: any, rowIndex: number) {\n        if (rowIndex === 1) {\n          return { rowSpan: 3 }\n        }\n      },\n    },\n  ]\n  return <ThemedBaseTable defaultColumnWidth={100} dataSource={dataSource} columns={columns} />\n}\n\nexport function 虚拟滚动与单元格合并() {\n  const { dataSource, isLoading } = useCityDataSource()\n\n  let lastTop = 0\n  const rectMap = new Map<string, SpanRect>()\n  dataSource.forEach((d) => {\n    rectMap.set(d.provinceName, {\n      left: 0,\n      right: 1,\n      top: lastTop,\n      bottom: lastTop + d.children.length,\n    })\n    lastTop += d.children.length\n  })\n\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      dataSource={dataSource.slice(0, 3).flatMap((d) => d.children)}\n      useVirtual={true}\n      columns={[\n        {\n          ...cols.lockProvCol,\n          getSpanRect(value: any) {\n            return rectMap.get(value)\n          },\n        },\n        cols.lockCityCol,\n        cols.confirmedCount,\n        cols.suspectedCount,\n        cols.curedCount,\n        cols.deadCount,\n        cols.updateTime,\n      ]}\n    />\n  )\n}\n\nexport function 自定义单元格样式() {\n  const { isLoading, dataSource } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [\n    { code: 'provinceName', name: '省份', width: 150 },\n    {\n      code: 'confirmedCount',\n      name: '确诊',\n      width: 100,\n      render(v: number) {\n        const danger = v > 1000\n        const safe = v < 100\n        return (\n          <div\n            style={{\n              color: danger ? 'red' : safe ? 'green' : 'unset',\n              fontWeight: danger || safe ? 'bold' : 'normal',\n            }}\n          >\n            {amount(v)}\n          </div>\n        )\n      },\n      align: 'right',\n    },\n    { code: 'suspectedCount', name: '疑似', width: 100, render: amount, align: 'right' },\n    {\n      code: 'curedCount',\n      name: '治愈',\n      width: 100,\n      render: amount,\n      align: 'right',\n      getCellProps(value: any, record: any) {\n        if (record.curedCount / record.confirmedCount > 0.3) {\n          return { style: { background: '#129835', color: 'white', fontWeight: 'bold' } }\n        }\n      },\n    },\n    {\n      code: 'deadCount',\n      name: '死亡',\n      width: 100,\n      render: amount,\n      align: 'right',\n      getCellProps(value: any) {\n        const danger = value > 0\n        if (danger) {\n          return { style: { background: '#981c12', color: 'white', fontWeight: 'bold' } }\n        }\n      },\n    },\n    { code: 'updateTime', name: '最后更新时间', width: 180, render: time },\n  ]\n  return (\n    <div>\n      <div style={{ display: 'flex' }}>\n        <div>\n          <h1 style={{ marginBottom: 6 }}>样式说明</h1>\n          <p style={{ margin: '6px 0' }}>红色字体：确诊 &gt; 1000</p>\n          <p style={{ margin: '6px 0' }}>绿色背景：治愈 / 确诊 &gt; 0.3</p>\n          <p style={{ margin: '6px 0' }}>红色背景：死亡 &gt; 0</p>\n        </div>\n      </div>\n\n      <ThemedBaseTable isLoading={isLoading} dataSource={dataSource} columns={columns} />\n    </div>\n  )\n}\n\nexport function 自定义表格行props() {\n  const { isLoading, dataSource } = useProvinceDataSource()\n\n  const [lastClickRowIndex, setLastClickRowIndex] = useState(2)\n\n  return (\n    <ThemedBaseTable\n      style={{\n        '--bgcolor': 'transparent',\n      }}\n      isLoading={isLoading}\n      dataSource={dataSource.slice(0, 6)}\n      columns={testProvColumns}\n      getRowProps={(record, rowIndex) => {\n        return {\n          style:\n            rowIndex === lastClickRowIndex\n              ? {\n                  outlineOffset: -2,\n                  outline: '2px solid #333',\n                  background: '#ddd',\n                }\n              : undefined,\n          onClick() {\n            setLastClickRowIndex(rowIndex)\n          },\n        }\n      }}\n    />\n  )\n}\n\nconst Row = styled.div`\n  height: 36px;\n  display: flex;\n  align-items: center;\n\n  > span {\n    width: 100px;\n  }\n`\n\nexport function 限定表格容器大小() {\n  const nameCol = { lock: true, code: 'name', width: 200, name: '公司名称' }\n  const repeats: ArtColumn[] = [\n    { code: 'amount', width: 160, align: 'right', name: '金额' },\n    { code: 'dept', width: 160, name: '金融机构' },\n    { code: 'applier', width: 120, name: '申请人' },\n  ]\n\n  return (\n    <ThemedBaseTable\n      style={{ width: 800, height: 385, overflow: 'auto' }}\n      dataSource={repeat(dataSource1, 10)}\n      columns={[\n        {\n          name: '序号',\n          width: 70,\n          align: 'right',\n          lock: true,\n          getValue(_, rowIndex) {\n            return String(rowIndex + 1)\n          },\n        },\n        nameCol,\n        ...repeat(repeats, 5),\n        operationCol,\n      ]}\n    />\n  )\n}\n\nexport function 不限定表格容器大小() {\n  return (\n    <ThemedBaseTable\n      dataSource={repeat(dataSource1, 10)}\n      columns={[\n        {\n          name: '序号',\n          width: 70,\n          align: 'right',\n          lock: true,\n          getValue(_, rowIndex) {\n            return String(rowIndex + 1)\n          },\n        },\n        { lock: true, code: 'name', width: 200, name: '公司名称' },\n        ...repeat<ArtColumn>(\n          [\n            { code: 'amount', width: 160, align: 'right', name: '金额' },\n            { code: 'dept', width: 160, name: '金融机构' },\n            { code: 'applier', width: 120, name: '申请人' },\n          ],\n          5,\n        ),\n        operationCol,\n      ]}\n    />\n  )\n}\n\nexport function Props组合() {\n  const [config, setConfig] = useState({\n    hasHeader: true,\n    isLoading: false,\n    useOuterBorder: false,\n    dataSize: 10,\n    height: 'auto' as 'auto' | number,\n  })\n\n  const { isLoading, dataSource } = useProvinceDataSource()\n\n  return (\n    <div>\n      <div style={{ lineHeight: 1.5 }}>\n        hasHeader 表示表头是否展示；\n        <br />\n        isLoading 表示表格数据是否在加载中；\n        <br />\n        useOuterBorder 表示是否使用表格最外层的 div 的边框来代替单元格的外边框\n      </div>\n      <Row>\n        <Checkbox\n          checked={config.hasHeader}\n          onChange={(v) => {\n            setConfig({ ...config, hasHeader: v })\n          }}\n        >\n          hasHeader\n        </Checkbox>\n        <Checkbox\n          style={{ marginLeft: 32 }}\n          checked={config.isLoading}\n          onChange={(v) => {\n            setConfig({ ...config, isLoading: v })\n          }}\n        >\n          isLoading\n        </Checkbox>\n        <Checkbox\n          style={{ marginLeft: 32 }}\n          checked={config.useOuterBorder}\n          onChange={(v) => {\n            setConfig({ ...config, useOuterBorder: v })\n          }}\n        >\n          useOuterBorder\n        </Checkbox>\n      </Row>\n\n      <Row>\n        <span>data size:</span>\n        <Button.Group>\n          {[0, 3, 10].map((size) => (\n            <Button\n              key={size}\n              type={config.dataSize === size ? 'primary' : 'normal'}\n              onClick={() => {\n                setConfig({ ...config, dataSize: size })\n              }}\n            >\n              {size}\n            </Button>\n          ))}\n          <Button\n            type={isFinite(config.dataSize) ? 'normal' : 'primary'}\n            onClick={() => {\n              setConfig({ ...config, dataSize: Infinity })\n            }}\n          >\n            不限\n          </Button>\n        </Button.Group>\n      </Row>\n      <Row>\n        <span>table height:</span>\n        <Button.Group>\n          {['auto', 200, 400, 600].map((h) => (\n            <Button\n              key={h}\n              type={config.height === h ? 'primary' : 'normal'}\n              onClick={() => {\n                setConfig({ ...config, height: h as any })\n              }}\n            >\n              {h}\n            </Button>\n          ))}\n        </Button.Group>\n      </Row>\n      <p style={{ color: '#353640' }}>\n        tips: 为表格设置具体的高度之后记得添加 style.overflow=auto，不然高度仍然会被内容撑开.\n      </p>\n      <ThemedBaseTable\n        hasHeader={config.hasHeader}\n        isLoading={isLoading || config.isLoading}\n        useOuterBorder={config.useOuterBorder}\n        style={{\n          height: config.height,\n          overflow: config.height === 'auto' ? 'visible' : 'auto',\n          marginTop: 16,\n        }}\n        dataSource={dataSource.slice(0, config.dataSize)}\n        columns={testProvColumns}\n      />\n    </div>\n  )\n}\n",locationsMap:{"基本用法":{startLoc:{col:7,line:13},endLoc:{col:1,line:30},startBody:{col:7,line:13},endBody:{col:1,line:30}},"表格样式":{startLoc:{col:7,line:32},endLoc:{col:1,line:71},startBody:{col:7,line:32},endBody:{col:1,line:71}},"数据为空":{startLoc:{col:7,line:73},endLoc:{col:1,line:76},startBody:{col:7,line:73},endBody:{col:1,line:76}},"空数据加载":{startLoc:{col:7,line:78},endLoc:{col:1,line:80},startBody:{col:7,line:78},endBody:{col:1,line:80}},"表格数据加载":{startLoc:{col:7,line:82},endLoc:{col:1,line:84},startBody:{col:7,line:82},endBody:{col:1,line:84}},"左侧锁列":{startLoc:{col:7,line:86},endLoc:{col:1,line:105},startBody:{col:7,line:86},endBody:{col:1,line:105}},"左侧与右侧锁列":{startLoc:{col:7,line:107},endLoc:{col:1,line:120},startBody:{col:7,line:107},endBody:{col:1,line:120}},"表头吸顶":{startLoc:{col:7,line:122},endLoc:{col:1,line:152},startBody:{col:7,line:122},endBody:{col:1,line:152}},"自定义表头单元格样式":{startLoc:{col:7,line:154},endLoc:{col:1,line:188},startBody:{col:7,line:154},endBody:{col:1,line:188}},"表格吸底":{startLoc:{col:7,line:190},endLoc:{col:1,line:221},startBody:{col:7,line:190},endBody:{col:1,line:221}},"列分组":{startLoc:{col:7,line:223},endLoc:{col:1,line:246},startBody:{col:7,line:223},endBody:{col:1,line:246}},"单元格合并":{startLoc:{col:7,line:248},endLoc:{col:1,line:280},startBody:{col:7,line:248},endBody:{col:1,line:280}},"虚拟滚动与单元格合并":{startLoc:{col:7,line:282},endLoc:{col:1,line:318},startBody:{col:7,line:282},endBody:{col:1,line:318}},"自定义单元格样式":{startLoc:{col:7,line:320},endLoc:{col:1,line:387},startBody:{col:7,line:320},endBody:{col:1,line:387}},"自定义表格行props":{startLoc:{col:7,line:389},endLoc:{col:1,line:419},startBody:{col:7,line:389},endBody:{col:1,line:419}},"限定表格容器大小":{startLoc:{col:7,line:431},endLoc:{col:1,line:459},startBody:{col:7,line:431},endBody:{col:1,line:459}},"不限定表格容器大小":{startLoc:{col:7,line:461},endLoc:{col:1,line:488},startBody:{col:7,line:461},endBody:{col:1,line:488}},"props组合":{startLoc:{col:7,line:490},endLoc:{col:1,line:596},startBody:{col:7,line:490},endBody:{col:1,line:596}}}}},title:"BaseTable 示例"};var 基本用法=function 基本用法(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{dataSource:[{prov:"湖北省",confirmed:54406,cured:4793,dead:1457,t:"2020-02-15 19:52:02"},{prov:"广东省",confirmed:1294,cured:409,dead:2,t:"2020-02-15 19:52:02"},{prov:"河南省",confirmed:1212,cured:390,dead:13,t:"2020-02-15 19:52:02"},{prov:"浙江省",confirmed:1162,cured:428,dead:0,t:"2020-02-15 19:52:02"},{prov:"湖南省",confirmed:1001,cured:417,dead:2,t:"2020-02-15 19:52:02"}],columns:[{code:"prov",name:"省份",width:150},{code:"confirmed",name:"确诊",width:100,align:"right"},{code:"cured",name:"治愈",width:100,align:"right"},{code:"dead",name:"死亡",width:100,align:"right"},{code:"t",name:"最后更新时间",width:180}]})};基本用法.displayName="基本用法";var 表格样式=function 表格样式(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(!0),2),compact=_useState2[0],setCompact=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(!1),2),zebra=_useState4[0],setZebra=_useState4[1],_useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(!1),2),bordered=_useState6[0],setBordered=_useState6[1],_useState8=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(!0),2),hasHeader=_useState8[0],setHasHeader=_useState8[1],_useState10=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(!1),2),isLoading=_useState10[0],setIsLoading=_useState10[1];return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{marginBottom:16}},react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{checked:compact,onChange:function onChange(){return setCompact(!compact)}},"紧凑型(仅在盒马主题下生效)"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{style:{marginLeft:16},checked:zebra,onChange:function onChange(){return setZebra(!zebra)}},"斑马线(仅在盒马主题下生效)"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{style:{marginLeft:16},checked:bordered,onChange:function onChange(){return setBordered(!bordered)}},"边框(仅在盒马主题下生效)")),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{marginTop:8}},react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{checked:hasHeader,onChange:function onChange(){return setHasHeader(!hasHeader)}},"展示表头"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{style:{marginLeft:16},checked:isLoading,onChange:function onChange(){return setIsLoading(!isLoading)}},"加载状态"))),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{className:classnames__WEBPACK_IMPORTED_MODULE_26___default()({compact:compact,zebra:zebra,bordered:bordered}),isLoading:isLoading,hasHeader:hasHeader,dataSource:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.g,columns:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.a}))};表格样式.displayName="表格样式";var 数据为空=function 数据为空(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{dataSource:[],columns:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.b})};数据为空.displayName="数据为空";var 空数据加载=function 空数据加载(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:!0,dataSource:[],columns:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.b})};空数据加载.displayName="空数据加载";var 表格数据加载=function 表格数据加载(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:!0,dataSource:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.h,columns:assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.b})};表格数据加载.displayName="表格数据加载";var 左侧锁列=function 左侧锁列(){var _useProvinceDataSourc=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),dataSource=_useProvinceDataSourc.dataSource,isLoading=_useProvinceDataSourc.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{style:{width:500,height:300,overflow:"auto"},useOuterBorder:!0,isLoading:isLoading,dataSource:dataSource,columns:[{lock:!0,code:"provinceName",name:"省份",width:150},{code:"confirmedCount",name:"确诊",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right"},{code:"suspectedCount",name:"疑似",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right"},{code:"curedCount",name:"治愈",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right"},{code:"deadCount",name:"死亡",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right"},{code:"updateTime",name:"最后更新时间",width:180,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.d}]})};左侧锁列.displayName="左侧锁列";var 左侧与右侧锁列=function 左侧与右侧锁列(){var _useCityDataSource=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.d)(),dataSource=_useCityDataSource.dataSource,isLoading=_useCityDataSource.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{style:{width:600,height:400,overflow:"auto"},isLoading:isLoading,useOuterBorder:!0,dataSource:dataSource.flatMap((function(d){return d.children})),columns:[assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.lockProvCol,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.cityName].concat(_toConsumableArray(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.indCols),[assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.lockTimeCol])})};左侧与右侧锁列.displayName="左侧与右侧锁列";var 表头吸顶=function 表头吸顶(){var _useProvinceDataSourc2=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),dataSource=_useProvinceDataSourc2.dataSource,isLoading=_useProvinceDataSourc2.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{position:"sticky",top:0,height:48,border:"1px solid #ccc",zIndex:30,background:"white",color:"#333",display:"flex",alignItems:"center",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,"表格操作栏，这里适合放置一些功能按钮")),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isStickyHead:!0,stickyTop:48,isLoading:isLoading,dataSource:dataSource,columns:assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.b}))};表头吸顶.displayName="表头吸顶";var 自定义表头单元格样式=function 自定义表头单元格样式(){var _useProvinceDataSourc3=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),dataSource=_useProvinceDataSourc3.dataSource,isLoading=_useProvinceDataSourc3.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:isLoading,dataSource:dataSource.slice(0,5),columns:[{code:"provinceName",name:"省份",width:150,headerCellProps:{style:{color:"white",fontSize:20,background:"#1ea7fd"}}}].concat(_toConsumableArray(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.indCols),[{code:"updateTime",name:"最后更新时间",width:180,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.d,headerCellProps:{style:{letterSpacing:10,fontSize:20,fontWeight:"bold",textAlign:"center"}}}])})};自定义表头单元格样式.displayName="自定义表头单元格样式";var 表格吸底=function 表格吸底(){var _useProvinceDataSourc4=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),dataSource=_useProvinceDataSourc4.dataSource,isLoading=_useProvinceDataSourc4.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isStickyHead:!0,stickyBottom:48,isLoading:isLoading,dataSource:dataSource,columns:assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.b}),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{position:"sticky",bottom:0,height:48,border:"1px solid #ccc",zIndex:30,background:"white",color:"#333",display:"flex",alignItems:"center",justifyContent:"center"}},react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,"表格底部操作栏，可以放置分页控件 或 表格总结信息")),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{border:"1px solid #ccc",height:"30vh",marginTop:32}},"OTHER CONTENT"))};表格吸底.displayName="表格吸底";var 列分组=function 列分组(){var _useProvinceDataSourc5=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),dataSource=_useProvinceDataSourc5.dataSource,isLoading=_useProvinceDataSourc5.isLoading;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:isLoading,dataSource:dataSource,columns:[{name:"基本信息",lock:!0,children:[assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.provinceName,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.updateTime]},{name:"指标分组",children:[{name:"指标分组1",children:[assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.confirmedCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.suspectedCount]},{name:"指标分组2",children:[assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.curedCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.deadCount]}]}]})};列分组.displayName="列分组";var 单元格合并=function 单元格合并(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{defaultColumnWidth:100,dataSource:[{prov:"湖北省",confirmed:54406,cured:4793,t:"2020-02-15 19:52:02"},{prov:"广东省",confirmed:1294,cured:409,t:"2020-02-15 19:52:02"},{prov:"河南省",confirmed:1212,cured:390,t:"2020-02-15 19:52:02"},{prov:"浙江省",confirmed:1162,cured:428,t:"2020-02-15 19:52:02"},{prov:"湖南省",confirmed:1001,cured:417,t:"2020-02-15 19:52:02"}],columns:[{code:"prov",name:"省份",getCellProps:function getCellProps(value,record,rowIndex){if(3===rowIndex)return{colSpan:2,rowSpan:2}}},{code:"confirmed",name:"确诊",align:"right"},{code:"cured",name:"治愈",align:"right"},{code:"t",name:"最后更新时间",getCellProps:function getCellProps(value,record,rowIndex){if(1===rowIndex)return{rowSpan:3}}}]})};单元格合并.displayName="单元格合并";var 虚拟滚动与单元格合并=function 虚拟滚动与单元格合并(){var _useCityDataSource2=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.d)(),dataSource=_useCityDataSource2.dataSource,isLoading=_useCityDataSource2.isLoading,lastTop=0,rectMap=new Map;return dataSource.forEach((function(d){rectMap.set(d.provinceName,{left:0,right:1,top:lastTop,bottom:lastTop+d.children.length}),lastTop+=d.children.length})),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:isLoading,dataSource:dataSource.slice(0,3).flatMap((function(d){return d.children})),useVirtual:!0,columns:[Object.assign({},assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.lockProvCol,{getSpanRect:function getSpanRect(value){return rectMap.get(value)}}),assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.lockCityCol,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.confirmedCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.suspectedCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.curedCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.deadCount,assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.a.updateTime]})};虚拟滚动与单元格合并.displayName="虚拟滚动与单元格合并";var 自定义单元格样式=function 自定义单元格样式(){var _useProvinceDataSourc6=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),isLoading=_useProvinceDataSourc6.isLoading,dataSource=_useProvinceDataSourc6.dataSource,columns=[{code:"provinceName",name:"省份",width:150},{code:"confirmedCount",name:"确诊",width:100,render:function render(v){var danger=v>1e3,safe=v<100;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{color:danger?"red":safe?"green":"unset",fontWeight:danger||safe?"bold":"normal"}},Object(assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a)(v))},align:"right"},{code:"suspectedCount",name:"疑似",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right"},{code:"curedCount",name:"治愈",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right",getCellProps:function getCellProps(value,record){if(record.curedCount/record.confirmedCount>.3)return{style:{background:"#129835",color:"white",fontWeight:"bold"}}}},{code:"deadCount",name:"死亡",width:100,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.a,align:"right",getCellProps:function getCellProps(value){if(value>0)return{style:{background:"#981c12",color:"white",fontWeight:"bold"}}}},{code:"updateTime",name:"最后更新时间",width:180,render:assets_src_format__WEBPACK_IMPORTED_MODULE_24__.d}];return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{display:"flex"}},react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("h1",{style:{marginBottom:6}},"样式说明"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("p",{style:{margin:"6px 0"}},"红色字体：确诊 > 1000"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("p",{style:{margin:"6px 0"}},"绿色背景：治愈 / 确诊 > 0.3"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("p",{style:{margin:"6px 0"}},"红色背景：死亡 > 0"))),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{isLoading:isLoading,dataSource:dataSource,columns:columns}))};自定义单元格样式.displayName="自定义单元格样式";var 自定义表格行props=function 自定义表格行props(){var _useProvinceDataSourc7=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),isLoading=_useProvinceDataSourc7.isLoading,dataSource=_useProvinceDataSourc7.dataSource,_useState12=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)(2),2),lastClickRowIndex=_useState12[0],setLastClickRowIndex=_useState12[1];return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{style:{"--bgcolor":"transparent"},isLoading:isLoading,dataSource:dataSource.slice(0,6),columns:assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.b,getRowProps:function getRowProps(record,rowIndex){return{style:rowIndex===lastClickRowIndex?{outlineOffset:-2,outline:"2px solid #333",background:"#ddd"}:void 0,onClick:function onClick(){setLastClickRowIndex(rowIndex)}}}})};自定义表格行props.displayName="自定义表格行props";var Row=styled_components__WEBPACK_IMPORTED_MODULE_28__.b.div.withConfig({displayName:"tablestories__Row",componentId:"sc-187iwiq-0"})(["height:36px;display:flex;align-items:center;> span{width:100px;}"]),限定表格容器大小=function 限定表格容器大小(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{style:{width:800,height:385,overflow:"auto"},dataSource:Object(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.o)(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.g,10),columns:[{name:"序号",width:70,align:"right",lock:!0,getValue:function getValue(_,rowIndex){return String(rowIndex+1)}},{lock:!0,code:"name",width:200,name:"公司名称"}].concat(_toConsumableArray(Object(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.o)([{code:"amount",width:160,align:"right",name:"金额"},{code:"dept",width:160,name:"金融机构"},{code:"applier",width:120,name:"申请人"}],5)),[assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.m])})};限定表格容器大小.displayName="限定表格容器大小";var 不限定表格容器大小=function 不限定表格容器大小(){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{dataSource:Object(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.o)(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.g,10),columns:[{name:"序号",width:70,align:"right",lock:!0,getValue:function getValue(_,rowIndex){return String(rowIndex+1)}},{lock:!0,code:"name",width:200,name:"公司名称"}].concat(_toConsumableArray(Object(assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.o)([{code:"amount",width:160,align:"right",name:"金额"},{code:"dept",width:160,name:"金融机构"},{code:"applier",width:120,name:"申请人"}],5)),[assets_src_biz_assets__WEBPACK_IMPORTED_MODULE_23__.m])})};不限定表格容器大小.displayName="不限定表格容器大小";var Props组合=function Props组合(){var _useState14=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_27__.useState)({hasHeader:!0,isLoading:!1,useOuterBorder:!1,dataSize:10,height:"auto"}),2),config=_useState14[0],setConfig=_useState14[1],_useProvinceDataSourc8=Object(assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.e)(),isLoading=_useProvinceDataSourc8.isLoading,dataSource=_useProvinceDataSourc8.dataSource;return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("div",{style:{lineHeight:1.5}},"hasHeader 表示表头是否展示；",react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("br",null),"isLoading 表示表格数据是否在加载中；",react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("br",null),"useOuterBorder 表示是否使用表格最外层的 div 的边框来代替单元格的外边框"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(Row,null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{checked:config.hasHeader,onChange:function onChange(v){setConfig(Object.assign({},config,{hasHeader:v}))}},"hasHeader"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{style:{marginLeft:32},checked:config.isLoading,onChange:function onChange(v){setConfig(Object.assign({},config,{isLoading:v}))}},"isLoading"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_21__.a,{style:{marginLeft:32},checked:config.useOuterBorder,onChange:function onChange(v){setConfig(Object.assign({},config,{useOuterBorder:v}))}},"useOuterBorder")),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(Row,null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("span",null,"data size:"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_22__.a.Group,null,[0,3,10].map((function(size){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_22__.a,{key:size,type:config.dataSize===size?"primary":"normal",onClick:function onClick(){setConfig(Object.assign({},config,{dataSize:size}))}},size)})),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_22__.a,{type:isFinite(config.dataSize)?"normal":"primary",onClick:function onClick(){setConfig(Object.assign({},config,{dataSize:1/0}))}},"不限"))),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(Row,null,react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("span",null,"table height:"),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_22__.a.Group,null,["auto",200,400,600].map((function(h){return react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_22__.a,{key:h,type:config.height===h?"primary":"normal",onClick:function onClick(){setConfig(Object.assign({},config,{height:h}))}},h)})))),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement("p",{style:{color:"#353640"}},"tips: 为表格设置具体的高度之后记得添加 style.overflow=auto，不然高度仍然会被内容撑开."),react__WEBPACK_IMPORTED_MODULE_27___default.a.createElement(_themed_table__WEBPACK_IMPORTED_MODULE_29__.a,{hasHeader:config.hasHeader,isLoading:isLoading||config.isLoading,useOuterBorder:config.useOuterBorder,style:{height:config.height,overflow:"auto"===config.height?"visible":"auto",marginTop:16},dataSource:dataSource.slice(0,config.dataSize),columns:assets_src_ncov19_assets__WEBPACK_IMPORTED_MODULE_25__.b}))};Props组合.displayName="Props组合"},1331:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"树形表格",(function(){return pipeline_stories_})),__webpack_require__.d(__webpack_exports__,"行多选",(function(){return stories_pipeline_stories_})),__webpack_require__.d(__webpack_exports__,"行单选",(function(){return stories_pipeline_stories_0})),__webpack_require__.d(__webpack_exports__,"行展开",(function(){return stories_pipeline_stories_1})),__webpack_require__.d(__webpack_exports__,"表格排序",(function(){return stories_pipeline_stories_2})),__webpack_require__.d(__webpack_exports__,"多列排序",(function(){return stories_pipeline_stories_3})),__webpack_require__.d(__webpack_exports__,"树状模式与层级排序",(function(){return stories_pipeline_stories_4})),__webpack_require__.d(__webpack_exports__,"表头分组与列高亮",(function(){return stories_pipeline_stories_5})),__webpack_require__.d(__webpack_exports__,"多选与提示信息",(function(){return stories_pipeline_stories_6})),__webpack_require__.d(__webpack_exports__,"行详情",(function(){return stories_pipeline_stories_7}));var features_namespaceObject={};__webpack_require__.r(features_namespaceObject),__webpack_require__.d(features_namespaceObject,"multiSelect",(function(){return multiSelect})),__webpack_require__.d(features_namespaceObject,"MultiSelectFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"columnHover",(function(){return others_columnHover})),__webpack_require__.d(features_namespaceObject,"autoRowSpan",(function(){return others_autoRowSpan})),__webpack_require__.d(features_namespaceObject,"buildTree",(function(){return others_buildTree})),__webpack_require__.d(features_namespaceObject,"columnRangeHover",(function(){return others_columnRangeHover})),__webpack_require__.d(features_namespaceObject,"tips",(function(){return others_tips})),__webpack_require__.d(features_namespaceObject,"rowDetail",(function(){return rowDetail})),__webpack_require__.d(features_namespaceObject,"RowDetailFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"rowGrouping",(function(){return rowGrouping})),__webpack_require__.d(features_namespaceObject,"RowGroupingFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"singleSelect",(function(){return singleSelect})),__webpack_require__.d(features_namespaceObject,"SingleSelectFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"sort",(function(){return sort_sort})),__webpack_require__.d(features_namespaceObject,"SortFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"treeMode",(function(){return treeMode_treeMode})),__webpack_require__.d(features_namespaceObject,"TreeModeFeatureOptions",(function(){})),__webpack_require__.d(features_namespaceObject,"treeSelect",(function(){return treeSelect})),__webpack_require__.d(features_namespaceObject,"TreeSelectFeatureOptions",(function(){}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(94),__webpack_require__(67),__webpack_require__(191),__webpack_require__(58),__webpack_require__(51),__webpack_require__(731),__webpack_require__(84),__webpack_require__(62),__webpack_require__(319),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(211),__webpack_require__(54),__webpack_require__(544),__webpack_require__(55);var es_button=__webpack_require__(50),react=(__webpack_require__(190),__webpack_require__(128),__webpack_require__(328),__webpack_require__(129),__webpack_require__(0)),react_default=__webpack_require__.n(react),internals=__webpack_require__(74);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function diffArray(arr1,arr2){var set=new Set(arr2);return arr1.filter((function(x){return!set.has(x)}))}function mergeArray(arr1,arr2){var set=new Set(arr1);return arr1.concat(arr2.filter((function(x){return!set.has(x)})))}function multiSelect(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function multiSelectStep(pipeline){var _opts$isDisabled,_opts$clickArea,_ref,_ref2,_opts$value,_pipeline$state$state,_ref3,_ref4,_opts$lastKey,_pipeline$state$state2,_opts$checkboxPlaceme,Checkbox=pipeline.ctx.components.Checkbox;if(null==Checkbox)throw new Error("使用 multiSelect 之前需要设置 pipeline.ctx.components.Checkbox");var primaryKey=pipeline.ensurePrimaryKey("multiSelect"),isDisabled=null!==(_opts$isDisabled=opts.isDisabled)&&void 0!==_opts$isDisabled?_opts$isDisabled:function(){return!1},clickArea=null!==(_opts$clickArea=opts.clickArea)&&void 0!==_opts$clickArea?_opts$clickArea:"checkbox",value=null!==(_ref=null!==(_ref2=null!==(_opts$value=opts.value)&&void 0!==_opts$value?_opts$value:null===(_pipeline$state$state=pipeline.state.multiSelect)||void 0===_pipeline$state$state?void 0:_pipeline$state$state.value)&&void 0!==_ref2?_ref2:opts.defaultValue)&&void 0!==_ref?_ref:[],lastKey=null!==(_ref3=null!==(_ref4=null!==(_opts$lastKey=opts.lastKey)&&void 0!==_opts$lastKey?_opts$lastKey:null===(_pipeline$state$state2=pipeline.state.multiSelect)||void 0===_pipeline$state$state2?void 0:_pipeline$state$state2.lastKey)&&void 0!==_ref4?_ref4:opts.defaultLastKey)&&void 0!==_ref3?_ref3:"",_onChange=function onChange(nextValue,key,keys,action){var _opts$onChange;null===(_opts$onChange=opts.onChange)||void 0===_opts$onChange||_opts$onChange.call(opts,nextValue,key,keys,action),pipeline.setStateAtKey("multiSelect",{value:nextValue,lastKey:key},{keys:keys,action:action})},allKeys=pipeline.getDataSource().map((function(record,rowIndex){return isDisabled(record,rowIndex)?null:internals.a.safeGetRowKey(primaryKey,record,rowIndex)})).filter((function(key){return null!=key})),set=new Set(value),isAllChecked=allKeys.every((function(key){return set.has(key)})),isAnyChecked=allKeys.some((function(key){return set.has(key)})),defaultCheckboxColumnTitle=react_default.a.createElement(Checkbox,{checked:isAllChecked,indeterminate:!isAllChecked&&isAnyChecked,onChange:function onChange(_){isAllChecked?_onChange(diffArray(value,allKeys),"",allKeys,"uncheck"):_onChange(mergeArray(value,allKeys),"",allKeys,"check")}}),checkboxColumn=Object.assign({name:"是否选中",title:defaultCheckboxColumnTitle,width:50,align:"center"},opts.checkboxColumn,{getCellProps:function getCellProps(value,row,rowIndex){if("cell"===clickArea){var _key=internals.a.safeGetRowKey(primaryKey,row,rowIndex),prevChecked=set.has(_key),disabled=isDisabled(row,rowIndex);return{style:{cursor:disabled?"not-allowed":"pointer"},onClick:disabled?void 0:function(event){onCheckboxChange(prevChecked,_key,event.shiftKey)}}}},render:function render(_,row,rowIndex){var key=internals.a.safeGetRowKey(primaryKey,row,rowIndex),checked=set.has(key);return react_default.a.createElement(Checkbox,{checked:checked,disabled:isDisabled(row,rowIndex),onChange:"checkbox"===clickArea?function(arg1,arg2){var _arg2$nativeEvent,nativeEvent=null!==(_arg2$nativeEvent=null==arg2?void 0:arg2.nativeEvent)&&void 0!==_arg2$nativeEvent?_arg2$nativeEvent:arg1.nativeEvent;nativeEvent&&onCheckboxChange(checked,key,nativeEvent.shiftKey)}:void 0})}}),nextColumns=pipeline.getColumns().slice();return"start"===(null!==(_opts$checkboxPlaceme=opts.checkboxPlacement)&&void 0!==_opts$checkboxPlaceme?_opts$checkboxPlaceme:"start")?nextColumns.unshift(checkboxColumn):nextColumns.push(checkboxColumn),pipeline.columns(nextColumns),pipeline.appendRowPropsGetter((function(row,rowIndex){var className,onClick,rowKey=internals.a.safeGetRowKey(primaryKey,row,rowIndex),style={},checked=set.has(rowKey);(opts.highlightRowWhenSelected&&checked&&(className="highlight"),"row"===clickArea)&&(isDisabled(row,rowIndex)||(style.cursor="pointer",onClick=function onClick(e){onCheckboxChange(checked,rowKey,e.shiftKey)}));return{className:className,style:style,onClick:onClick}})),pipeline;function onCheckboxChange(prevChecked,key,batch){var batchKeys=[key];if(batch&&lastKey){var lastIdx=allKeys.indexOf(lastKey),cntIdx=allKeys.indexOf(key),_ref6=_slicedToArray(lastIdx<cntIdx?[lastIdx,cntIdx]:[cntIdx,lastIdx],2),start=_ref6[0],end=_ref6[1];batchKeys=allKeys.slice(start,end+1)}prevChecked?_onChange(diffArray(value,batchKeys),key,batchKeys,"uncheck"):_onChange(mergeArray(value,batchKeys),key,batchKeys,"check")}}}try{multiSelect.displayName="multiSelect",multiSelect.__docgenInfo={description:"",displayName:"multiSelect",props:{defaultValue:{defaultValue:null,description:"非受控用法：默认选中的值",name:"defaultValue",required:!1,type:{name:"string[]"}},defaultLastKey:{defaultValue:null,description:"非受控用法：默认 lastKey",name:"defaultLastKey",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"受控用法：当前选中的 keys",name:"value",required:!1,type:{name:"string[]"}},lastKey:{defaultValue:null,description:"受控用法：上一次操作对应的 rowKey",name:"lastKey",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"受控用法：状态改变回调",name:"onChange",required:!1,type:{name:'(nextValue: string[], key: string, keys: string[], action: "check" | "uncheck") => void'}},checkboxPlacement:{defaultValue:null,description:"复选框所在列的位置",name:"checkboxPlacement",required:!1,type:{name:"enum",value:[{value:'"end"'},{value:'"start"'}]}},checkboxColumn:{defaultValue:null,description:"复选框所在列的 column 配置，可指定 width，lock, title, align, features 等属性",name:"checkboxColumn",required:!1,type:{name:"Partial<ArtColumnStaticPart>"}},highlightRowWhenSelected:{defaultValue:null,description:"是否高亮被选中的行",name:"highlightRowWhenSelected",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"判断一行中的 checkbox 是否要禁用",name:"isDisabled",required:!1,type:{name:"(row: any, rowIndex: number) => boolean"}},clickArea:{defaultValue:null,description:"点击事件的响应区域",name:"clickArea",required:!1,type:{name:"enum",value:[{value:'"checkbox"'},{value:'"cell"'},{value:'"row"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/multiSelect.tsx#multiSelect"]={docgenInfo:multiSelect.__docgenInfo,name:"multiSelect",path:"../ali-react-table/src/pipeline/features/multiSelect.tsx#multiSelect"})}catch(__react_docgen_typescript_loader_error){}var columnHover=__webpack_require__(1348),columnRangeHover=__webpack_require__(1349),autoRowSpan=__webpack_require__(1350),tips=__webpack_require__(1351),buildTree=__webpack_require__(1352);function others_columnHover(){var inputOpts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},stateKey="columnHover";return function(pipeline){var _ref,_ref2,_opts$hoverColIndex;if(!1===inputOpts)return pipeline;var opts="boolean"==typeof inputOpts?{}:inputOpts,hoverColIndex=null!==(_ref=null!==(_ref2=null!==(_opts$hoverColIndex=opts.hoverColIndex)&&void 0!==_opts$hoverColIndex?_opts$hoverColIndex:pipeline.state[stateKey])&&void 0!==_ref2?_ref2:opts.defaultHoverColIndex)&&void 0!==_ref?_ref:-1;return pipeline.useTransform(Object(columnHover.a)({hoverColor:opts.hoverColor,hoverColIndex:hoverColIndex,onChangeHoverColIndex:function onChangeHoverColIndex(nextColIndex){var _opts$onChangeHoverCo;pipeline.setStateAtKey(stateKey,nextColIndex),null===(_opts$onChangeHoverCo=opts.onChangeHoverColIndex)||void 0===_opts$onChangeHoverCo||_opts$onChangeHoverCo.call(opts,nextColIndex)}}))}}function others_columnRangeHover(){var inputOpts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},stateKey="columnHover";return function(pipeline){var _ref3,_ref4,_opts$hoverRange;if(!1===inputOpts)return pipeline;var opts="boolean"==typeof inputOpts?{}:inputOpts,hoverRange=null!==(_ref3=null!==(_ref4=null!==(_opts$hoverRange=opts.hoverRange)&&void 0!==_opts$hoverRange?_opts$hoverRange:pipeline.state[stateKey])&&void 0!==_ref4?_ref4:opts.defaultHoverRange)&&void 0!==_ref3?_ref3:{start:-1,end:-1};return pipeline.useTransform(Object(columnRangeHover.a)({hoverColor:opts.hoverColor,headerHoverColor:opts.headerHoverColor,hoverRange:hoverRange,onChangeHoverRange:function onChangeHoverRange(nextColIndexRange){var _opts$onChangeHoverRa;pipeline.setStateAtKey(stateKey,nextColIndexRange),null===(_opts$onChangeHoverRa=opts.onChangeHoverRange)||void 0===_opts$onChangeHoverRa||_opts$onChangeHoverRa.call(opts,nextColIndexRange)}}))}}function others_autoRowSpan(){return function(pipeline){return pipeline.useTransform(Object(autoRowSpan.a)())}}function others_tips(){return function(pipeline){var Balloon=pipeline.ctx.components.Balloon,Tooltip=pipeline.ctx.components.Tooltip;if(null==Balloon&&null==Tooltip)throw new Error("使用 tips 之前需要通过 pipeline context 设置 components.Balloon / components.Tooltip");return pipeline.useTransform(Object(tips.a)({Balloon:Balloon,Tooltip:Tooltip}))}}function others_buildTree(idProp,parentIdProp){return function(pipeline){return pipeline.mapDataSource((function(rows){return Object(buildTree.a)(idProp,parentIdProp,rows)}))}}try{others_columnHover.displayName="columnHover",others_columnHover.__docgenInfo={description:"",displayName:"columnHover",props:{hoverColor:{defaultValue:null,description:"鼠标悬停的颜色，默认为 'var(--hover-bgcolor)'",name:"hoverColor",required:!1,type:{name:"string"}},defaultHoverColIndex:{defaultValue:null,description:"非受控用法：默认的 colIndex",name:"defaultHoverColIndex",required:!1,type:{name:"number"}},hoverColIndex:{defaultValue:null,description:"受控用法：当前鼠标悬停列的下标（colIndex)",name:"hoverColIndex",required:!1,type:{name:"number"}},onChangeHoverColIndex:{defaultValue:null,description:"受控用法：colIndex 改变的回调",name:"onChangeHoverColIndex",required:!1,type:{name:"(nextColIndex: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/others.tsx#columnHover"]={docgenInfo:others_columnHover.__docgenInfo,name:"columnHover",path:"../ali-react-table/src/pipeline/features/others.tsx#columnHover"})}catch(__react_docgen_typescript_loader_error){}try{others_columnRangeHover.displayName="columnRangeHover",others_columnRangeHover.__docgenInfo={description:"",displayName:"columnRangeHover",props:{hoverColor:{defaultValue:null,description:"鼠标悬停时单元格的背景色，默认为 'var(--hover-bgcolor)'",name:"hoverColor",required:!1,type:{name:"string"}},headerHoverColor:{defaultValue:null,description:"鼠标悬停时表头的背景色，默认为 'var(--header-hover-bgcolor)'",name:"headerHoverColor",required:!1,type:{name:"string"}},defaultHoverRange:{defaultValue:null,description:"非受控用法：默认的悬停范围",name:"defaultHoverRange",required:!1,type:{name:"HoverRange"}},hoverRange:{defaultValue:null,description:"受控用法：当前悬停范围",name:"hoverRange",required:!1,type:{name:"HoverRange"}},onChangeHoverRange:{defaultValue:null,description:"受控用法：悬停渲染改变的回调",name:"onChangeHoverRange",required:!1,type:{name:"(nextColIndexRange: HoverRange) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/others.tsx#columnRangeHover"]={docgenInfo:others_columnRangeHover.__docgenInfo,name:"columnRangeHover",path:"../ali-react-table/src/pipeline/features/others.tsx#columnRangeHover"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(93);var classnames=__webpack_require__(3),classnames_default=__webpack_require__.n(classnames),common_views=__webpack_require__(99),collectNodes=__webpack_require__(1335),mergeCellProps=__webpack_require__(269),utils_others=__webpack_require__(178);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return rowDetail_arrayLikeToArray(arr)}(arr)||_iterableToArray(arr)||rowDetail_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toArray(arr){return function rowDetail_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||_iterableToArray(arr)||rowDetail_unsupportedIterableToArray(arr)||function rowDetail_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rowDetail_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return rowDetail_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rowDetail_arrayLikeToArray(o,minLen):void 0}}function rowDetail_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var rowDetailSymbol=Symbol("row-detail"),rowDetail_fallbackRenderDetail=function fallbackRenderDetail(row){return react_default.a.createElement("div",null,react_default.a.createElement("b",{style:{color:"indianred"}},"设置 ",react_default.a.createElement("code",null,"rowDetail.renderDetail")," 来自定义详情内容"),react_default.a.createElement("br",null),react_default.a.createElement("span",{style:{wordBreak:"break-all"}},"ROW DETAIL of ",JSON.stringify(row)))};function rowDetail(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function rowDetailStep(pipeline){var _opts$getDetailKey,_opts$renderDetail,_opts$hasDetail,_ref,_ref2,_opts$openKeys,primaryKey=pipeline.ensurePrimaryKey("rowDetail");if("string"!=typeof primaryKey)throw new Error("rowDetail 仅支持字符串作为 primaryKey");var indents=pipeline.ctx.indents,textOffset=indents.iconIndent+indents.iconWidth+indents.iconGap,getDetailKey=null!==(_opts$getDetailKey=opts.getDetailKey)&&void 0!==_opts$getDetailKey?_opts$getDetailKey:function(row){return row[primaryKey]+"_detail"},renderDetail=null!==(_opts$renderDetail=opts.renderDetail)&&void 0!==_opts$renderDetail?_opts$renderDetail:rowDetail_fallbackRenderDetail,hasDetail=null!==(_opts$hasDetail=opts.hasDetail)&&void 0!==_opts$hasDetail?_opts$hasDetail:function(){return!0},openKeys=null!==(_ref=null!==(_ref2=null!==(_opts$openKeys=opts.openKeys)&&void 0!==_opts$openKeys?_opts$openKeys:pipeline.state.rowDetail)&&void 0!==_ref2?_ref2:opts.defaultOpenAll?pipeline.getDataSource().filter(hasDetail).map((function(row){return row[primaryKey]})):opts.defaultOpenKeys)&&void 0!==_ref?_ref:[],onChangeOpenKeys=function onChangeOpenKeys(nextKeys,key,action){var _opts$onChangeOpenKey;null===(_opts$onChangeOpenKey=opts.onChangeOpenKeys)||void 0===_opts$onChangeOpenKey||_opts$onChangeOpenKey.call(opts,nextKeys,key,action),pipeline.setStateAtKey("rowDetail",nextKeys,{key:key,action:action})},openKeySet=new Set(openKeys);return pipeline.dataSource(Object(utils_others.a)(pipeline.getDataSource(),(function(row,rowIndex){return openKeySet.has(row[primaryKey])?[row,Object.assign(_defineProperty({},rowDetailSymbol,!0),row,_defineProperty({},primaryKey,getDetailKey(row,rowIndex)))]:[row]}))).columns(function processColumns(columns){if(0===columns.length)return columns;var columnFlatCount=Object(collectNodes.a)(columns,"leaf-only").length,_columns=_toArray(columns),firstCol=_columns[0],others=_columns.slice(1);return[Object.assign({},firstCol,{title:react_default.a.createElement("div",{style:{display:"inline-block",marginLeft:textOffset}},internals.a.safeRenderHeader(firstCol)),render:function render(value,row,rowIndex){if(row[rowDetailSymbol])return renderDetail(row,rowIndex);var content=internals.a.safeRender(firstCol,row,rowIndex);if(!hasDetail(row,rowIndex))return react_default.a.createElement(common_views.b,{style:{marginLeft:textOffset}},content);var expandCls=openKeySet.has(row[primaryKey])?"expanded":"collapsed";return react_default.a.createElement(common_views.a,{className:classnames_default()("expansion-cell",expandCls)},react_default.a.createElement(common_views.c.CaretRight,{className:classnames_default()("expansion-icon",expandCls),style:{marginLeft:indents.iconIndent,marginRight:indents.iconGap}}),content)},getCellProps:function getCellProps(value,row,rowIndex){var _firstCol$getCellProp;if(row[rowDetailSymbol])return{style:Object.assign({"--cell-padding":"0",overflow:"hidden"},opts.detailCellStyle)};var prevProps=null===(_firstCol$getCellProp=firstCol.getCellProps)||void 0===_firstCol$getCellProp?void 0:_firstCol$getCellProp.call(firstCol,value,row,rowIndex);if(!hasDetail(row,rowIndex))return prevProps;var onClick,rowKey=row[primaryKey];return onClick=openKeySet.has(rowKey)?function onClick(){onChangeOpenKeys(openKeys.filter((function(key){return key!==rowKey})),rowKey,"collapse")}:function onClick(){onChangeOpenKeys([].concat(_toConsumableArray(openKeys),[rowKey]),rowKey,"expand")},Object(mergeCellProps.a)(prevProps,{onClick:onClick,style:{cursor:"pointer"}})},getSpanRect:function getSpanRect(value,row,rowIndex){if(row[rowDetailSymbol])return{top:rowIndex,bottom:rowIndex+1,left:0,right:columnFlatCount}}})].concat(_toConsumableArray(others))}(pipeline.getColumns())).appendRowPropsGetter((function(row){if(row[rowDetailSymbol])return{className:"no-hover"}}))}}rowDetail_fallbackRenderDetail.displayName="fallbackRenderDetail";try{rowDetail.displayName="rowDetail",rowDetail.__docgenInfo={description:"",displayName:"rowDetail",props:{defaultOpenAll:{defaultValue:null,description:"非受控用法：是否默认展开所有详情单元格",name:"defaultOpenAll",required:!1,type:{name:"boolean"}},defaultOpenKeys:{defaultValue:null,description:"非受控用法：默认展开的 keys",name:"defaultOpenKeys",required:!1,type:{name:"string[]"}},openKeys:{defaultValue:null,description:"受控用法：当前展开的 keys",name:"openKeys",required:!1,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"受控用法：openKeys 改变的回调",name:"onChangeOpenKeys",required:!1,type:{name:'(nextKeys: string[], key: string, action: "expand" | "collapse") => void'}},renderDetail:{defaultValue:null,description:"详情单元格的渲染方法",name:"renderDetail",required:!1,type:{name:"(row: any, rowIndex: number) => ReactNode"}},hasDetail:{defaultValue:null,description:"是否包含详情单元格",name:"hasDetail",required:!1,type:{name:"(row: any, rowIndex: number) => ReactNode"}},getDetailKey:{defaultValue:null,description:"获取详情单元格所在行的 key，默认为 `(row) => row[primaryKey] + '_detail'`",name:"getDetailKey",required:!1,type:{name:"(row: any, rowIndex: number) => string"}},detailCellStyle:{defaultValue:null,description:"详情单元格 td 的额外样式",name:"detailCellStyle",required:!1,type:{name:"CSSProperties"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/rowDetail.tsx#rowDetail"]={docgenInfo:rowDetail.__docgenInfo,name:"rowDetail",path:"../ali-react-table/src/pipeline/features/rowDetail.tsx#rowDetail"})}catch(__react_docgen_typescript_loader_error){}var isLeafNode=__webpack_require__(95);function rowGrouping_toConsumableArray(arr){return function rowGrouping_arrayWithoutHoles(arr){if(Array.isArray(arr))return rowGrouping_arrayLikeToArray(arr)}(arr)||rowGrouping_iterableToArray(arr)||rowGrouping_unsupportedIterableToArray(arr)||function rowGrouping_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rowGrouping_toArray(arr){return function rowGrouping_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||rowGrouping_iterableToArray(arr)||rowGrouping_unsupportedIterableToArray(arr)||function rowGrouping_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rowGrouping_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return rowGrouping_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rowGrouping_arrayLikeToArray(o,minLen):void 0}}function rowGrouping_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function rowGrouping_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}var groupingMetaSymbol=Symbol("row-grouping-meta");function attachGroupingMeta(row){return Object.assign(function rowGrouping_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},groupingMetaSymbol,{expandable:!Object(isLeafNode.a)(row)}),row)}function getGroupingMeta(row){return null==row[groupingMetaSymbol]?{isGroupHeader:!1,expandable:!1}:{isGroupHeader:!0,expandable:row[groupingMetaSymbol].expandable}}function rowGroupingRowPropsGetter(row){if(getGroupingMeta(row).isGroupHeader)return{className:"alternative"}}function rowGrouping(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(pipeline){var _ref,_ref2,_opts$openKeys,indents=pipeline.ctx.indents,textOffset=indents.iconIndent+indents.iconWidth+indents.iconGap,primaryKey=pipeline.ensurePrimaryKey("rowGrouping");if("string"!=typeof primaryKey)throw new Error("rowGrouping 仅支持字符串作为 primaryKey");var openKeys=null!==(_ref=null!==(_ref2=null!==(_opts$openKeys=opts.openKeys)&&void 0!==_opts$openKeys?_opts$openKeys:pipeline.state.rowGrouping)&&void 0!==_ref2?_ref2:opts.defaultOpenAll?pipeline.getDataSource().map((function(row){return row[primaryKey]})):opts.defaultOpenKeys)&&void 0!==_ref?_ref:[],openKeySet=new Set(openKeys),onChangeOpenKeys=function onChangeOpenKeys(nextKeys,key,action){var _opts$onChangeOpenKey;null===(_opts$onChangeOpenKey=opts.onChangeOpenKeys)||void 0===_opts$onChangeOpenKey||_opts$onChangeOpenKey.call(opts,nextKeys,key,action),pipeline.setStateAtKey("rowGrouping",nextKeys,{key:key,action:action})};return pipeline.mapDataSource((function processDataSource(input){return Object(utils_others.a)(input,(function(row){var result=[attachGroupingMeta(row)];return openKeySet.has(row[primaryKey])&&Array.isArray(row.children)&&(result=result.concat(row.children)),result}))})).mapColumns((function processColumns(columns){if(0===columns.length)return columns;var columnFlatCount=Object(collectNodes.a)(columns,"leaf-only").length,_columns=rowGrouping_toArray(columns),firstCol=_columns[0],others=_columns.slice(1);return[Object.assign({},firstCol,{title:react_default.a.createElement("div",{style:{display:"inline-block",marginLeft:textOffset}},internals.a.safeRenderHeader(firstCol)),render:function render(value,row,rowIndex){var _row$groupTitle2,content=internals.a.safeRender(firstCol,row,rowIndex),meta=getGroupingMeta(row);if(!meta.isGroupHeader||!meta.expandable){var _row$groupTitle,marginLeft=textOffset+(meta.isGroupHeader?0:indents.indentSize);return react_default.a.createElement(common_views.b,{style:{marginLeft:marginLeft}},meta.isGroupHeader&&null!==(_row$groupTitle=row.groupTitle)&&void 0!==_row$groupTitle?_row$groupTitle:content)}var expandCls=openKeySet.has(row[primaryKey])?"expanded":"collapsed";return react_default.a.createElement(common_views.a,{className:classnames_default()("expansion-cell",expandCls)},react_default.a.createElement(common_views.c.CaretRight,{className:classnames_default()("expansion-icon",expandCls),style:{marginLeft:indents.iconIndent,marginRight:indents.iconGap}}),null!==(_row$groupTitle2=row.groupTitle)&&void 0!==_row$groupTitle2?_row$groupTitle2:content)},getCellProps:function getCellProps(value,row,rowIndex){var _firstCol$getCellProp,meta=getGroupingMeta(row);if(meta.isGroupHeader){var onClick,expandable=meta.expandable,rowKey=row[primaryKey],expanded=openKeySet.has(rowKey);expandable&&(onClick=expanded?function onClick(){onChangeOpenKeys(openKeys.filter((function(key){return key!==rowKey})),rowKey,"collapse")}:function onClick(){onChangeOpenKeys([].concat(rowGrouping_toConsumableArray(openKeys),[rowKey]),rowKey,"expand")});var prevProps=null===(_firstCol$getCellProp=firstCol.getCellProps)||void 0===_firstCol$getCellProp?void 0:_firstCol$getCellProp.call(firstCol,value,row,rowIndex);return Object(mergeCellProps.a)(prevProps,{onClick:onClick,style:{cursor:expandable?"pointer":void 0}})}},getSpanRect:function getSpanRect(value,row,rowIndex){if(getGroupingMeta(row).isGroupHeader)return{top:rowIndex,bottom:rowIndex+1,left:0,right:columnFlatCount}}})].concat(rowGrouping_toConsumableArray(others))})).appendRowPropsGetter(rowGroupingRowPropsGetter)}}try{rowGrouping.displayName="rowGrouping",rowGrouping.__docgenInfo={description:"",displayName:"rowGrouping",props:{defaultOpenAll:{defaultValue:null,description:"非受控用法：是否默认展开所有分组",name:"defaultOpenAll",required:!1,type:{name:"boolean"}},defaultOpenKeys:{defaultValue:null,description:"非受控用法：默认展开的 keys",name:"defaultOpenKeys",required:!1,type:{name:"string[]"}},openKeys:{defaultValue:null,description:"受控用法：当前展开的 keys",name:"openKeys",required:!1,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"受控用法：当前展开 keys 改变回调",name:"onChangeOpenKeys",required:!1,type:{name:'(nextKeys: string[], key: string, action: "expand" | "collapse") => void'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/rowGrouping.tsx#rowGrouping"]={docgenInfo:rowGrouping.__docgenInfo,name:"rowGrouping",path:"../ali-react-table/src/pipeline/features/rowGrouping.tsx#rowGrouping"})}catch(__react_docgen_typescript_loader_error){}function singleSelect(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function singleSelectStep(pipeline){var _opts$clickArea,_opts$isDisabled,_ref,_opts$value,_opts$radioPlacement,Radio=pipeline.ctx.components.Radio;if(null==Radio)throw new Error("使用 singleSelect 之前需要通过 pipeline context 设置 components.Radio");var clickArea=null!==(_opts$clickArea=opts.clickArea)&&void 0!==_opts$clickArea?_opts$clickArea:"radio",isDisabled=null!==(_opts$isDisabled=opts.isDisabled)&&void 0!==_opts$isDisabled?_opts$isDisabled:function(){return!1},primaryKey=pipeline.ensurePrimaryKey("singleSelect"),value=null!==(_ref=null!==(_opts$value=opts.value)&&void 0!==_opts$value?_opts$value:pipeline.state.singleSelect)&&void 0!==_ref?_ref:opts.defaultValue,onChange=function onChange(rowKey){var _opts$onChange;null===(_opts$onChange=opts.onChange)||void 0===_opts$onChange||_opts$onChange.call(opts,rowKey),pipeline.setStateAtKey("singleSelect",rowKey)},radioColumn=Object.assign({name:"",width:50,align:"center"},opts.radioColumn,{getCellProps:function getCellProps(value,row,rowIndex){if("cell"===clickArea){var rowKey=internals.a.safeGetRowKey(primaryKey,row,rowIndex),disabled=isDisabled(row,rowIndex);return{style:{cursor:disabled?"not-allowed":"pointer"},onClick:disabled?void 0:function(){return onChange(rowKey)}}}},render:function render(_,row,rowIndex){var rowKey=internals.a.safeGetRowKey(primaryKey,row,rowIndex);return react_default.a.createElement(Radio,{checked:value===rowKey,disabled:isDisabled(row,rowIndex),onChange:"radio"===clickArea?function(){return onChange(rowKey)}:void 0})}}),nextColumns=pipeline.getColumns().slice();return"start"===(null!==(_opts$radioPlacement=opts.radioPlacement)&&void 0!==_opts$radioPlacement?_opts$radioPlacement:"start")?nextColumns.unshift(radioColumn):nextColumns.push(radioColumn),pipeline.columns(nextColumns),pipeline.appendRowPropsGetter((function(row,rowIndex){var className,onClick,rowKey=internals.a.safeGetRowKey(primaryKey,row,rowIndex),style={};return opts.highlightRowWhenSelected&&value===rowKey&&(className="highlight"),"row"!==clickArea||isDisabled(row,rowIndex)||(style.cursor="pointer",onClick=function onClick(){var _opts$onChange2;null===(_opts$onChange2=opts.onChange)||void 0===_opts$onChange2||_opts$onChange2.call(opts,rowKey),pipeline.setStateAtKey("singleSelect",rowKey)}),{className:className,style:style,onClick:onClick}})),pipeline}}try{singleSelect.displayName="singleSelect",singleSelect.__docgenInfo={description:"",displayName:"singleSelect",props:{highlightRowWhenSelected:{defaultValue:null,description:"是否高亮被选中的行",name:"highlightRowWhenSelected",required:!1,type:{name:"boolean"}},defaultValue:{defaultValue:null,description:"非受控用法：默认选中的值",name:"defaultValue",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"受控用法：当前选中的值",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"受控用法：选中值改变回调",name:"onChange",required:!1,type:{name:"(next: string) => void"}},isDisabled:{defaultValue:null,description:"判断一行是否禁用",name:"isDisabled",required:!1,type:{name:"(row: any, rowIndex: number) => boolean"}},clickArea:{defaultValue:null,description:"点击事件的响应区域",name:"clickArea",required:!1,type:{name:"enum",value:[{value:'"cell"'},{value:'"row"'},{value:'"radio"'}]}},radioColumn:{defaultValue:null,description:"单选框所在列的 column 配置，可指定 width，lock 等属性",name:"radioColumn",required:!1,type:{name:"Partial<ArtColumnStaticPart>"}},radioPlacement:{defaultValue:null,description:"单选框所在列的位置",name:"radioPlacement",required:!1,type:{name:"enum",value:[{value:'"end"'},{value:'"start"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/singleSelect.tsx#singleSelect"]={docgenInfo:singleSelect.__docgenInfo,name:"singleSelect",path:"../ali-react-table/src/pipeline/features/singleSelect.tsx#singleSelect"})}catch(__react_docgen_typescript_loader_error){}var sort=__webpack_require__(1360);function sort_sort(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function sortStep(pipeline){var _ref,_ref2,_opts$sorts;return pipeline.useTransform(Object(sort.a)(Object.assign({},opts,{sorts:null!==(_ref=null!==(_ref2=null!==(_opts$sorts=opts.sorts)&&void 0!==_opts$sorts?_opts$sorts:pipeline.state.sort)&&void 0!==_ref2?_ref2:opts.defaultSorts)&&void 0!==_ref?_ref:[],keepDataSource:opts.keepDataSource,onChangeSorts:function onChangeSorts(nextSorts){var _opts$onChangeSorts;null===(_opts$onChangeSorts=opts.onChangeSorts)||void 0===_opts$onChangeSorts||_opts$onChangeSorts.call(opts,nextSorts),pipeline.setStateAtKey("sort",nextSorts)}})))}}try{sort_sort.displayName="sort",sort_sort.__docgenInfo={description:"",displayName:"sort",props:{defaultSorts:{defaultValue:null,description:"",name:"defaultSorts",required:!1,type:{name:"SortItem[]"}},sorts:{defaultValue:null,description:"排序字段列表",name:"sorts",required:!1,type:{name:"SortItem[]"}},onChangeSorts:{defaultValue:null,description:"更新排序字段列表的回调函数",name:"onChangeSorts",required:!1,type:{name:"(nextSorts: SortItem[]) => void"}},orders:{defaultValue:null,description:"排序切换顺序",name:"orders",required:!1,type:{name:"SortOrder[]"}},mode:{defaultValue:null,description:"排序模式。单选 single，多选 multiple，默认为多选",name:"mode",required:!1,type:{name:"enum",value:[{value:'"multiple"'},{value:'"single"'}]}},SortHeaderCell:{defaultValue:null,description:"自定义排序表头",name:"SortHeaderCell",required:!1,type:{name:"ComponentType<SortHeaderCellProps>"}},keepDataSource:{defaultValue:null,description:"是否保持 dataSource 不变",name:"keepDataSource",required:!1,type:{name:"boolean"}},highlightColumnWhenActive:{defaultValue:null,description:"排序激活时 是否高亮这一列的单元格",name:"highlightColumnWhenActive",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/sort.tsx#sort"]={docgenInfo:sort_sort.__docgenInfo,name:"sort",path:"../ali-react-table/src/pipeline/features/sort.tsx#sort"})}catch(__react_docgen_typescript_loader_error){}var treeMode=__webpack_require__(1337);function treeMode_treeMode(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function treeModeStep(pipeline){var _opts$iconIndent,_opts$iconGap,_opts$indentSize,_ref,_ref2,_opts$openKeys,ctx=pipeline.ctx,indents={iconIndent:null!==(_opts$iconIndent=opts.iconIndent)&&void 0!==_opts$iconIndent?_opts$iconIndent:ctx.indents.iconIndent,iconGap:null!==(_opts$iconGap=opts.iconGap)&&void 0!==_opts$iconGap?_opts$iconGap:ctx.indents.iconGap,indentSize:null!==(_opts$indentSize=opts.indentSize)&&void 0!==_opts$indentSize?_opts$indentSize:ctx.indents.indentSize},primaryKey=pipeline.ensurePrimaryKey("treeMode");if("string"!=typeof primaryKey)throw new Error("treeMode 仅支持字符串作为 primaryKey");return pipeline.useTransform(Object(treeMode.a)(Object.assign({},indents,{isLeafNode:opts.isLeafNode,primaryKey:primaryKey,openKeys:null!==(_ref=null!==(_ref2=null!==(_opts$openKeys=opts.openKeys)&&void 0!==_opts$openKeys?_opts$openKeys:pipeline.state.treeMode)&&void 0!==_ref2?_ref2:opts.defaultOpenKeys)&&void 0!==_ref?_ref:[],onChangeOpenKeys:function onChangeOpenKeys(nextKeys,key,action){var _opts$onChangeOpenKey;null===(_opts$onChangeOpenKey=opts.onChangeOpenKeys)||void 0===_opts$onChangeOpenKey||_opts$onChangeOpenKey.call(opts,nextKeys,key,action),pipeline.setStateAtKey("treeMode",nextKeys,{key:key,action:action})}})))}}try{treeMode_treeMode.displayName="treeMode",treeMode_treeMode.__docgenInfo={description:"",displayName:"treeMode",props:{defaultOpenKeys:{defaultValue:null,description:"非受控用法：默认展开的 keys",name:"defaultOpenKeys",required:!1,type:{name:"string[]"}},openKeys:{defaultValue:null,description:"受控用法：当前展开的 keys",name:"openKeys",required:!1,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"受控用法：展开 keys 改变的回调",name:"onChangeOpenKeys",required:!1,type:{name:'(nextKeys: string[], key: string, action: "expand" | "collapse") => void'}},isLeafNode:{defaultValue:null,description:"自定义叶子节点的判定逻辑",name:"isLeafNode",required:!1,type:{name:"(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string; }) => boolean"}},iconIndent:{defaultValue:null,description:"icon 的缩进值。一般为负数，此时 icon 将向左偏移，默认从 pipeline.ctx.indents 中获取",name:"iconIndent",required:!1,type:{name:"number"}},iconGap:{defaultValue:null,description:"icon 与右侧文本的距离，默认从 pipeline.ctx.indents 中获取",name:"iconGap",required:!1,type:{name:"number"}},indentSize:{defaultValue:null,description:"每一级缩进产生的距离，默认从 pipeline.ctx.indents 中获取",name:"indentSize",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/treeMode.tsx#treeMode"]={docgenInfo:treeMode_treeMode.__docgenInfo,name:"treeMode",path:"../ali-react-table/src/pipeline/features/treeMode.tsx#treeMode"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(114),__webpack_require__(143),__webpack_require__(115);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function makeTreeDataHelper_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return makeTreeDataHelper_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return makeTreeDataHelper_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function makeTreeDataHelper_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _calculateWrapperTree(tree,getNodeValue,value){var valueSet=new Set(value),rootWrapper={root:!0,children:[],parent:null,node:null},wrapperMap=new Map;return function dfs(parentWrapper,nodes,anyAncestorsChecked){var _step,_iterator=_createForOfIteratorHelper(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _node=_step.value,exactChecked=valueSet.has(getNodeValue(_node));exactChecked&&(parentWrapper.anyDescendentsChecked=!0);var checked=anyAncestorsChecked||exactChecked,wrapper={parent:parentWrapper,node:_node,checked:checked,exactChecked:exactChecked,anyAncestorsChecked:anyAncestorsChecked,anyDescendentsChecked:checked,allDescendentsChecked:!0};if(wrapperMap.set(getNodeValue(_node),wrapper),parentWrapper.children.push(wrapper),!Object(isLeafNode.a)(_node)&&(wrapper.children=[],dfs(wrapper,_node.children,checked),wrapper.anyDescendentsChecked&&(parentWrapper.anyDescendentsChecked=!0),wrapper.allDescendentsChecked)){wrapper.checked=!0;var _step2,_iterator2=_createForOfIteratorHelper(wrapper.children);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2.value.anyAncestorsChecked=!0}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}wrapper.checked||(parentWrapper.allDescendentsChecked=!1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}(rootWrapper,tree,!1),{rootWrapper:rootWrapper,wrapperMap:wrapperMap}}function _getCleanValue(tree,getNodeValue,dirtyValue,checkedStrategy){var rootWrapper=_calculateWrapperTree(tree,getNodeValue,dirtyValue).rootWrapper,result=[];return function dfs(wrappers){var _step3,_iterator3=_createForOfIteratorHelper(wrappers);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var wrapper=_step3.value;"all"===checkedStrategy?wrapper.checked&&result.push(getNodeValue(wrapper.node)):"parent"===checkedStrategy?wrapper.checked&&!wrapper.anyAncestorsChecked&&result.push(getNodeValue(wrapper.node)):wrapper.checked&&Object(isLeafNode.a)(wrapper)&&result.push(getNodeValue(wrapper.node)),wrapper.anyDescendentsChecked&&!Object(isLeafNode.a)(wrapper)&&dfs(wrapper.children)}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}(rootWrapper.children),result}function stabilizeArray(prevArray,nextArray){var prevSet=new Set(prevArray),nextSet=new Set(nextArray),existing=prevArray.filter((function(v){return nextSet.has(v)})),adding=nextArray.filter((function(v){return!prevSet.has(v)}));return existing.concat(adding)}function makeTreeDataHelper(_ref){var tree=_ref.tree,value=_ref.value,getNodeValue=_ref.getNodeValue,_ref$checkedStrategy=_ref.checkedStrategy,checkedStrategy=void 0===_ref$checkedStrategy?"parent":_ref$checkedStrategy,_ref$checkStrictly=_ref.checkStrictly,checkStrictly=void 0!==_ref$checkStrictly&&_ref$checkStrictly,_calculateWrapperTree3=_calculateWrapperTree(tree,getNodeValue,value),wrapperMap=_calculateWrapperTree3.wrapperMap,rootWrapper=_calculateWrapperTree3.rootWrapper;function isChecked(nodeValue){var wrapper=wrapperMap.get(nodeValue);return checkStrictly?wrapper.exactChecked:wrapper.checked}function getValueAfterToggle(nodeValue){var node=wrapperMap.get(nodeValue).node;if(checkStrictly)return isChecked(nodeValue)?value.filter((function(v){return v!==nodeValue})):value.concat([nodeValue]);var nextValue=value,wrapper=wrapperMap.get(getNodeValue(node));if(wrapper.checked){for(var current=wrapper;current.anyAncestorsChecked;){var siblings=current.parent.children.filter((function(sibling){return sibling!==wrapper&&!sibling.exactChecked}));nextValue=nextValue.concat(siblings.map((function(wrapper){return getNodeValue(wrapper.node)}))),current=current.parent}var removeSet=function _collectValueWhenUncheck(startWrapper){var set=new Set,wrapper=startWrapper;for(;wrapper.anyAncestorsChecked;)wrapper=wrapper.parent,set.add(getNodeValue(wrapper.node));return function dfs(wrapper){wrapper.checked&&set.add(getNodeValue(wrapper.node));!Object(isLeafNode.a)(wrapper)&&wrapper.anyDescendentsChecked&&wrapper.children.forEach(dfs)}(startWrapper),set}(wrapper);nextValue=nextValue.filter((function(v){return!removeSet.has(v)}))}else nextValue=nextValue.concat([getNodeValue(node)]);var cleanValue=_getCleanValue(tree,getNodeValue,nextValue,checkedStrategy);return stabilizeArray(value,cleanValue)}return{isIndeterminate:function isIndeterminate(nodeValue){if(checkStrictly)return!1;var wrapper=wrapperMap.get(nodeValue);return!wrapper.checked&&wrapper.anyDescendentsChecked},isChecked:isChecked,getValueAfterCheck:function getValueAfterCheck(nodeValue){return isChecked(nodeValue)?value:getValueAfterToggle(nodeValue)},getValueAfterUncheck:function getValueAfterUncheck(nodeValue){return isChecked(nodeValue)?getValueAfterToggle(nodeValue):value},getValueAfterToggle:getValueAfterToggle,getValueAfterCheckAll:function getValueAfterCheckAll(){if(checkStrictly)return function collectAllValue(wrappers){var result=[];return function dfs(wrappers){var _step4,_iterator4=_createForOfIteratorHelper(wrappers);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var wrapper=_step4.value;result.push(getNodeValue(wrapper.node)),Object(isLeafNode.a)(wrapper)||dfs(wrapper.children)}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}(wrappers),result}(rootWrapper.children);var nextValue=rootWrapper.children.map((function(wrapper){return getNodeValue(wrapper.node)}));return _getCleanValue(tree,getNodeValue,nextValue,checkedStrategy)},getValueAfterUncheckAll:function getValueAfterUncheckAll(){return[]},getWrapper:function getWrapper(nodeValue){return wrapperMap.get(nodeValue)},getNode:function getNode(nodeValue){var _wrapperMap$get;return null===(_wrapperMap$get=wrapperMap.get(nodeValue))||void 0===_wrapperMap$get?void 0:_wrapperMap$get.node},getCleanValue:function getCleanValue(){return stabilizeArray(value,_getCleanValue(tree,getNodeValue,value,checkedStrategy))}}}try{makeTreeDataHelper.displayName="makeTreeDataHelper",makeTreeDataHelper.__docgenInfo={description:"树状数据工具包",displayName:"makeTreeDataHelper",props:{tree:{defaultValue:null,description:"",name:"tree",required:!0,type:{name:"N[]"}},getNodeValue:{defaultValue:null,description:"",name:"getNodeValue",required:!0,type:{name:"(node: N) => string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string[]"}},checkedStrategy:{defaultValue:{value:"parent"},description:"",name:"checkedStrategy",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"parent"'},{value:'"child"'}]}},checkStrictly:{defaultValue:{value:!1},description:"",name:"checkStrictly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/utils/makeTreeDataHelper.tsx#makeTreeDataHelper"]={docgenInfo:makeTreeDataHelper.__docgenInfo,name:"makeTreeDataHelper",path:"../ali-react-table/src/utils/makeTreeDataHelper.tsx#makeTreeDataHelper"})}catch(__react_docgen_typescript_loader_error){}function treeSelect_toConsumableArray(arr){return function treeSelect_arrayWithoutHoles(arr){if(Array.isArray(arr))return treeSelect_arrayLikeToArray(arr)}(arr)||function treeSelect_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function treeSelect_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return treeSelect_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return treeSelect_arrayLikeToArray(o,minLen)}(arr)||function treeSelect_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function treeSelect_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function treeSelect_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function treeSelect(opts){return function treeSelectStep(pipeline){var _ref,_ref2,_opts$value,_ref3,Checkbox=pipeline.ctx.components.Checkbox;if(null==Checkbox)throw new Error("使用 treeSelect 之前需要通过 pipeline context 设置 components.Checkbox");var primaryKey=pipeline.ensurePrimaryKey("treeSelect");if("string"!=typeof primaryKey)throw new Error("treeSelect 仅支持字符串作为 primaryKey");var value=null!==(_ref=null!==(_ref2=null!==(_opts$value=opts.value)&&void 0!==_opts$value?_opts$value:pipeline.state.treeSelect)&&void 0!==_ref2?_ref2:opts.defaultValue)&&void 0!==_ref?_ref:[],treeDataHelper=makeTreeDataHelper({tree:null!=opts.rootKey?[(_ref3={},treeSelect_defineProperty(_ref3,primaryKey,opts.rootKey),treeSelect_defineProperty(_ref3,"children",opts.tree),_ref3)]:opts.tree,getNodeValue:function getNodeValue(node){return node[primaryKey]},value:value,checkedStrategy:opts.checkedStrategy,checkStrictly:opts.checkStrictly}),makeCheckbox=function makeCheckbox(key){return react_default.a.createElement(Checkbox,{checked:treeDataHelper.isChecked(key),indeterminate:treeDataHelper.isIndeterminate(key),onChange:function onChange(){var _opts$onChange,nextValue=treeDataHelper.getValueAfterToggle(key);pipeline.setStateAtKey("treeSelect",nextValue),null===(_opts$onChange=opts.onChange)||void 0===_opts$onChange||_opts$onChange.call(opts,nextValue)}})},columns=pipeline.getColumns();return pipeline.columns([Object.assign({name:"",width:50,align:"center"},opts.checkboxColumn,{title:null!=opts.rootKey?makeCheckbox(opts.rootKey):void 0,render:function render(value,record){return makeCheckbox(record[primaryKey])}})].concat(treeSelect_toConsumableArray(columns))),opts.highlightRowWhenSelected&&pipeline.appendRowPropsGetter((function(row){if(treeDataHelper.isChecked(row[primaryKey]))return{className:"highlight"}})),pipeline}}try{treeSelect.displayName="treeSelect",treeSelect.__docgenInfo={description:"",displayName:"treeSelect",props:{tree:{defaultValue:null,description:"",name:"tree",required:!0,type:{name:"any[]"}},rootKey:{defaultValue:null,description:"",name:"rootKey",required:!1,type:{name:"string"}},checkedStrategy:{defaultValue:null,description:"",name:"checkedStrategy",required:!1,type:{name:"enum",value:[{value:'"all"'},{value:'"parent"'},{value:'"child"'}]}},checkStrictly:{defaultValue:null,description:"",name:"checkStrictly",required:!1,type:{name:"boolean"}},checkboxColumn:{defaultValue:null,description:"",name:"checkboxColumn",required:!1,type:{name:"Partial<ArtColumn>"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string[]"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(nextValue: string[]) => void"}},highlightRowWhenSelected:{defaultValue:null,description:"",name:"highlightRowWhenSelected",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pipeline/features/treeSelect.tsx#treeSelect"]={docgenInfo:treeSelect.__docgenInfo,name:"treeSelect",path:"../ali-react-table/src/pipeline/features/treeSelect.tsx#treeSelect"})}catch(__react_docgen_typescript_loader_error){}var styled_components_browser_esm=__webpack_require__(71),biz_assets=__webpack_require__(76),cdn_data=__webpack_require__(118),format=__webpack_require__(29),RadioButtonGroup=__webpack_require__(259),themed_table=__webpack_require__(52);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function pipeline_stories_toConsumableArray(arr){return function pipeline_stories_arrayWithoutHoles(arr){if(Array.isArray(arr))return pipeline_stories_arrayLikeToArray(arr)}(arr)||pipeline_stories_iterableToArray(arr)||pipeline_stories_unsupportedIterableToArray(arr)||function pipeline_stories_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pipeline_stories_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function pipeline_stories_slicedToArray(arr,i){return pipeline_stories_arrayWithHoles(arr)||function pipeline_stories_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||pipeline_stories_unsupportedIterableToArray(arr,i)||pipeline_stories_nonIterableRest()}function pipeline_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pipeline_stories_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return pipeline_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pipeline_stories_arrayLikeToArray(o,minLen):void 0}}function pipeline_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function pipeline_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}__webpack_exports__.default={parameters:{storySource:{source:"import { Button } from '@alifd/next'\nimport { ArtColumn, collectNodes, features, isLeafNode } from 'ali-react-table'\nimport React, { useEffect, useState } from 'react'\nimport styled from 'styled-components'\nimport {\n  columns1,\n  columns3,\n  columns4,\n  columns5,\n  columns6,\n  dataSource1,\n  dataSource3,\n  dataSource4,\n  dataSource5,\n  dataSource6,\n  operationCol,\n  randomPick,\n} from 'assets/src/biz-assets'\nimport { getAppTrafficData } from 'assets/src/cdn-data'\nimport { ratio } from 'assets/src/format'\nimport { RadioButtonGroup } from 'assets/src/RadioButtonGroup'\nimport { ThemedBaseTable, useThemedTablePipeline } from './themed-table'\n\nexport default { title: 'pipeline 功能拓展' }\n\nexport function 树形表格() {\n  const [openKeys, onChangeOpenKeys] = useState(['4', '4-2'])\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource4, columns: columns4 })\n    .primaryKey('id')\n    .use(features.treeMode({ openKeys, onChangeOpenKeys }))\n\n  const allParentKeys = collectNodes(dataSource4, 'pre')\n    .filter((row) => !isLeafNode(row))\n    .map((row) => row.id)\n\n  return (\n    <div>\n      <Button.Group>\n        <Button onClick={() => onChangeOpenKeys(allParentKeys)}>展开全部</Button>\n        <Button onClick={() => onChangeOpenKeys([])}>收拢全部</Button>\n      </Button.Group>\n      <p>\n        openKeys: {openKeys.join(', ')} {openKeys.length === 0 && '[空]'}\n      </p>\n      <ThemedBaseTable {...pipeline.getProps()} />\n    </div>\n  )\n}\n\nexport function 行多选() {\n  const [value, onChange] = useState(['1', '3'])\n\n  // 实际使用时注意设置 ctx.components, 例如...\n  //   import * as fusion from '@alifd/next'\n  //   useTablePipeline({ components: fusion })\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource4, columns: columns4 })\n    .primaryKey('id')\n    .mapDataSource((dataSource) => collectNodes(dataSource, 'pre'))\n    .snapshot('flat')\n    .use(\n      features.multiSelect({\n        value,\n        onChange,\n        highlightRowWhenSelected: true,\n        isDisabled(row: any) {\n          return row.id.startsWith('4-')\n        },\n        checkboxPlacement: 'start',\n        checkboxColumn: { lock: true },\n        clickArea: 'row',\n      }),\n    )\n    .mapColumns(([a, ...b]) => [a, { name: 'id', code: 'id', width: 80 }, ...b])\n\n  return (\n    <div>\n      <p>注意：行单选依赖于 pipeline.ctx.components.Checkbox 组件，需要配合组件库使用。</p>\n      <Button.Group>\n        <Button onClick={() => onChange([])}>清空选中状态</Button>\n        <Button\n          onClick={() => {\n            const flatData = pipeline.getDataSource('flat')\n            const primaryKey = pipeline.ctx.primaryKey as string\n            const allKeys = flatData.map((row) => row[primaryKey])\n            onChange(allKeys.filter((key) => !value.includes(key)))\n          }}\n        >\n          反转选中状态\n        </Button>\n        <Button\n          onClick={() => {\n            const flatData = pipeline.getDataSource('flat')\n            const primaryKey = pipeline.ctx.primaryKey as string\n            const allKeys = flatData.map((row) => row[primaryKey])\n            onChange(allKeys.filter(() => Math.random() < 0.25))\n          }}\n        >\n          随机设置\n        </Button>\n      </Button.Group>\n      <ThemedBaseTable style={{ marginTop: 16 }} {...pipeline.getProps()} />\n    </div>\n  )\n}\n\nexport function 行单选() {\n  const [value, onChange] = useState('1')\n  const [clickArea, setClickArea] = useState<features.SingleSelectFeatureOptions['clickArea']>('radio')\n  const [radioPlacement, setRadioPlacement] = useState<features.SingleSelectFeatureOptions['radioPlacement']>('start')\n  const [highlightRowWhenSelected, setHighlightRowWhenSelected] = useState(true)\n\n  // 实际使用时注意设置 ctx.components, 例如...\n  //   import * as fusion from '@alifd/next'\n  //   useTablePipeline({ components: fusion })\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource1, columns: columns1 })\n    .primaryKey('id')\n    .use(features.singleSelect({ value, onChange, highlightRowWhenSelected, radioPlacement, clickArea }))\n\n  return (\n    <div>\n      <p>注意：行单选依赖于 pipeline.ctx.components.Radio 组件，需要配合组件库使用。</p>\n      <div>\n        <span>复选框摆放位置(checkboxPlacement): </span>\n        <RadioButtonGroup\n          dataSource={[\n            { value: 'start', label: '左侧' },\n            { value: 'end', label: '右侧' },\n          ]}\n          value={radioPlacement}\n          onChange={setRadioPlacement as any}\n        />\n      </div>\n\n      <div style={{ marginTop: 8 }}>\n        <span>是否高亮选中行(highlightRowWhenSelected): </span>\n        <RadioButtonGroup\n          dataSource={[\n            { value: 'true', label: '开启' },\n            { value: 'false', label: '关闭' },\n          ]}\n          value={String(highlightRowWhenSelected)}\n          onChange={(v) => setHighlightRowWhenSelected(v === 'true')}\n        />\n      </div>\n\n      <div style={{ marginTop: 8 }}>\n        <span>点击触发范围(clickArea): </span>\n        <RadioButtonGroup\n          dataSource={[\n            { value: 'checkbox', label: '控件' },\n            { value: 'cell', label: '单元格' },\n            { value: 'row', label: '整行' },\n          ]}\n          value={clickArea}\n          onChange={setClickArea as any}\n        />\n      </div>\n\n      <div style={{ margin: '12px 0' }}>\n        <Button.Group>\n          <Button onClick={() => onChange(randomPick(dataSource1.map((row) => row.id)))}>随机选择</Button>\n          <Button onClick={() => onChange('')}>取消选中</Button>\n        </Button.Group>\n        <p>当前选中的 key： {value || '[空]'}</p>\n      </div>\n\n      <ThemedBaseTable {...pipeline.getProps()} />\n    </div>\n  )\n}\n\nexport function 行展开() {\n  const pipeline = useThemedTablePipeline()\n    .input({\n      // dataSource 结构：\n      //  [ { id: '1', title: '阿里巴巴网络技术有限公司', children: [...] },\n      //    { id: '2', title: '蚂蚁金服有限公司', children: [...] },\n      //    { id: '3', title: '其他', children: [...] }, ]\n      dataSource: dataSource5,\n      columns: columns5,\n    })\n    .primaryKey('id')\n    // 受控用法：rowGrouping({ openKeys, onChangeOpenKeys })\n    .use(features.rowGrouping({ defaultOpenKeys: ['1', '2'] }))\n\n  return <ThemedBaseTable {...pipeline.getProps()} />\n}\n\nexport function 表格排序() {\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource3, columns: columns3 })\n    .use(\n      features.sort({\n        mode: 'single',\n        defaultSorts: [{ code: 'applier', order: 'asc' }],\n        highlightColumnWhenActive: true,\n      }),\n    )\n\n  return <ThemedBaseTable {...pipeline.getProps()} />\n}\n\nexport function 多列排序() {\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource3, columns: columns3 })\n    .use(\n      features.sort({\n        mode: 'multiple',\n        defaultSorts: [{ code: 'applier', order: 'asc' }],\n        highlightColumnWhenActive: true,\n      }),\n    )\n\n  return <ThemedBaseTable {...pipeline.getProps()} />\n}\n\nexport function 树状模式与层级排序() {\n  const columns: ArtColumn[] = [\n    { code: 'name', name: '数据维度', lock: true, width: 200 },\n    { code: 'shop_name', name: '门店', features: { sortable: true } },\n    { code: 'imp_uv_dau_pct', name: '曝光UV占DAU比例', render: ratio, align: 'right', features: { sortable: true } },\n    { code: 'app_qty_pbt', name: 'APP件单价', align: 'right', features: { sortable: true } },\n    { code: 'all_app_trd_amt_1d', name: 'APP成交金额汇总', align: 'right', features: { sortable: true } },\n  ]\n\n  const [state, setState] = useState({ isLoading: true, data: [] as any[] })\n\n  useEffect(() => {\n    getAppTrafficData().then((data) => {\n      setState({ isLoading: false, data })\n    })\n  }, [])\n\n  const pipeline = useThemedTablePipeline()\n    .input({ columns, dataSource: state.data })\n    .primaryKey('id')\n    .use(features.buildTree('id', 'parent_id'))\n    .use(features.sort({ mode: 'single', highlightColumnWhenActive: true }))\n    .use(features.treeMode({ defaultOpenKeys: ['B2C'] }))\n\n  return <ThemedBaseTable isLoading={state.isLoading} {...pipeline.getProps()} />\n}\n\nexport function 表头分组与列高亮() {\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource6, columns: columns6 })\n    .use(features.columnRangeHover())\n\n  return <ThemedBaseTable className=\"bordered\" {...pipeline.getProps()} />\n}\n\nexport function 多选与提示信息() {\n  const columns = [\n    { code: 'title', name: '标题', width: 200, features: { tips: '我是指标的详细信息~~' } },\n    { code: 'dept', name: '部门名称', width: 180, features: { autoRowSpan: true } },\n    { code: 'dest', name: '团建目的地', width: 160, features: { autoRowSpan: true } },\n    { code: 'guide', name: '当地导游', width: 160, features: { autoRowSpan: true } },\n    operationCol,\n  ]\n\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource4, columns })\n    .primaryKey('id')\n    .mapDataSource((dataSource) => collectNodes(dataSource, 'pre'))\n    .use(\n      features.multiSelect({\n        defaultValue: ['1', '3'],\n        highlightRowWhenSelected: true,\n        clickArea: 'cell',\n      }),\n    )\n    .use(features.tips())\n\n  return <ThemedBaseTable {...pipeline.getProps()} />\n}\n\nconst DetailDiv = styled.div`\n  display: flex;\n  min-width: 800px;\n\n  p:first-child {\n    margin-top: 0;\n  }\n  p {\n    margin: 0;\n    line-height: 20px;\n  }\n\n  .right {\n    margin-left: 48px;\n  }\n`\n\nexport function 行详情() {\n  const pipeline = useThemedTablePipeline()\n    .input({ dataSource: dataSource1, columns: columns1.slice(0, 4) })\n    .primaryKey('id')\n    .use(\n      features.rowDetail({\n        defaultOpenKeys: ['2'],\n        renderDetail(row: any) {\n          return (\n            <DetailDiv>\n              <div className=\"left\">\n                <p>最近工作：高级经理｜{row.dept}｜2009-07-01 至今</p>\n                <p>工作职责：巴拉巴拉小魔仙</p>\n                <p>联系方式：67676767｜1212121@163.con</p>\n              </div>\n              <div className=\"right\">\n                <p>教育经理：北京大学｜工商管理｜2007-09-01 至 2006-06-01</p>\n                <p>中央财经大学｜2004-09-01 至 2007-06-01</p>\n              </div>\n            </DetailDiv>\n          )\n        },\n      }),\n    )\n\n  return <ThemedBaseTable {...pipeline.getProps()} />\n}\n",locationsMap:{"树形表格":{startLoc:{col:7,line:26},endLoc:{col:1,line:49},startBody:{col:7,line:26},endBody:{col:1,line:49}},"行多选":{startLoc:{col:7,line:51},endLoc:{col:1,line:106},startBody:{col:7,line:51},endBody:{col:1,line:106}},"行单选":{startLoc:{col:7,line:108},endLoc:{col:1,line:173},startBody:{col:7,line:108},endBody:{col:1,line:173}},"行展开":{startLoc:{col:7,line:175},endLoc:{col:1,line:190},startBody:{col:7,line:175},endBody:{col:1,line:190}},"表格排序":{startLoc:{col:7,line:192},endLoc:{col:1,line:204},startBody:{col:7,line:192},endBody:{col:1,line:204}},"多列排序":{startLoc:{col:7,line:206},endLoc:{col:1,line:218},startBody:{col:7,line:206},endBody:{col:1,line:218}},"树状模式与层级排序":{startLoc:{col:7,line:220},endLoc:{col:1,line:245},startBody:{col:7,line:220},endBody:{col:1,line:245}},"表头分组与列高亮":{startLoc:{col:7,line:247},endLoc:{col:1,line:253},startBody:{col:7,line:247},endBody:{col:1,line:253}},"多选与提示信息":{startLoc:{col:7,line:255},endLoc:{col:1,line:278},startBody:{col:7,line:255},endBody:{col:1,line:278}},"行详情":{startLoc:{col:7,line:297},endLoc:{col:1,line:323},startBody:{col:7,line:297},endBody:{col:1,line:323}}}}},title:"pipeline 功能拓展"};var pipeline_stories_=function 树形表格(){var _useState2=pipeline_stories_slicedToArray(Object(react.useState)(["4","4-2"]),2),openKeys=_useState2[0],onChangeOpenKeys=_useState2[1],pipeline=Object(themed_table.b)().input({dataSource:biz_assets.j,columns:biz_assets.d}).primaryKey("id").use(features_namespaceObject.treeMode({openKeys:openKeys,onChangeOpenKeys:onChangeOpenKeys})),allParentKeys=Object(collectNodes.a)(biz_assets.j,"pre").filter((function(row){return!Object(isLeafNode.a)(row)})).map((function(row){return row.id}));return react_default.a.createElement("div",null,react_default.a.createElement(es_button.a.Group,null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeOpenKeys(allParentKeys)}},"展开全部"),react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeOpenKeys([])}},"收拢全部")),react_default.a.createElement("p",null,"openKeys: ",openKeys.join(", ")," ",0===openKeys.length&&"[空]"),react_default.a.createElement(themed_table.a,pipeline.getProps()))};pipeline_stories_.displayName="树形表格";var stories_pipeline_stories_=function 行多选(){var _useState4=pipeline_stories_slicedToArray(Object(react.useState)(["1","3"]),2),value=_useState4[0],onChange=_useState4[1],pipeline=Object(themed_table.b)().input({dataSource:biz_assets.j,columns:biz_assets.d}).primaryKey("id").mapDataSource((function(dataSource){return Object(collectNodes.a)(dataSource,"pre")})).snapshot("flat").use(features_namespaceObject.multiSelect({value:value,onChange:onChange,highlightRowWhenSelected:!0,isDisabled:function isDisabled(row){return row.id.startsWith("4-")},checkboxPlacement:"start",checkboxColumn:{lock:!0},clickArea:"row"})).mapColumns((function(_ref){var _ref2=function pipeline_stories_toArray(arr){return pipeline_stories_arrayWithHoles(arr)||pipeline_stories_iterableToArray(arr)||pipeline_stories_unsupportedIterableToArray(arr)||pipeline_stories_nonIterableRest()}(_ref),a=_ref2[0],b=_ref2.slice(1);return[a,{name:"id",code:"id",width:80}].concat(pipeline_stories_toConsumableArray(b))}));return react_default.a.createElement("div",null,react_default.a.createElement("p",null,"注意：行单选依赖于 pipeline.ctx.components.Checkbox 组件，需要配合组件库使用。"),react_default.a.createElement(es_button.a.Group,null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChange([])}},"清空选中状态"),react_default.a.createElement(es_button.a,{onClick:function onClick(){var flatData=pipeline.getDataSource("flat"),primaryKey=pipeline.ctx.primaryKey,allKeys=flatData.map((function(row){return row[primaryKey]}));onChange(allKeys.filter((function(key){return!value.includes(key)})))}},"反转选中状态"),react_default.a.createElement(es_button.a,{onClick:function onClick(){var flatData=pipeline.getDataSource("flat"),primaryKey=pipeline.ctx.primaryKey,allKeys=flatData.map((function(row){return row[primaryKey]}));onChange(allKeys.filter((function(){return Math.random()<.25})))}},"随机设置")),react_default.a.createElement(themed_table.a,_extends({style:{marginTop:16}},pipeline.getProps())))};stories_pipeline_stories_.displayName="行多选";var stories_pipeline_stories_0=function 行单选(){var _useState6=pipeline_stories_slicedToArray(Object(react.useState)("1"),2),value=_useState6[0],onChange=_useState6[1],_useState8=pipeline_stories_slicedToArray(Object(react.useState)("radio"),2),clickArea=_useState8[0],setClickArea=_useState8[1],_useState10=pipeline_stories_slicedToArray(Object(react.useState)("start"),2),radioPlacement=_useState10[0],setRadioPlacement=_useState10[1],_useState12=pipeline_stories_slicedToArray(Object(react.useState)(!0),2),highlightRowWhenSelected=_useState12[0],setHighlightRowWhenSelected=_useState12[1],pipeline=Object(themed_table.b)().input({dataSource:biz_assets.g,columns:biz_assets.a}).primaryKey("id").use(features_namespaceObject.singleSelect({value:value,onChange:onChange,highlightRowWhenSelected:highlightRowWhenSelected,radioPlacement:radioPlacement,clickArea:clickArea}));return react_default.a.createElement("div",null,react_default.a.createElement("p",null,"注意：行单选依赖于 pipeline.ctx.components.Radio 组件，需要配合组件库使用。"),react_default.a.createElement("div",null,react_default.a.createElement("span",null,"复选框摆放位置(checkboxPlacement): "),react_default.a.createElement(RadioButtonGroup.a,{dataSource:[{value:"start",label:"左侧"},{value:"end",label:"右侧"}],value:radioPlacement,onChange:setRadioPlacement})),react_default.a.createElement("div",{style:{marginTop:8}},react_default.a.createElement("span",null,"是否高亮选中行(highlightRowWhenSelected): "),react_default.a.createElement(RadioButtonGroup.a,{dataSource:[{value:"true",label:"开启"},{value:"false",label:"关闭"}],value:String(highlightRowWhenSelected),onChange:function onChange(v){return setHighlightRowWhenSelected("true"===v)}})),react_default.a.createElement("div",{style:{marginTop:8}},react_default.a.createElement("span",null,"点击触发范围(clickArea): "),react_default.a.createElement(RadioButtonGroup.a,{dataSource:[{value:"checkbox",label:"控件"},{value:"cell",label:"单元格"},{value:"row",label:"整行"}],value:clickArea,onChange:setClickArea})),react_default.a.createElement("div",{style:{margin:"12px 0"}},react_default.a.createElement(es_button.a.Group,null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChange(Object(biz_assets.n)(biz_assets.g.map((function(row){return row.id}))))}},"随机选择"),react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChange("")}},"取消选中")),react_default.a.createElement("p",null,"当前选中的 key： ",value||"[空]")),react_default.a.createElement(themed_table.a,pipeline.getProps()))};stories_pipeline_stories_0.displayName="行单选";var stories_pipeline_stories_1=function 行展开(){var pipeline=Object(themed_table.b)().input({dataSource:biz_assets.k,columns:biz_assets.e}).primaryKey("id").use(features_namespaceObject.rowGrouping({defaultOpenKeys:["1","2"]}));return react_default.a.createElement(themed_table.a,pipeline.getProps())};stories_pipeline_stories_1.displayName="行展开";var stories_pipeline_stories_2=function 表格排序(){var pipeline=Object(themed_table.b)().input({dataSource:biz_assets.i,columns:biz_assets.c}).use(features_namespaceObject.sort({mode:"single",defaultSorts:[{code:"applier",order:"asc"}],highlightColumnWhenActive:!0}));return react_default.a.createElement(themed_table.a,pipeline.getProps())};stories_pipeline_stories_2.displayName="表格排序";var stories_pipeline_stories_3=function 多列排序(){var pipeline=Object(themed_table.b)().input({dataSource:biz_assets.i,columns:biz_assets.c}).use(features_namespaceObject.sort({mode:"multiple",defaultSorts:[{code:"applier",order:"asc"}],highlightColumnWhenActive:!0}));return react_default.a.createElement(themed_table.a,pipeline.getProps())};stories_pipeline_stories_3.displayName="多列排序";var stories_pipeline_stories_4=function 树状模式与层级排序(){var columns=[{code:"name",name:"数据维度",lock:!0,width:200},{code:"shop_name",name:"门店",features:{sortable:!0}},{code:"imp_uv_dau_pct",name:"曝光UV占DAU比例",render:format.c,align:"right",features:{sortable:!0}},{code:"app_qty_pbt",name:"APP件单价",align:"right",features:{sortable:!0}},{code:"all_app_trd_amt_1d",name:"APP成交金额汇总",align:"right",features:{sortable:!0}}],_useState14=pipeline_stories_slicedToArray(Object(react.useState)({isLoading:!0,data:[]}),2),state=_useState14[0],setState=_useState14[1];Object(react.useEffect)((function(){Object(cdn_data.a)().then((function(data){setState({isLoading:!1,data:data})}))}),[]);var pipeline=Object(themed_table.b)().input({columns:columns,dataSource:state.data}).primaryKey("id").use(features_namespaceObject.buildTree("id","parent_id")).use(features_namespaceObject.sort({mode:"single",highlightColumnWhenActive:!0})).use(features_namespaceObject.treeMode({defaultOpenKeys:["B2C"]}));return react_default.a.createElement(themed_table.a,_extends({isLoading:state.isLoading},pipeline.getProps()))};stories_pipeline_stories_4.displayName="树状模式与层级排序";var stories_pipeline_stories_5=function 表头分组与列高亮(){var pipeline=Object(themed_table.b)().input({dataSource:biz_assets.l,columns:biz_assets.f}).use(features_namespaceObject.columnRangeHover());return react_default.a.createElement(themed_table.a,_extends({className:"bordered"},pipeline.getProps()))};stories_pipeline_stories_5.displayName="表头分组与列高亮";var stories_pipeline_stories_6=function 多选与提示信息(){var columns=[{code:"title",name:"标题",width:200,features:{tips:"我是指标的详细信息~~"}},{code:"dept",name:"部门名称",width:180,features:{autoRowSpan:!0}},{code:"dest",name:"团建目的地",width:160,features:{autoRowSpan:!0}},{code:"guide",name:"当地导游",width:160,features:{autoRowSpan:!0}},biz_assets.m],pipeline=Object(themed_table.b)().input({dataSource:biz_assets.j,columns:columns}).primaryKey("id").mapDataSource((function(dataSource){return Object(collectNodes.a)(dataSource,"pre")})).use(features_namespaceObject.multiSelect({defaultValue:["1","3"],highlightRowWhenSelected:!0,clickArea:"cell"})).use(features_namespaceObject.tips());return react_default.a.createElement(themed_table.a,pipeline.getProps())};stories_pipeline_stories_6.displayName="多选与提示信息";var DetailDiv=styled_components_browser_esm.b.div.withConfig({displayName:"pipelinestories__DetailDiv",componentId:"sc-1kksmk1-0"})(["display:flex;min-width:800px;p:first-child{margin-top:0;}p{margin:0;line-height:20px;}.right{margin-left:48px;}"]),stories_pipeline_stories_7=function 行详情(){var pipeline=Object(themed_table.b)().input({dataSource:biz_assets.g,columns:biz_assets.a.slice(0,4)}).primaryKey("id").use(features_namespaceObject.rowDetail({defaultOpenKeys:["2"],renderDetail:function renderDetail(row){return react_default.a.createElement(DetailDiv,null,react_default.a.createElement("div",{className:"left"},react_default.a.createElement("p",null,"最近工作：高级经理｜",row.dept,"｜2009-07-01 至今"),react_default.a.createElement("p",null,"工作职责：巴拉巴拉小魔仙"),react_default.a.createElement("p",null,"联系方式：67676767｜1212121@163.con")),react_default.a.createElement("div",{className:"right"},react_default.a.createElement("p",null,"教育经理：北京大学｜工商管理｜2007-09-01 至 2006-06-01"),react_default.a.createElement("p",null,"中央财经大学｜2004-09-01 至 2007-06-01")))}}));return react_default.a.createElement(themed_table.a,pipeline.getProps())};stories_pipeline_stories_7.displayName="行详情"},1332:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"基本示例",(function(){return drillable_tree_table_stories_}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(732),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55),__webpack_require__(128),__webpack_require__(65),__webpack_require__(288),__webpack_require__(93),__webpack_require__(237),__webpack_require__(105),__webpack_require__(289),__webpack_require__(290);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),noop=__webpack_require__(1345),table=__webpack_require__(229),constants=__webpack_require__(367),treeMode=(__webpack_require__(75),__webpack_require__(1337)),utils_isLeafNode=__webpack_require__(95);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function buildCrossTreeTable(options){var _options$leftTree,_options$topTree,primaryColumn=options.primaryColumn,openKeys=options.openKeys,onChangeOpenKeys=options.onChangeOpenKeys,indentSize=options.indentSize,_options$isLeafNode=options.isLeafNode,isLeafNodeOpt=void 0===_options$isLeafNode?utils_isLeafNode.a:_options$isLeafNode,leftTree=null!==(_options$leftTree=options.leftTree)&&void 0!==_options$leftTree?_options$leftTree:[],topTree=null!==(_options$topTree=options.topTree)&&void 0!==_options$topTree?_options$topTree:[];return Object(treeMode.a)({primaryKey:constants.a,openKeys:openKeys,onChangeOpenKeys:onChangeOpenKeys,indentSize:indentSize,isLeafNode:function isLeafNode(row,nodeMeta){return isLeafNodeOpt(row.node,nodeMeta)}})({columns:function getColumns(){return[Object.assign({},primaryColumn,{getValue:function getValue(row){return row.node.value},getCellProps:function getCellProps(value,row){if(primaryColumn.getCellProps)return primaryColumn.getCellProps(row.node,row.nodes.length-1)},render:function render(value,row){return primaryColumn.render?primaryColumn.render(row.node,row.nodes.length-1):value}})].concat(_toConsumableArray(function getDataPartColumns(){return function dfs(nodes,ctx){var _step,result=[],_iterator=_createForOfIteratorHelper(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _node=_step.value;if(Object(utils_isLeafNode.a)(_node))result.push(getDataColumn(_node,ctx.depth));else{_node.key;var value=_node.value,children=_node.children,others=_objectWithoutProperties(_node,["key","value","children"]);result.push(Object.assign({},others,{name:value,children:dfs(children,{depth:ctx.depth+1})}))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}(topTree,{depth:0})}()));function getDataColumn(topNode,topDepth){topNode.key;var value=topNode.value,others=(topNode.children,_objectWithoutProperties(topNode,["key","value","children"]));return Object.assign({},others,{getValue:function columnGetValue(row){var leftDepth=row.nodes.length-1,leftNode=row.node;return options.getValue(leftNode,topNode,leftDepth,topDepth)},name:value,children:null,render:function render(value,row){if(options.render){var leftDepth=row.nodes.length-1,leftNode=row.node;return options.render(value,leftNode,topNode,leftDepth,topDepth)}return value},getCellProps:function getCellProps(value,row){if(options.getCellProps){var leftDepth=row.nodes.length-1,leftNode=row.node;return options.getCellProps(value,leftNode,topNode,leftDepth,topDepth)}}})}}(),dataSource:function getDataSource(){return function dfs(nodes,ctx){var _step2,result=[],_iterator2=_createForOfIteratorHelper(nodes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _node2=_step2.value;if(!_node2.hidden)if(Object(utils_isLeafNode.a)(_node2)){var _result$push;result.push((_defineProperty(_result$push={},constants.a,_node2.key),_defineProperty(_result$push,"node",_node2),_defineProperty(_result$push,"nodes",[].concat(_toConsumableArray(ctx.nodes),[_node2])),_result$push))}else{var _result$push2,_nodes=[].concat(_toConsumableArray(ctx.nodes),[_node2]);ctx.nodes.push(_node2);var children=dfs(_node2.children,ctx);result.push((_defineProperty(_result$push2={},constants.a,_node2.key),_defineProperty(_result$push2,"node",_node2),_defineProperty(_result$push2,"nodes",_nodes),_defineProperty(_result$push2,"children",children),_result$push2)),ctx.nodes.pop()}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return result}(leftTree,{nodes:[]})}()})}try{buildCrossTreeTable.displayName="buildCrossTreeTable",buildCrossTreeTable.__docgenInfo={description:"",displayName:"buildCrossTreeTable",props:{leftTree:{defaultValue:null,description:"",name:"leftTree",required:!0,type:{name:"LeftCrossTreeNode[]"}},topTree:{defaultValue:null,description:"",name:"topTree",required:!0,type:{name:"TopCrossTreeNode[]"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => any"}},getCellProps:{defaultValue:null,description:"",name:"getCellProps",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => CellProps"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => ReactNode"}},primaryColumn:{defaultValue:null,description:"",name:"primaryColumn",required:!0,type:{name:"CrossTableLeftMetaColumn"}},openKeys:{defaultValue:null,description:"",name:"openKeys",required:!0,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"",name:"onChangeOpenKeys",required:!0,type:{name:"(nextOpenKeys: string[]) => void"}},indentSize:{defaultValue:null,description:"",name:"indentSize",required:!1,type:{name:"number"}},isLeafNode:{defaultValue:null,description:"",name:"isLeafNode",required:!1,type:{name:"(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string; }) => boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pivot/cross-tree-table/buildCrossTreeTable.tsx#buildCrossTreeTable"]={docgenInfo:buildCrossTreeTable.__docgenInfo,name:"buildCrossTreeTable",path:"../ali-react-table/src/pivot/cross-tree-table/buildCrossTreeTable.tsx#buildCrossTreeTable"})}catch(__react_docgen_typescript_loader_error){}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function cross_tree_table_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function cross_tree_table_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var cross_tree_table_CrossTreeTable=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CrossTreeTable,_React$Component);var _super=_createSuper(CrossTreeTable);function CrossTreeTable(props){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CrossTreeTable),(_this=_super.call(this,props)).onChangeOpenKeys=function(nextOpenKeys){_this.props.onChangeOpenKeys(nextOpenKeys),"openKeys"in _this.props||_this.setState({openKeys:nextOpenKeys})},_this.state={openKeys:props.defaultOpenKeys},_this}return _createClass(CrossTreeTable,null,[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){return"openKeys"in nextProps?{openKeys:nextProps.openKeys}:null}}]),_createClass(CrossTreeTable,[{key:"render",value:function render(){var _this$props=this.props,_this$props$BaseTable=_this$props.BaseTableComponent,BaseTableComponent=void 0===_this$props$BaseTable?table.a:_this$props$BaseTable,leftTree=_this$props.leftTree,topTree=_this$props.topTree,getValue=_this$props.getValue,getCellProps=_this$props.getCellProps,primaryColumn=_this$props.primaryColumn,render=_this$props.render,openKeysProp=_this$props.openKeys,indentSize=(_this$props.defaultOpenKeys,_this$props.onChangeOpenKeys,_this$props.indentSize),isLeafNode=_this$props.isLeafNode,baseTableRef=_this$props.baseTableRef,others=cross_tree_table_objectWithoutProperties(_this$props,["BaseTableComponent","leftTree","topTree","getValue","getCellProps","primaryColumn","render","openKeys","defaultOpenKeys","onChangeOpenKeys","indentSize","isLeafNode","baseTableRef"]),_buildCrossTreeTable=buildCrossTreeTable({leftTree:leftTree,topTree:topTree,getValue:getValue,getCellProps:getCellProps,render:render,primaryColumn:primaryColumn,openKeys:null!=openKeysProp?openKeysProp:this.state.openKeys,onChangeOpenKeys:this.onChangeOpenKeys,indentSize:indentSize,isLeafNode:isLeafNode}),dataSource=_buildCrossTreeTable.dataSource,columns=_buildCrossTreeTable.columns;return react_default.a.createElement(BaseTableComponent,_extends({ref:baseTableRef},others,{primaryKey:constants.a,dataSource:dataSource,columns:columns}))}}]),CrossTreeTable}(react_default.a.Component);cross_tree_table_CrossTreeTable.defaultProps={defaultOpenKeys:[],onChangeOpenKeys:noop.a};try{crosstreetable.displayName="crosstreetable",crosstreetable.__docgenInfo={description:"",displayName:"crosstreetable",props:{BaseTableComponent:{defaultValue:null,description:"",name:"BaseTableComponent",required:!1,type:{name:"any"}},baseTableRef:{defaultValue:null,description:"",name:"baseTableRef",required:!1,type:{name:"Ref<BaseTable>"}},primaryColumn:{defaultValue:null,description:"",name:"primaryColumn",required:!0,type:{name:"CrossTableLeftMetaColumn"}},leftTree:{defaultValue:null,description:"",name:"leftTree",required:!0,type:{name:"LeftCrossTreeNode[]"}},topTree:{defaultValue:null,description:"",name:"topTree",required:!0,type:{name:"TopCrossTreeNode[]"}},defaultOpenKeys:{defaultValue:{value:"[] as string[]"},description:"",name:"defaultOpenKeys",required:!1,type:{name:"string[]"}},openKeys:{defaultValue:null,description:"",name:"openKeys",required:!1,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"",name:"onChangeOpenKeys",required:!1,type:{name:"(nextOpenKeys: string[]) => void"}},indentSize:{defaultValue:null,description:"",name:"indentSize",required:!1,type:{name:"number"}},isLeafNode:{defaultValue:null,description:"",name:"isLeafNode",required:!1,type:{name:"(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string; }) => boolean"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => any"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => ReactNode"}},getCellProps:{defaultValue:null,description:"",name:"getCellProps",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => CellProps"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pivot/cross-tree-table/cross-tree-table.tsx#crosstreetable"]={docgenInfo:crosstreetable.__docgenInfo,name:"crosstreetable",path:"../ali-react-table/src/pivot/cross-tree-table/cross-tree-table.tsx#crosstreetable"})}catch(__react_docgen_typescript_loader_error){}var lodash=__webpack_require__(120),lodash_default=__webpack_require__.n(lodash),mobx_module=__webpack_require__(47),mobxreact_esm=__webpack_require__(780),cdn_data=__webpack_require__(118),format=__webpack_require__(29),overlay=(__webpack_require__(94),__webpack_require__(191),__webpack_require__(733),__webpack_require__(143),__webpack_require__(129),__webpack_require__(211),__webpack_require__(1325),__webpack_require__(73)),input=__webpack_require__(72),es_checkbox=__webpack_require__(109),es_button=__webpack_require__(50),dialog=__webpack_require__(734),bucket_7=__webpack_require__(1338),bucket_15=__webpack_require__(1346),bucket_6=__webpack_require__(1347),classnames=__webpack_require__(3),classnames_default=__webpack_require__.n(classnames),immer_esm=__webpack_require__(461),react_beautiful_dnd_esm=__webpack_require__(227),styled_components_browser_esm=__webpack_require__(71);function designers_extends(){return(designers_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function designers_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return designers_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return designers_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function designers_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PopupDiv=styled_components_browser_esm.b.div.withConfig({displayName:"designers__PopupDiv",componentId:"p9olae-0"})(["padding:12px;width:350px;min-height:200px;max-height:400px;overflow:hidden;background:white;border:1px solid #ccc;display:flex;flex-flow:column;"]),ValueList=styled_components_browser_esm.b.ol.withConfig({displayName:"designers__ValueList",componentId:"p9olae-1"})(["margin:8px 0;> li{height:24px;display:flex;align-items:center;}"]),CheckedDimListDiv=styled_components_browser_esm.b.div.withConfig({displayName:"designers__CheckedDimListDiv",componentId:"p9olae-2"})(["font-size:14px;.tag-list{display:flex;user-select:none;margin-left:-8px;}.tag{padding:4px 8px;border-radius:3px;background:#eee;margin-left:8px;display:flex;align-items:center;&.active{background:#5484ff;color:#fefeff;}&.empty{background:#eb4626;}.filter-icon{cursor:pointer;margin-left:4px;fill:currentColor;}}"]);function CheckedDimList(_ref){var style=_ref.style,className=_ref.className,pivot=_ref.pivot,dimMap=new Map(pivot.allDimensions.map((function(dim){return[dim.code,dim]})));return react_default.a.createElement(CheckedDimListDiv,{style:style,className:className},react_default.a.createElement(react_beautiful_dnd_esm.a,{onDragEnd:function onDragEnd(result){if(result.destination){var i=result.source.index,j=result.destination.index,nextCodes=pivot.dimCodes.slice(),code=_slicedToArray(nextCodes.splice(i,1),1)[0];nextCodes.splice(j,0,code),pivot.changeDimCodes(nextCodes)}}},react_default.a.createElement(react_beautiful_dnd_esm.c,{droppableId:"dimension-list",direction:"horizontal"},(function(dropProvided,snapshot){return react_default.a.createElement("div",{className:"tag-list",ref:dropProvided.innerRef},pivot.dimCodes.map((function(dimCode,index){var allValues=pivot.dimValues[dimCode],values=pivot.filters[dimCode];return react_default.a.createElement(react_beautiful_dnd_esm.b,{key:dimCode,draggableId:dimCode,index:index},(function(dragProvided,snapshot){return react_default.a.createElement(overlay.a.Popup,{key:dimCode,trigger:react_default.a.createElement("div",designers_extends({key:dimCode,ref:dragProvided.innerRef},dragProvided.draggableProps,dragProvided.dragHandleProps,{className:classnames_default()("tag",{active:values.length<allValues.length,empty:allValues.length>0&&0===values.length})}),dimMap.get(dimCode).name,react_default.a.createElement(bucket_7.a,{className:"filter-icon"})),triggerType:"click"},react_default.a.createElement(CheckedDimFilterPopup,{pivot:pivot,allValues:allValues,values:values,dimCode:dimCode}))}))})),dropProvided.placeholder)}))))}function CheckedDimFilterPopup(_ref2){var allValues=_ref2.allValues,values=_ref2.values,pivot=_ref2.pivot,dimCode=_ref2.dimCode,set=new Set(values),_useState2=_slicedToArray(Object(react.useState)(""),2),rawSearch=_useState2[0],setRawSearch=_useState2[1],search=rawSearch.trim(),filtered=allValues.map((function(value){if(""===search)return{value:value,title:value};var i=value.indexOf(search);return-1===i?null:{value:value,title:react_default.a.createElement("span",null,react_default.a.createElement("span",null,value.slice(0,i)),react_default.a.createElement("span",{style:{color:"blue"}},search),react_default.a.createElement("span",null,value.slice(i+search.length)))}})).filter(Boolean);return react_default.a.createElement(PopupDiv,null,react_default.a.createElement("div",null,react_default.a.createElement(input.a,{placeholder:"搜索",style:{width:"100%"},hasClear:!0,value:rawSearch,onChange:setRawSearch})),react_default.a.createElement("div",{style:{overflow:"auto"}},allValues.length>0&&0===filtered.length&&react_default.a.createElement("div",{style:{margin:16,textAlign:"center"}},"没有符合查询条件的数据"),react_default.a.createElement(ValueList,null,filtered.map((function(_ref3){var value=_ref3.value,title=_ref3.title;return react_default.a.createElement("li",{key:value},react_default.a.createElement(es_checkbox.a,{checked:set.has(value),onChange:function onChange(checked){return pivot.filter(dimCode,value,checked)}},title))})))),react_default.a.createElement("div",{style:{marginTop:"auto",textAlign:"center"}},react_default.a.createElement(es_button.a,{size:"small",onClick:function onClick(){pivot.batchFilter(dimCode,filtered.map((function(v){return v.value})),!0)}},search?"添加到选中":"全选"),react_default.a.createElement(es_button.a,{size:"small",style:{marginLeft:8},onClick:function onClick(){pivot.batchFilter(dimCode,filtered.map((function(v){return v.value})),!1)}},search?"从选中中移除":"全不选")))}CheckedDimList.displayName="CheckedDimList",CheckedDimFilterPopup.displayName="CheckedDimFilterPopup";var IndicatorChooseDiv=styled_components_browser_esm.b.div.withConfig({displayName:"designers__IndicatorChooseDiv",componentId:"p9olae-3"})(["--border-color:#edeff2;display:flex;border:1px solid var(--border-color);"]),IndicatorsPartDiv=styled_components_browser_esm.b.div.withConfig({displayName:"designers__IndicatorsPartDiv",componentId:"p9olae-4"})(["width:300px;.title{background:#eaedf2;color:#7f8a9c;padding-left:8px;height:32px;line-height:32px;}.ind-list{height:300px;overflow:auto;> li{height:28px;display:flex;align-items:center;}.ind-item{padding:0 8px;flex:1 0 auto;height:100%;display:flex;align-items:center;}.clickable-ind-item{cursor:pointer;}.draggable-ind-item{border-bottom:1px solid var(--border-color);background:white;transition:box-shadow 300ms;&.dragging{border:1px solid var(--border-color);box-shadow:#adadad54 0 0 5px 0.5px;}}}"]);function PrimaryColumnTitle(_ref4){var pivot=_ref4.pivot,_useState4=_slicedToArray(Object(react.useState)(!1),2),visible=_useState4[0],setVisible=_useState4[1],onClose=function onClose(){return setVisible(!1)},_useState6=_slicedToArray(Object(react.useState)((function(){return Object(mobx_module.q)(pivot)})),2),state=_useState6[0],setState=_useState6[1];Object(react.useEffect)((function(){visible&&setState(Object(mobx_module.q)(pivot))}),[visible]);var dimMap=new Map(pivot.allDimensions.map((function(dim){return[dim.code,dim]})));return Object(react.useEffect)((function(){}),[visible]),react_default.a.createElement("div",{style:{display:"flex",alignItems:"center"}},react_default.a.createElement("b",null,"数据维度"),react_default.a.createElement("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",cursor:"pointer",userSelect:"none"},onClick:function onClick(){return setVisible(!0)}},react_default.a.createElement(bucket_15.a,{style:{fill:"currentColor"}}),react_default.a.createElement("span",{style:{marginLeft:4}},"设置"),react_default.a.createElement(dialog.a,{closeable:!1,title:"数据维度配置",visible:visible,onOk:function onOk(){pivot.changeDimCodes(state.dimCodes,pivot.dimValues),onClose()},onCancel:onClose},react_default.a.createElement(IndicatorChooseDiv,null,react_default.a.createElement(IndicatorsPartDiv,null,react_default.a.createElement("div",{className:"title"},"选择维度（",state.dimCodes.length,"/",pivot.allDimensions.length,"）"),react_default.a.createElement("ul",{className:"ind-list"},pivot.allDimensions.map((function(dim){return react_default.a.createElement("li",{key:dim.code},react_default.a.createElement(es_checkbox.a,{className:"ind-item clickable-ind-item",checked:state.dimCodes.includes(dim.code),onChange:function onChange(checked){setState((function(prev){return Object(immer_esm.a)(prev,(function(draft){checked?draft.dimCodes.push(dim.code):draft.dimCodes.splice(draft.dimCodes.indexOf(dim.code),1)}))}))}},dim.name))})))),react_default.a.createElement(IndicatorsPartDiv,{style:{borderLeft:"1px solid var(--border-color)"}},react_default.a.createElement("div",{className:"title"},"已选（",state.dimCodes.length,"）"),react_default.a.createElement(react_beautiful_dnd_esm.a,{onDragEnd:function onDragEnd(result){null!=result.destination&&setState((function(prev){return Object(immer_esm.a)(prev,(function(draft){var i=result.source.index,j=result.destination.index,code=_slicedToArray(draft.dimCodes.splice(i,1),1)[0];draft.dimCodes.splice(j,0,code)}))}))}},react_default.a.createElement(react_beautiful_dnd_esm.c,{droppableId:"selected-dimensions",direction:"vertical"},(function(dropProvided,snapshot){return react_default.a.createElement("ul",{className:"ind-list",ref:dropProvided.innerRef},state.dimCodes.map((function(dimCode,index){return react_default.a.createElement(react_beautiful_dnd_esm.b,{key:dimCode,index:index,draggableId:dimCode},(function(dragProvided,snapshot){return react_default.a.createElement("li",designers_extends({ref:dragProvided.innerRef},dragProvided.draggableProps),react_default.a.createElement("div",{className:classnames_default()("ind-item draggable-ind-item",{dragging:snapshot.isDragging})},dimMap.get(dimCode).name,react_default.a.createElement("div",designers_extends({},dragProvided.dragHandleProps,{style:{marginLeft:"auto"}}),react_default.a.createElement(bucket_6.a,{style:{fill:"currentColor"}}))))}))})),dropProvided.placeholder)}))))))))}PrimaryColumnTitle.displayName="PrimaryColumnTitle";try{CheckedDimList.displayName="CheckedDimList",CheckedDimList.__docgenInfo={description:"",displayName:"CheckedDimList",props:{pivot:{defaultValue:null,description:"",name:"pivot",required:!0,type:{name:"Pivot"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/others/drill-tree-table/designers.tsx#CheckedDimList"]={docgenInfo:CheckedDimList.__docgenInfo,name:"CheckedDimList",path:"stories/others/drill-tree-table/designers.tsx#CheckedDimList"})}catch(__react_docgen_typescript_loader_error){}try{PrimaryColumnTitle.displayName="PrimaryColumnTitle",PrimaryColumnTitle.__docgenInfo={description:"",displayName:"PrimaryColumnTitle",props:{pivot:{defaultValue:null,description:"",name:"pivot",required:!0,type:{name:"Pivot"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/others/drill-tree-table/designers.tsx#PrimaryColumnTitle"]={docgenInfo:PrimaryColumnTitle.__docgenInfo,name:"PrimaryColumnTitle",path:"stories/others/drill-tree-table/designers.tsx#PrimaryColumnTitle"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(190),__webpack_require__(114),__webpack_require__(246),__webpack_require__(573),__webpack_require__(571),__webpack_require__(115);var _dec,_dec2,_dec3,_dec4,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_dec5,_dec6,_class3,buildDrillTree=__webpack_require__(374),builders=__webpack_require__(1336),dvt_aggregation_esm=__webpack_require__(366);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function models_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function models_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function models_createClass(Constructor,protoProps,staticProps){return protoProps&&models_defineProperties(Constructor.prototype,protoProps),staticProps&&models_defineProperties(Constructor,staticProps),Constructor}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var models_Pivot=(_dec=mobx_module.n.ref,_dec2=Object(mobx_module.g)({keepAlive:!0}),_dec3=Object(mobx_module.g)({keepAlive:!0}),_dec4=Object(mobx_module.g)({keepAlive:!0}),_descriptor=_applyDecoratedDescriptor((_class=function(){function Pivot(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};models_classCallCheck(this,Pivot),_initializerDefineProperty(this,"isLoading",_descriptor,this),_initializerDefineProperty(this,"data",_descriptor2,this),_initializerDefineProperty(this,"dimCodes",_descriptor3,this),_initializerDefineProperty(this,"allIndicators",_descriptor4,this),_initializerDefineProperty(this,"allDimensions",_descriptor5,this),_initializerDefineProperty(this,"filters",_descriptor6,this),_initializerDefineProperty(this,"indCodes",_descriptor7,this),Object.assign(this,input),null==this.indCodes&&(this.indCodes=this.allIndicators.map((function(ind){return ind.code}))),null==this.filters&&(this.filters=Object.fromEntries(this.dimCodes.map((function(dimCode){return[dimCode,[]]}))))}return models_createClass(Pivot,[{key:"filter",value:function filter(dimCode,value,checked){if(checked)this.filters[dimCode].push(value);else{var values=this.filters[dimCode];values.splice(values.indexOf(value),1)}}},{key:"changeDimCodes",value:function changeDimCodes(dimCodes,filters){this.dimCodes=dimCodes,filters&&(this.filters=filters)}},{key:"batchFilter",value:function batchFilter(dimCode,values,checked){if(checked){var pre=this.filters[dimCode];this.filters[dimCode]=Array.from(new Set(pre.concat(values)))}else{var removeSet=new Set(values);this.filters[dimCode]=this.filters[dimCode].filter((function(v){return!removeSet.has(v)}))}}},{key:"aggregate",get:function get(){return Object(dvt_aggregation_esm.a)(this.allIndicators)}},{key:"dimValues",get:function get(){var _this=this;return Object.fromEntries(this.allDimensions.map((function(dim){return[dim.code,lodash_default.a.uniq(_this.data.map((function(d){return d[dim.code]})))]})))}},{key:"filteredData",get:function get(){var _this2=this,checkedValuesMap=new Map(this.allDimensions.map((function(dim){return[dim.code,new Set(_this2.filters[dim.code])]})));return this.data.filter((function(d){return _this2.allDimensions.every((function(dim){return checkedValuesMap.get(dim.code).has(d[dim.code])}))}))}}]),Pivot}()).prototype,"isLoading",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return!0}}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,"data",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,"dimCodes",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,"allIndicators",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),_descriptor5=_applyDecoratedDescriptor(_class.prototype,"allDimensions",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function initializer(){return[]}}),_descriptor6=_applyDecoratedDescriptor(_class.prototype,"filters",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor7=_applyDecoratedDescriptor(_class.prototype,"indCodes",[mobx_module.n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_applyDecoratedDescriptor(_class.prototype,"aggregate",[_dec2],Object.getOwnPropertyDescriptor(_class.prototype,"aggregate"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"dimValues",[_dec3],Object.getOwnPropertyDescriptor(_class.prototype,"dimValues"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"filteredData",[_dec4],Object.getOwnPropertyDescriptor(_class.prototype,"filteredData"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"filter",[mobx_module.f],Object.getOwnPropertyDescriptor(_class.prototype,"filter"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"changeDimCodes",[mobx_module.f],Object.getOwnPropertyDescriptor(_class.prototype,"changeDimCodes"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"batchFilter",[mobx_module.f],Object.getOwnPropertyDescriptor(_class.prototype,"batchFilter"),_class.prototype),_class),models_PivotView=(_dec5=Object(mobx_module.g)({keepAlive:!0}),_dec6=Object(mobx_module.g)({keepAlive:!0}),_applyDecoratedDescriptor((_class3=function(){function PivotView(pivot){models_classCallCheck(this,PivotView),this.pivot=void 0,this.pivot=pivot}return models_createClass(PivotView,[{key:"leftTree",get:function get(){var pivot=this.pivot;return Object(buildDrillTree.a)(pivot.filteredData,pivot.dimCodes,{includeTopWrapper:!0,enforceExpandTotalNode:!1})}},{key:"topTree",get:function get(){return this.pivot.allIndicators.map((function(indicator){return{key:indicator.code,value:indicator.name,align:indicator.align,data:{indicator:indicator}}}))}},{key:"recordMap",get:function get(){var pivot=this.pivot;return Object(builders.a)({data:pivot.filteredData,codes:pivot.dimCodes,aggregate:pivot.aggregate})}}]),PivotView}()).prototype,"leftTree",[mobx_module.g],Object.getOwnPropertyDescriptor(_class3.prototype,"leftTree"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,"topTree",[_dec5],Object.getOwnPropertyDescriptor(_class3.prototype,"topTree"),_class3.prototype),_applyDecoratedDescriptor(_class3.prototype,"recordMap",[_dec6],Object.getOwnPropertyDescriptor(_class3.prototype,"recordMap"),_class3.prototype),_class3);function drillable_tree_table_stories_slicedToArray(arr,i){return function drillable_tree_table_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function drillable_tree_table_stories_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function drillable_tree_table_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return drillable_tree_table_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return drillable_tree_table_stories_arrayLikeToArray(o,minLen)}(arr,i)||function drillable_tree_table_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function drillable_tree_table_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}mobx_module.h({enforceActions:"observed"});__webpack_exports__.default={parameters:{storySource:{source:"import { CrossTreeTable } from 'ali-react-table/pivot'\nimport _ from 'lodash'\nimport * as mobx from 'mobx'\nimport { action } from 'mobx'\nimport { observer } from 'mobx-react'\nimport React, { useEffect, useState } from 'react'\nimport { getIncomeData } from 'assets/src/cdn-data'\nimport { amount, lfl, ratio } from 'assets/src/format'\nimport { CheckedDimList, PrimaryColumnTitle } from './designers'\nimport { Pivot, PivotView } from './models'\n\nmobx.configure({ enforceActions: 'observed' })\n\nexport default { title: '其他 / 支持下钻的树状表格' }\n\nconst ALL_DIMS = [\n  { code: 'planet', name: '子公司' },\n  { code: 'season', name: '季度' },\n  { code: 'month', name: '月份' },\n  { code: 'area', name: '门店' },\n  { code: 'one', name: '一级类目' },\n  { code: 'two', name: '二级类目' },\n  { code: 'three', name: '三级类目' },\n]\n\nconst INDICATORS = [\n  {\n    code: 'a',\n    name: '目标收入',\n    align: 'right' as const,\n    render: amount,\n    features: { sortable: true },\n    expression: 'SUM(a)',\n  },\n  {\n    code: 'b',\n    name: '实际收入',\n    render: amount,\n    align: 'right' as const,\n    features: { sortable: true },\n    expression: 'SUM(b)',\n  },\n  {\n    code: 'c',\n    name: '上月收入',\n    render: amount,\n    hidden: true,\n    align: 'right' as const,\n    features: { sortable: true },\n    expression: 'SUM(c)',\n  },\n  {\n    code: 'lfl',\n    name: '收入月环比',\n    render: lfl,\n    align: 'right' as const,\n    features: { sortable: true },\n    expression: '(a - c) / a',\n  },\n  {\n    code: 'd',\n    name: '重点商品收入',\n    render: amount,\n    align: 'right' as const,\n    features: { sortable: true },\n    expression: 'SUM(d)',\n  },\n  {\n    code: 'rate',\n    name: '重点商品收入占比',\n    render: ratio,\n    align: 'right' as const,\n    features: { sortable: true },\n    expression: 'd / b',\n  },\n]\n\nconst Inner = observer(() => {\n  const [pivot] = useState(() => {\n    return new Pivot({\n      allDimensions: ALL_DIMS,\n      allIndicators: INDICATORS,\n      dimCodes: ['planet', 'area', 'season'],\n    })\n  })\n\n  const [pivotView] = useState(() => new PivotView(pivot))\n\n  useEffect(() => {\n    getIncomeData().then(\n      action((data: any[]) => {\n        pivot.data = data\n        pivot.isLoading = false\n        pivot.filters = Object.fromEntries(\n          pivot.allDimensions.map((dim) => {\n            return [dim.code, _.uniq(data.map((d) => d[dim.code]))]\n          }),\n        )\n      }),\n    )\n  }, [])\n\n  return (\n    <div>\n      <CheckedDimList pivot={pivot} />\n      <CrossTreeTable\n        style={{ marginTop: 8 }}\n        primaryColumn={{\n          lock: true,\n          name: '数据维度',\n          width: 180,\n          title: <PrimaryColumnTitle pivot={pivot} />,\n        }}\n        defaultColumnWidth={120}\n        isLoading={pivot.isLoading}\n        leftTree={pivotView.leftTree}\n        topTree={pivotView.topTree}\n        getValue={(leftNode, topNode) => {\n          const record = pivotView.recordMap.get(leftNode.key)\n          const ind = topNode.data.indicator\n          return record?.[ind.code]\n        }}\n        render={(value, leftNode, topNode) => {\n          const ind = topNode.data.indicator\n          return ind.render ? ind.render(value) : value\n        }}\n      />\n    </div>\n  )\n})\n\nexport function 基本示例() {\n  return <Inner />\n}\n",locationsMap:{"基本示例":{startLoc:{col:7,line:132},endLoc:{col:1,line:134},startBody:{col:7,line:132},endBody:{col:1,line:134}}}}},title:"其他 / 支持下钻的树状表格"};var ALL_DIMS=[{code:"planet",name:"子公司"},{code:"season",name:"季度"},{code:"month",name:"月份"},{code:"area",name:"门店"},{code:"one",name:"一级类目"},{code:"two",name:"二级类目"},{code:"three",name:"三级类目"}],INDICATORS=[{code:"a",name:"目标收入",align:"right",render:format.a,features:{sortable:!0},expression:"SUM(a)"},{code:"b",name:"实际收入",render:format.a,align:"right",features:{sortable:!0},expression:"SUM(b)"},{code:"c",name:"上月收入",render:format.a,hidden:!0,align:"right",features:{sortable:!0},expression:"SUM(c)"},{code:"lfl",name:"收入月环比",render:format.b,align:"right",features:{sortable:!0},expression:"(a - c) / a"},{code:"d",name:"重点商品收入",render:format.a,align:"right",features:{sortable:!0},expression:"SUM(d)"},{code:"rate",name:"重点商品收入占比",render:format.c,align:"right",features:{sortable:!0},expression:"d / b"}],Inner=Object(mobxreact_esm.a)((function(){var pivot=drillable_tree_table_stories_slicedToArray(Object(react.useState)((function(){return new models_Pivot({allDimensions:ALL_DIMS,allIndicators:INDICATORS,dimCodes:["planet","area","season"]})})),1)[0],pivotView=drillable_tree_table_stories_slicedToArray(Object(react.useState)((function(){return new models_PivotView(pivot)})),1)[0];return Object(react.useEffect)((function(){Object(cdn_data.b)().then(Object(mobx_module.f)((function(data){pivot.data=data,pivot.isLoading=!1,pivot.filters=Object.fromEntries(pivot.allDimensions.map((function(dim){return[dim.code,lodash_default.a.uniq(data.map((function(d){return d[dim.code]})))]})))})))}),[]),react_default.a.createElement("div",null,react_default.a.createElement(CheckedDimList,{pivot:pivot}),react_default.a.createElement(cross_tree_table_CrossTreeTable,{style:{marginTop:8},primaryColumn:{lock:!0,name:"数据维度",width:180,title:react_default.a.createElement(PrimaryColumnTitle,{pivot:pivot})},defaultColumnWidth:120,isLoading:pivot.isLoading,leftTree:pivotView.leftTree,topTree:pivotView.topTree,getValue:function getValue(leftNode,topNode){var record=pivotView.recordMap.get(leftNode.key),ind=topNode.data.indicator;return null==record?void 0:record[ind.code]},render:function render(value,leftNode,topNode){var ind=topNode.data.indicator;return ind.render?ind.render(value):value}}))})),drillable_tree_table_stories_=function 基本示例(){return react_default.a.createElement(Inner,null)};drillable_tree_table_stories_.displayName="基本示例"},1333:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"简易透视表",(function(){return simple_pivot_table_stories_}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(41),__webpack_require__(64),__webpack_require__(129),__webpack_require__(54),__webpack_require__(55);var buildDrillTree=__webpack_require__(374),react=(__webpack_require__(75),__webpack_require__(94),__webpack_require__(65),__webpack_require__(0)),react_default=__webpack_require__.n(react),noop=__webpack_require__(1345),styled_components_browser_esm=__webpack_require__(71),common_views=__webpack_require__(99),isLeafNode=__webpack_require__(95),simpleEncode=__webpack_require__(225);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ExpandSpan=styled_components_browser_esm.b.span.withConfig({displayName:"convert-utils__ExpandSpan",componentId:"ilvcbp-0"})(["display:inline-flex;align-items:center;padding:2px 8px 2px 0;cursor:pointer;.icon{fill:#999;margin-right:4px;&.expanded{transform-origin:center center;transform:rotate(90deg);}}"]);function convertDrillTreeToCrossTree(drillTree){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},indicators=_ref.indicators,_ref$encode=_ref.encode,encode=void 0===_ref$encode?simpleEncode.a:_ref$encode,generateSubtotalNode=_ref.generateSubtotalNode,_ref$enforceExpandTot=_ref.enforceExpandTotalNode,enforceExpandTotalNode=void 0===_ref$enforceExpandTot||_ref$enforceExpandTot,expandKeys=_ref.expandKeys,_ref$onChangeExpandKe=_ref.onChangeExpandKeys,onChangeExpandKeys=void 0===_ref$onChangeExpandKe?noop.a:_ref$onChangeExpandKe,supportsExpand=_ref.supportsExpand,totalKey=encode([]);if(supportsExpand&&null==expandKeys)throw new Error("[ali-react-table] convertDrillTreeToCrossTree(...) 设置 supportsExpand=true 时，expandKeys 不能为 null/undefined.");var expandKeySet=new Set(expandKeys);return dfs(drillTree,0);function getIndicators(node,nodeData){return indicators.map((function(indicator){return Object.assign({key:encode(node.path.concat([indicator.code])),value:indicator.name,data:Object.assign({},nodeData,{indicator:indicator})},indicator)}))}function drillNodeToTreeNode(node,nodeData){return null!=indicators?{key:node.key,value:node.value,data:nodeData,children:getIndicators(node,nodeData)}:{key:node.key,value:node.value,data:nodeData}}function dfs(drillNodes,depth){var _step,result=[],_loop=function _loop(node){var nodeData={dataKey:node.key,dataPath:node.path};if(Object(isLeafNode.a)(node)&&!node.hasChild)result.push(drillNodeToTreeNode(node,nodeData));else{var needProcessChildren=!0,crossTreeNode={key:node.key,value:node.value,data:nodeData};if(!supportsExpand||enforceExpandTotalNode&&node.key===totalKey?crossTreeNode.children=dfs(node.children,depth+1):expandKeySet.has(node.key)?(crossTreeNode.title=react_default.a.createElement(ExpandSpan,{onClick:function onClick(){onChangeExpandKeys(expandKeys.filter((function(k){return k!==node.key})),node,"collapse")}},react_default.a.createElement(common_views.c.CaretRight,{className:"icon expanded"}),node.value),crossTreeNode.children=dfs(node.children,depth+1)):(needProcessChildren=!1,crossTreeNode.title=react_default.a.createElement(ExpandSpan,{onClick:function onClick(){onChangeExpandKeys(expandKeys.concat([node.key]),node,"expand")}},react_default.a.createElement(common_views.c.CaretRight,{className:"icon collapsed"}),node.value),null!=indicators&&(crossTreeNode.children=getIndicators(node,nodeData))),needProcessChildren){var subtotalNodeData=null==generateSubtotalNode?void 0:generateSubtotalNode(node);if(subtotalNodeData){var _subtotalNodeData$pos=subtotalNodeData.position,position=void 0===_subtotalNodeData$pos?"start":_subtotalNodeData$pos,value=subtotalNodeData.value,subtotalPath=node.path.concat([value]),subtotalTreeNode=drillNodeToTreeNode({key:encode(subtotalPath),path:subtotalPath,value:value},nodeData);"start"===position?crossTreeNode.children.unshift(subtotalTreeNode):crossTreeNode.children.push(subtotalTreeNode)}}result.push(crossTreeNode)}},_iterator=_createForOfIteratorHelper(drillNodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){_loop(_step.value)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}}var builders=__webpack_require__(1336),table=(__webpack_require__(128),__webpack_require__(105),__webpack_require__(229)),getTreeDepth=(__webpack_require__(93),__webpack_require__(1340)),constants=__webpack_require__(367);function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function buildCrossTable_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=buildCrossTable_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return buildCrossTable_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||buildCrossTable_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function buildCrossTable_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return buildCrossTable_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?buildCrossTable_arrayLikeToArray(o,minLen):void 0}}function buildCrossTable_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function buildCrossTable(options){var _options$leftTree,_options$topTree,_options$leftMetaColu,leftTotalNode=options.leftTotalNode,topTotalNode=options.topTotalNode,leftTree=null!==(_options$leftTree=options.leftTree)&&void 0!==_options$leftTree?_options$leftTree:[],topTree=null!==(_options$topTree=options.topTree)&&void 0!==_options$topTree?_options$topTree:[],leftMetaColumns=null!==(_options$leftMetaColu=options.leftMetaColumns)&&void 0!==_options$leftMetaColu?_options$leftMetaColu:[],leftHeaderWidth=Math.max(leftMetaColumns.length,Object(getTreeDepth.a)(leftTree)+1);return{columns:function getColumns(){return[].concat(_toConsumableArray(function getLeftPartColumns(){for(var leftPartColumns=[],index=0;index<leftHeaderWidth;index++){var _leftMetaColumns$inde,metaCol=null!==(_leftMetaColumns$inde=leftMetaColumns[index])&&void 0!==_leftMetaColumns$inde?_leftMetaColumns$inde:{},staticMetaColConfig=(metaCol.getCellProps,metaCol.render,_objectWithoutProperties(metaCol,["getCellProps","render"]));leftPartColumns.push(Object.assign({columnType:"left",lock:!0},staticMetaColConfig,{getCellProps:leftHeaderGetCellPropsFactory(metaCol,index),getSpanRect:leftHeaderGetSpanRectFactory(metaCol,index),getValue:leftHeaderGetValueFactory(metaCol,index),render:leftHeaderRenderFactory(metaCol,index)}))}return leftPartColumns;function leftHeaderGetCellPropsFactory(metaCol,colIndex){return function(_value,row,rowIndex){var _metaCol$getCellProps,node=row.nodes[colIndex];return null===(_metaCol$getCellProps=metaCol.getCellProps)||void 0===_metaCol$getCellProps?void 0:_metaCol$getCellProps.call(metaCol,node,colIndex)}}function leftHeaderGetSpanRectFactory(metaCol,colIndex){return function(_value,row){return row.rects[colIndex]}}function leftHeaderGetValueFactory(metaCol,colIndex){return function(row,rowIndex){return row.nodes[colIndex].value}}function leftHeaderRenderFactory(metaCol,colIndex){return function(v,row,rowIndex){var _node$title,node=row.nodes[colIndex];return metaCol.render?metaCol.render(node,colIndex):null!==(_node$title=node.title)&&void 0!==_node$title?_node$title:node.value}}}()),_toConsumableArray(function getDataPartColumns(){return topTree.length>0?dfs(topTree,{valuePath:[],depth:0}):topTotalNode?dfs([topTotalNode],{valuePath:[],depth:0}):[];function dfs(nodes,ctx){var _step,result=[],_iterator=buildCrossTable_createForOfIteratorHelper(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;if(ctx.valuePath.push(node.value),Object(isLeafNode.a)(node))result.push(getDataColumn(node,ctx.depth));else{node.key;var value=node.value,children=node.children,others=_objectWithoutProperties(node,["key","value","children"]);result.push(Object.assign({columnType:"data-parent"},others,{name:value,children:dfs(children,{valuePath:ctx.valuePath,depth:ctx.depth+1})}))}ctx.valuePath.pop()}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}}()));function getDataColumn(topNode,topDepth){topNode.key;var value=topNode.value,others=(topNode.children,_objectWithoutProperties(topNode,["key","value","children"]));return Object.assign({columnType:"data"},others,{getValue:function columnGetValue(row){var leftDepth=row.nodes.length-1,leftNode=row.nodes[leftDepth];return options.getValue(leftNode,topNode,leftDepth,topDepth)},name:value,children:null,render:function render(value,row){if(options.render){var leftDepth=row.nodes.length-1,leftNode=row.nodes[leftDepth];return options.render(value,leftNode,topNode,leftDepth,topDepth)}return value},getCellProps:function getCellProps(value,row){if(options.getCellProps){var leftDepth=row.nodes.length-1,leftNode=row.nodes[leftDepth];return options.getCellProps(value,leftNode,topNode,leftDepth,topDepth)}}})}}(),dataSource:function getDataSource(){var flatRows=[],ctx={depth:0,nodes:[],rects:[],rowIndex:0};leftTree.length>0?dfs(leftTree,ctx):leftTotalNode&&dfs([leftTotalNode],ctx);return flatRows;function dfs(nodes,ctx){var _step2,count=0,_iterator2=buildCrossTable_createForOfIteratorHelper(nodes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _row,node=_step2.value;if(!node.hidden){var rect={top:ctx.rowIndex+count,bottom:-1,left:ctx.depth,right:-1},row=(_defineProperty(_row={},constants.a,node.key),_defineProperty(_row,"rects",[].concat(_toConsumableArray(ctx.rects),[rect])),_defineProperty(_row,"nodes",[].concat(_toConsumableArray(ctx.nodes),[node])),_row);if(Object(isLeafNode.a)(node))rect.right=leftHeaderWidth,rect.bottom=rect.top+1,flatRows.push(row),count+=1;else{ctx.rects.push(rect),ctx.nodes.push(node);var ret=dfs(node.children,{nodes:ctx.nodes,rects:ctx.rects,depth:ctx.depth+1,rowIndex:ctx.rowIndex+count});ctx.rects.pop(),ctx.nodes.pop(),count+=ret.count,rect.right=rect.left+1,rect.bottom=rect.top+ret.count}}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return{count:count}}}()}}try{buildCrossTable.displayName="buildCrossTable",buildCrossTable.__docgenInfo={description:"",displayName:"buildCrossTable",props:{leftTree:{defaultValue:null,description:"",name:"leftTree",required:!0,type:{name:"LeftCrossTreeNode[]"}},topTree:{defaultValue:null,description:"",name:"topTree",required:!0,type:{name:"TopCrossTreeNode[]"}},leftTotalNode:{defaultValue:null,description:"",name:"leftTotalNode",required:!1,type:{name:"LeftCrossTreeNode"}},topTotalNode:{defaultValue:null,description:"",name:"topTotalNode",required:!1,type:{name:"TopCrossTreeNode"}},leftMetaColumns:{defaultValue:null,description:"",name:"leftMetaColumns",required:!0,type:{name:"CrossTableLeftMetaColumn[]"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => any"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => ReactNode"}},getCellProps:{defaultValue:null,description:"",name:"getCellProps",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => CellProps"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pivot/cross-table/buildCrossTable.tsx#buildCrossTable"]={docgenInfo:buildCrossTable.__docgenInfo,name:"buildCrossTable",path:"../ali-react-table/src/pivot/cross-table/buildCrossTable.tsx#buildCrossTable"})}catch(__react_docgen_typescript_loader_error){}function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function cross_table_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function cross_table_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var cross_table=function CrossTable(_ref){var _ref$BaseTableCompone=_ref.BaseTableComponent,BaseTableComponent=void 0===_ref$BaseTableCompone?table.a:_ref$BaseTableCompone,leftTree=_ref.leftTree,leftTotalNode=_ref.leftTotalNode,topTree=_ref.topTree,topTotalNode=_ref.topTotalNode,getValue=_ref.getValue,getCellProps=_ref.getCellProps,leftMetaColumns=_ref.leftMetaColumns,render=_ref.render,baseTableRef=_ref.baseTableRef,others=cross_table_objectWithoutProperties(_ref,["BaseTableComponent","leftTree","leftTotalNode","topTree","topTotalNode","getValue","getCellProps","leftMetaColumns","render","baseTableRef"]),_buildCrossTable=buildCrossTable({leftTree:leftTree,topTree:topTree,leftTotalNode:leftTotalNode,topTotalNode:topTotalNode,getValue:getValue,getCellProps:getCellProps,render:render,leftMetaColumns:leftMetaColumns}),dataSource=_buildCrossTable.dataSource,columns=_buildCrossTable.columns;return react_default.a.createElement(BaseTableComponent,_extends({ref:baseTableRef},others,{primaryKey:constants.a,dataSource:dataSource,columns:columns}))};try{crosstable.displayName="crosstable",crosstable.__docgenInfo={description:"",displayName:"crosstable",props:{BaseTableComponent:{defaultValue:null,description:"",name:"BaseTableComponent",required:!1,type:{name:"any"}},baseTableRef:{defaultValue:null,description:"",name:"baseTableRef",required:!1,type:{name:"Ref<BaseTable>"}},leftTree:{defaultValue:null,description:"",name:"leftTree",required:!0,type:{name:"LeftCrossTreeNode[]"}},topTree:{defaultValue:null,description:"",name:"topTree",required:!0,type:{name:"TopCrossTreeNode[]"}},leftTotalNode:{defaultValue:null,description:"",name:"leftTotalNode",required:!1,type:{name:"LeftCrossTreeNode"}},topTotalNode:{defaultValue:null,description:"",name:"topTotalNode",required:!1,type:{name:"TopCrossTreeNode"}},leftMetaColumns:{defaultValue:null,description:"",name:"leftMetaColumns",required:!1,type:{name:"CrossTableLeftMetaColumn[]"}},getValue:{defaultValue:null,description:"",name:"getValue",required:!0,type:{name:"(leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => any"}},render:{defaultValue:null,description:"",name:"render",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => ReactNode"}},getCellProps:{defaultValue:null,description:"",name:"getCellProps",required:!1,type:{name:"(value: any, leftNode: LeftCrossTreeNode, topNode: TopCrossTreeNode, leftDepth: number, topDepth: number) => CellProps"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/pivot/cross-table/cross-table.tsx#crosstable"]={docgenInfo:crosstable.__docgenInfo,name:"crosstable",path:"../ali-react-table/src/pivot/cross-table/cross-table.tsx#crosstable"})}catch(__react_docgen_typescript_loader_error){}var dvt_aggregation_esm=__webpack_require__(366),src=__webpack_require__(146),cdn_data=__webpack_require__(118),format=__webpack_require__(29);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function simple_pivot_table_stories_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return simple_pivot_table_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return simple_pivot_table_stories_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function simple_pivot_table_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={parameters:{storySource:{source:"import {\n  buildDrillTree,\n  buildRecordMatrix,\n  convertDrillTreeToCrossTree,\n  CrossTable,\n  DrillNode,\n} from 'ali-react-table/pivot'\nimport { createAggregateFunction } from 'dvt-aggregation'\nimport React, { useEffect, useState } from 'react'\nimport { MinimumPivotTableDesigner } from 'assets/src'\nimport { getIncomeData } from 'assets/src/cdn-data'\nimport { amount, lfl, ratio } from 'assets/src/format'\n\nexport default { title: '其他 / 简易透视表' }\n\nconst dimensions = [\n  { code: 'planet', name: '子公司', width: 150 },\n  { code: 'area', name: '门店', width: 150 },\n  { code: 'season', name: '季度' },\n  { code: 'month', name: '月份' },\n  { code: 'one', name: '一级类目' },\n  { code: 'two', name: '二级类目' },\n  { code: 'three', name: '三级类目' },\n]\n\nconst dimMap = new Map(dimensions.map((dim) => [dim.code, dim]))\n\nconst indicators = [\n  {\n    code: 'a',\n    name: '指标A',\n    width: 100,\n    align: 'right' as const,\n    expression: 'SUM(a)',\n    render: amount,\n  },\n  {\n    code: 'b',\n    name: '指标B',\n    width: 100,\n    align: 'right' as const,\n    expression: 'SUM(b)',\n    render: amount,\n  },\n  {\n    code: 'c',\n    name: '指标C',\n    hidden: true,\n    render: amount,\n    expression: 'SUM(c)',\n  },\n  {\n    code: 'lfl',\n    name: '环比指标',\n    expression: '(b - c) / c',\n    width: 100,\n    align: 'right' as const,\n    render: lfl,\n  },\n  {\n    code: 'd',\n    name: '指标D',\n    expression: 'SUM(d)',\n    render: amount,\n    width: 120,\n    align: 'right' as const,\n  },\n  {\n    code: 'rate',\n    name: '占比指标',\n    expression: 'd / b',\n    render: ratio,\n    width: 120,\n    align: 'right' as const,\n  },\n]\n\nfunction generateSubtotalNode(drillNode: DrillNode) {\n  return {\n    position: 'start' as const,\n    value: drillNode.path.length === 0 ? '总计' : '小计',\n  }\n}\n\nexport function 简易透视表() {\n  const [{ data, isLoading }, setState] = useState({ isLoading: true, data: [] as any[] })\n\n  useEffect(() => {\n    getIncomeData().then((data) => setState({ data, isLoading: false }))\n  }, [])\n\n  const [indicatorSide, onChangeIndicatorSide] = useState('top')\n  const [leftCodes, onChangeLeftCodes] = useState(['planet', 'area', 'one'])\n  const [topCodes, onChangeTopCodes] = useState(['season', 'month'])\n  const [showSubtotal, onChangeShowSubtotal] = useState(true)\n  const [supportsExpand, onChangeSupportsExpand] = useState(false)\n\n  const [leftExpandKeys, onChangeLeftExpandKeys] = useState<string[]>([])\n  const leftExpandKeySet = new Set(leftExpandKeys)\n  const leftDrillTree = buildDrillTree(data, leftCodes, {\n    includeTopWrapper: true,\n    isExpand: !supportsExpand ? undefined : (key) => leftExpandKeySet.has(key),\n  })\n  const [leftTreeRoot] = convertDrillTreeToCrossTree(leftDrillTree, {\n    indicators: indicatorSide === 'left' ? indicators : null,\n    generateSubtotalNode: showSubtotal ? generateSubtotalNode : null,\n    supportsExpand,\n    expandKeys: leftExpandKeys,\n    onChangeExpandKeys: onChangeLeftExpandKeys,\n  })\n\n  const [topExpandKeys, onChangeTopExpandKeys] = useState<string[]>([])\n  const topExpandKeySet = new Set(topExpandKeys)\n  const topDrillTree = buildDrillTree(data, topCodes, {\n    includeTopWrapper: true,\n    isExpand: !supportsExpand ? undefined : (key) => topExpandKeySet.has(key),\n  })\n  const [topTreeRoot] = convertDrillTreeToCrossTree(topDrillTree, {\n    indicators: indicatorSide === 'top' ? indicators : null,\n    generateSubtotalNode: showSubtotal ? generateSubtotalNode : null,\n    supportsExpand,\n    expandKeys: topExpandKeys,\n    onChangeExpandKeys: onChangeTopExpandKeys,\n  })\n\n  const aggregate = createAggregateFunction(indicators)\n  const matrix = buildRecordMatrix({\n    data,\n    leftCodes,\n    topCodes,\n    aggregate,\n    prebuiltLeftTree: leftDrillTree,\n    prebuiltTopTree: topDrillTree,\n  })\n\n  return (\n    <div style={{ minWidth: 800 }}>\n      <MinimumPivotTableDesigner\n        showSupportsExpandToggle\n        supportsExpand={supportsExpand}\n        onChangeSupportsExpand={onChangeSupportsExpand}\n        showSubtotal={showSubtotal}\n        onChangeShowSubtotal={onChangeShowSubtotal}\n        dimensions={dimensions}\n        leftCodes={leftCodes}\n        onChangeLeftCodes={onChangeLeftCodes}\n        topCodes={topCodes}\n        onChangeTopCodes={onChangeTopCodes}\n        indicatorSide={indicatorSide}\n        onChangeIndicatorSide={onChangeIndicatorSide}\n      />\n      <CrossTable\n        isLoading={isLoading}\n        defaultColumnWidth={100}\n        useVirtual={true}\n        leftMetaColumns={leftCodes.map((code) => dimMap.get(code))}\n        leftTree={leftTreeRoot.children}\n        leftTotalNode={leftTreeRoot} // 当 leftTree 为空时，leftTotalNode 用于渲染总计行\n        topTree={topTreeRoot.children}\n        topTotalNode={topTreeRoot} // 当 topTree 为空时，topTotalNode 用于渲染总计列\n        getValue={(leftNode, topNode) => {\n          // 注意这里我们使用 node.data.dataKey 来获取单元格在 matrix 中的 record\n          const record = matrix.get(leftNode.data.dataKey).get(topNode.data.dataKey)\n          if (record == null) {\n            return '-'\n          }\n          const indicator = leftNode.data?.indicator ?? topNode.data?.indicator\n          return record[indicator.code]\n        }}\n        render={(value, leftNode, topNode) => {\n          const render = leftNode.data?.indicator?.render ?? topNode.data?.indicator?.render\n          return render ? render(value) : value\n        }}\n      />\n    </div>\n  )\n}\n",locationsMap:{"简易透视表":{startLoc:{col:7,line:85},endLoc:{col:1,line:177},startBody:{col:7,line:85},endBody:{col:1,line:177}}}}},title:"其他 / 简易透视表"};var dimensions=[{code:"planet",name:"子公司",width:150},{code:"area",name:"门店",width:150},{code:"season",name:"季度"},{code:"month",name:"月份"},{code:"one",name:"一级类目"},{code:"two",name:"二级类目"},{code:"three",name:"三级类目"}],dimMap=new Map(dimensions.map((function(dim){return[dim.code,dim]}))),simple_pivot_table_stories_indicators=[{code:"a",name:"指标A",width:100,align:"right",expression:"SUM(a)",render:format.a},{code:"b",name:"指标B",width:100,align:"right",expression:"SUM(b)",render:format.a},{code:"c",name:"指标C",hidden:!0,render:format.a,expression:"SUM(c)"},{code:"lfl",name:"环比指标",expression:"(b - c) / c",width:100,align:"right",render:format.b},{code:"d",name:"指标D",expression:"SUM(d)",render:format.a,width:120,align:"right"},{code:"rate",name:"占比指标",expression:"d / b",render:format.c,width:120,align:"right"}];function simple_pivot_table_stories_generateSubtotalNode(drillNode){return{position:"start",value:0===drillNode.path.length?"总计":"小计"}}var simple_pivot_table_stories_=function 简易透视表(){var _useState2=_slicedToArray(Object(react.useState)({isLoading:!0,data:[]}),2),_useState2$=_useState2[0],data=_useState2$.data,isLoading=_useState2$.isLoading,setState=_useState2[1];Object(react.useEffect)((function(){Object(cdn_data.b)().then((function(data){return setState({data:data,isLoading:!1})}))}),[]);var _useState4=_slicedToArray(Object(react.useState)("top"),2),indicatorSide=_useState4[0],onChangeIndicatorSide=_useState4[1],_useState6=_slicedToArray(Object(react.useState)(["planet","area","one"]),2),leftCodes=_useState6[0],onChangeLeftCodes=_useState6[1],_useState8=_slicedToArray(Object(react.useState)(["season","month"]),2),topCodes=_useState8[0],onChangeTopCodes=_useState8[1],_useState10=_slicedToArray(Object(react.useState)(!0),2),showSubtotal=_useState10[0],onChangeShowSubtotal=_useState10[1],_useState12=_slicedToArray(Object(react.useState)(!1),2),supportsExpand=_useState12[0],onChangeSupportsExpand=_useState12[1],_useState14=_slicedToArray(Object(react.useState)([]),2),leftExpandKeys=_useState14[0],onChangeLeftExpandKeys=_useState14[1],leftExpandKeySet=new Set(leftExpandKeys),leftDrillTree=Object(buildDrillTree.a)(data,leftCodes,{includeTopWrapper:!0,isExpand:supportsExpand?function(key){return leftExpandKeySet.has(key)}:void 0}),leftTreeRoot=_slicedToArray(convertDrillTreeToCrossTree(leftDrillTree,{indicators:"left"===indicatorSide?simple_pivot_table_stories_indicators:null,generateSubtotalNode:showSubtotal?simple_pivot_table_stories_generateSubtotalNode:null,supportsExpand:supportsExpand,expandKeys:leftExpandKeys,onChangeExpandKeys:onChangeLeftExpandKeys}),1)[0],_useState16=_slicedToArray(Object(react.useState)([]),2),topExpandKeys=_useState16[0],onChangeTopExpandKeys=_useState16[1],topExpandKeySet=new Set(topExpandKeys),topDrillTree=Object(buildDrillTree.a)(data,topCodes,{includeTopWrapper:!0,isExpand:supportsExpand?function(key){return topExpandKeySet.has(key)}:void 0}),topTreeRoot=_slicedToArray(convertDrillTreeToCrossTree(topDrillTree,{indicators:"top"===indicatorSide?simple_pivot_table_stories_indicators:null,generateSubtotalNode:showSubtotal?simple_pivot_table_stories_generateSubtotalNode:null,supportsExpand:supportsExpand,expandKeys:topExpandKeys,onChangeExpandKeys:onChangeTopExpandKeys}),1)[0],aggregate=Object(dvt_aggregation_esm.a)(simple_pivot_table_stories_indicators),matrix=Object(builders.b)({data:data,leftCodes:leftCodes,topCodes:topCodes,aggregate:aggregate,prebuiltLeftTree:leftDrillTree,prebuiltTopTree:topDrillTree});return react_default.a.createElement("div",{style:{minWidth:800}},react_default.a.createElement(src.g,{showSupportsExpandToggle:!0,supportsExpand:supportsExpand,onChangeSupportsExpand:onChangeSupportsExpand,showSubtotal:showSubtotal,onChangeShowSubtotal:onChangeShowSubtotal,dimensions:dimensions,leftCodes:leftCodes,onChangeLeftCodes:onChangeLeftCodes,topCodes:topCodes,onChangeTopCodes:onChangeTopCodes,indicatorSide:indicatorSide,onChangeIndicatorSide:onChangeIndicatorSide}),react_default.a.createElement(cross_table,{isLoading:isLoading,defaultColumnWidth:100,useVirtual:!0,leftMetaColumns:leftCodes.map((function(code){return dimMap.get(code)})),leftTree:leftTreeRoot.children,leftTotalNode:leftTreeRoot,topTree:topTreeRoot.children,topTotalNode:topTreeRoot,getValue:function getValue(leftNode,topNode){var _leftNode$data$indica,_leftNode$data,_topNode$data,record=matrix.get(leftNode.data.dataKey).get(topNode.data.dataKey);return null==record?"-":record[(null!==(_leftNode$data$indica=null===(_leftNode$data=leftNode.data)||void 0===_leftNode$data?void 0:_leftNode$data.indicator)&&void 0!==_leftNode$data$indica?_leftNode$data$indica:null===(_topNode$data=topNode.data)||void 0===_topNode$data?void 0:_topNode$data.indicator).code]},render:function render(value,leftNode,topNode){var _leftNode$data$indica2,_leftNode$data2,_leftNode$data2$indic,_topNode$data2,_topNode$data2$indica,render=null!==(_leftNode$data$indica2=null===(_leftNode$data2=leftNode.data)||void 0===_leftNode$data2||null===(_leftNode$data2$indic=_leftNode$data2.indicator)||void 0===_leftNode$data2$indic?void 0:_leftNode$data2$indic.render)&&void 0!==_leftNode$data$indica2?_leftNode$data$indica2:null===(_topNode$data2=topNode.data)||void 0===_topNode$data2||null===(_topNode$data2$indica=_topNode$data2.indicator)||void 0===_topNode$data2$indica?void 0:_topNode$data2$indica.render;return render?render(value):value}}))};simple_pivot_table_stories_.displayName="简易透视表"},1334:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"树状表格",(function(){return transforms_stories_})),__webpack_require__.d(__webpack_exports__,"表格排序_多列",(function(){return stories_transforms_stories_})),__webpack_require__.d(__webpack_exports__,"表格排序_单列",(function(){return stories_transforms_stories_0})),__webpack_require__.d(__webpack_exports__,"列高亮",(function(){return stories_transforms_stories_1})),__webpack_require__.d(__webpack_exports__,"列的范围高亮",(function(){return stories_transforms_stories_2})),__webpack_require__.d(__webpack_exports__,"列气泡提示",(function(){return stories_transforms_stories_3})),__webpack_require__.d(__webpack_exports__,"树状模式与层级排序",(function(){return stories_transforms_stories_4})),__webpack_require__.d(__webpack_exports__,"单元格自动合并",(function(){return stories_transforms_stories_5})),__webpack_require__.d(__webpack_exports__,"自定义样式的排序表头",(function(){return stories_transforms_stories_6})),__webpack_require__.d(__webpack_exports__,"拖拽调整列宽",(function(){return stories_transforms_stories_7})),__webpack_require__.d(__webpack_exports__,"自适应列宽_demo",(function(){return transforms_stories_demo}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(457),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(458),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var balloon=__webpack_require__(174),bucket_14=__webpack_require__(1353),bucket_17=__webpack_require__(1354),applyTransforms=__webpack_require__(375),buildTree=__webpack_require__(1352);function makeBuildTreeTransform(idProp,parentIdProp){return function(_ref){var columns=_ref.columns,dataSource=_ref.dataSource;return{columns:columns,dataSource:Object(buildTree.a)(idProp,parentIdProp,dataSource)}}}var treeMode=__webpack_require__(1337),sort=__webpack_require__(1360),columnHover=__webpack_require__(1348),proto=__webpack_require__(203),columnRangeHover=__webpack_require__(1349),tips=__webpack_require__(1351),autoRowSpan=__webpack_require__(1350),collectNodes=__webpack_require__(1335),react=(__webpack_require__(128),__webpack_require__(105),__webpack_require__(0)),react_default=__webpack_require__.n(react),fromEvent=__webpack_require__(1339),takeUntil=__webpack_require__(1355),map=__webpack_require__(257),styled_components_browser_esm=__webpack_require__(71),internals=__webpack_require__(74),traverseColumn=__webpack_require__(228),isLeafNode=__webpack_require__(95);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var ResizeHandle=styled_components_browser_esm.b.span.withConfig({displayName:"columnResize__ResizeHandle",componentId:"sc-1gggjky-0"})(["position:absolute;top:0;bottom:0;right:-5px;width:10px;cursor:col-resize;z-index:1;"]);function makeColumnResizeTransform(_ref){var sizes=_ref.sizes,onChangeSizes=_ref.onChangeSizes,_ref$minSize=_ref.minSize,minSize=void 0===_ref$minSize?40:_ref$minSize,_ref$maxSize=_ref.maxSize,maxSize=void 0===_ref$maxSize?1/0:_ref$maxSize,appendExpander=_ref.appendExpander,_ref$expanderVisibili=_ref.expanderVisibility,expanderVisibility=void 0===_ref$expanderVisibili?"visible":_ref$expanderVisibili,disableUserSelectWhenResizing=_ref.disableUserSelectWhenResizing,startResize=function startResize(colIndex,e){var docElemStyle,startX=e.clientX,startSize=sizes[colIndex],nextSizes$=Object(fromEvent.a)(window,"mousemove").pipe(takeUntil.a(Object(fromEvent.a)(window,"mouseup")),map.a((function(e){var movingX=e.clientX,nextSizes=sizes.slice();return nextSizes[colIndex]=function clamp(min,x,max){return Math.max(min,Math.min(max,x))}(minSize,startSize+(movingX-startX),maxSize),nextSizes}))),prevUserSelect="";disableUserSelectWhenResizing&&(docElemStyle=document.documentElement.style,prevUserSelect=docElemStyle.userSelect,docElemStyle.userSelect="none"),nextSizes$.subscribe({next:onChangeSizes,complete:function complete(){disableUserSelectWhenResizing&&(docElemStyle.userSelect=prevUserSelect)}})},innerTransform=Object(traverseColumn.a)((function(col,_ref2){var _col$headerCellProps,range=_ref2.range;if(!Object(isLeafNode.a)(col))return col;var prevTitle=internals.a.safeRenderHeader(col);return Object.assign({},col,{width:sizes[range.start],title:react_default.a.createElement(react_default.a.Fragment,null,prevTitle,react_default.a.createElement(ResizeHandle,{className:"resize-handle",onMouseDown:function onMouseDown(e){return startResize(range.start,e)}})),headerCellProps:Object.assign({},col.headerCellProps,{style:Object.assign({},null===(_col$headerCellProps=col.headerCellProps)||void 0===_col$headerCellProps?void 0:_col$headerCellProps.style,{overflow:"visible",position:"relative"})})})}));return function(input){var _innerTransform=innerTransform(input),columns=_innerTransform.columns,dataSource=_innerTransform.dataSource;return{columns:appendExpander?columns.concat([{name:"",headerCellProps:{className:"resize-expander",style:{background:"hidden"===expanderVisibility?"var(--bgcolor)":void 0,border:"hidden"===expanderVisibility?"none":void 0}},getCellProps:function getCellProps(){return{className:"resize-expander",style:{visibility:expanderVisibility}}}}]):columns,dataSource:dataSource}}}function useColumnResizeTransform(_ref3){var defaultSizes=_ref3.defaultSizes,others=_objectWithoutProperties(_ref3,["defaultSizes"]),_useState2=_slicedToArray(Object(react.useState)(defaultSizes),2),sizes=_useState2[0],onChangeSizes=_useState2[1];return makeColumnResizeTransform(Object.assign({sizes:sizes,onChangeSizes:onChangeSizes},others))}try{makeColumnResizeTransform.displayName="makeColumnResizeTransform",makeColumnResizeTransform.__docgenInfo={description:"",displayName:"makeColumnResizeTransform",props:{sizes:{defaultValue:null,description:"每一列的宽度",name:"sizes",required:!0,type:{name:"number[]"}},onChangeSizes:{defaultValue:null,description:"修改宽度的回调函数",name:"onChangeSizes",required:!0,type:{name:"(nextSizes: number[]) => void"}},minSize:{defaultValue:{value:40},description:"列的最小宽度，默认为 40",name:"minSize",required:!1,type:{name:"number"}},maxSize:{defaultValue:null,description:"列的最大宽度，默认为 Infinity",name:"maxSize",required:!1,type:{name:"number"}},appendExpander:{defaultValue:null,description:"是否在列的末尾追加可伸缩列，默认为 false",name:"appendExpander",required:!1,type:{name:"boolean"}},disableUserSelectWhenResizing:{defaultValue:null,description:"是否在调整列宽时禁用 user-select，默认为 false",name:"disableUserSelectWhenResizing",required:!1,type:{name:"boolean"}},expanderVisibility:{defaultValue:{value:"visible"},description:"可伸缩列 style.visibility",name:"expanderVisibility",required:!1,type:{name:"enum",value:[{value:'"hidden"'},{value:'"visible"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/columnResize.tsx#makeColumnResizeTransform"]={docgenInfo:makeColumnResizeTransform.__docgenInfo,name:"makeColumnResizeTransform",path:"../ali-react-table/src/transforms/columnResize.tsx#makeColumnResizeTransform"})}catch(__react_docgen_typescript_loader_error){}try{useColumnResizeTransform.displayName="useColumnResizeTransform",useColumnResizeTransform.__docgenInfo={description:"",displayName:"useColumnResizeTransform",props:{minSize:{defaultValue:null,description:"列的最小宽度，默认为 40",name:"minSize",required:!1,type:{name:"number"}},maxSize:{defaultValue:null,description:"列的最大宽度，默认为 Infinity",name:"maxSize",required:!1,type:{name:"number"}},appendExpander:{defaultValue:null,description:"是否在列的末尾追加可伸缩列，默认为 false",name:"appendExpander",required:!1,type:{name:"boolean"}},disableUserSelectWhenResizing:{defaultValue:null,description:"是否在调整列宽时禁用 user-select，默认为 false",name:"disableUserSelectWhenResizing",required:!1,type:{name:"boolean"}},expanderVisibility:{defaultValue:null,description:"可伸缩列 style.visibility",name:"expanderVisibility",required:!1,type:{name:"enum",value:[{value:'"hidden"'},{value:'"visible"'}]}},defaultSizes:{defaultValue:null,description:"",name:"defaultSizes",required:!0,type:{name:"number[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/columnResize.tsx#useColumnResizeTransform"]={docgenInfo:useColumnResizeTransform.__docgenInfo,name:"useColumnResizeTransform",path:"../ali-react-table/src/transforms/columnResize.tsx#useColumnResizeTransform"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(190),__webpack_require__(114),__webpack_require__(115);var styles=__webpack_require__(69),mergeCellProps=__webpack_require__(269);function autoWidth_slicedToArray(arr,i){return function autoWidth_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function autoWidth_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function autoWidth_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return autoWidth_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return autoWidth_arrayLikeToArray(o,minLen)}(arr,i)||function autoWidth_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function autoWidth_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var AutoWidthWrapper=styled_components_browser_esm.b.div.withConfig({displayName:"autoWidth__AutoWidthWrapper",componentId:"kvc6bg-0"})(["height:100%;display:inline-flex;align-items:center;white-space:nowrap;padding:8px 12px;"]);function useAutoWidthTransform(tableRef,options,deps){var _useState2=autoWidth_slicedToArray(Object(react.useState)([]),2),widthList=_useState2[0],setWidthList=_useState2[1];Object(react.useEffect)((function(){var artTable=tableRef.current.getDoms().artTable,rows=Array.from(artTable.querySelectorAll(".".concat(styles.a.tableRow)));if(0!==rows.length){for(var preferredWidthList=[],_i2=0,_rows=rows;_i2<_rows.length;_i2++){_rows[_i2].querySelectorAll(".".concat("auto-width-wrapper")).forEach((function(div,i){var _preferredWidthList$i;preferredWidthList[i]=Math.max(null!==(_preferredWidthList$i=preferredWidthList[i])&&void 0!==_preferredWidthList$i?_preferredWidthList$i:0,div.scrollWidth)}))}(function isSameArray(arr1,arr2){return arr1.length===arr2.length&&arr1.every((function(x,i){return x===arr2[i]}))})(preferredWidthList,widthList)||setWidthList(preferredWidthList)}}),deps);var i=0,innerTransform=Object(traverseColumn.a)((function(col){var _col$features,_ref,_widthList$i;if(!Object(isLeafNode.a)(col))return col;if(!(null===(_col$features=col.features)||void 0===_col$features?void 0:_col$features.autoWidth))return col;var _col$features$autoWid=col.features.autoWidth,_col$features$autoWid2=_col$features$autoWid.max,max=void 0===_col$features$autoWid2?1/0:_col$features$autoWid2,_col$features$autoWid3=_col$features$autoWid.min,min=void 0===_col$features$autoWid3?-1/0:_col$features$autoWid3,width=null!==(_ref=null!==(_widthList$i=widthList[i++])&&void 0!==_widthList$i?_widthList$i:col.width)&&void 0!==_ref?_ref:null==options?void 0:options.initColumnWidth,clampedWidth=Math.max(min,Math.min(max,width));return Object.assign({},col,{width:clampedWidth,getCellProps:function getCellProps(_,record,rowIndex){return Object(mergeCellProps.a)(internals.a.safeGetCellProps(col,record,rowIndex),{style:{padding:0}})},render:function render(_,record,rowIndex){return react_default.a.createElement(AutoWidthWrapper,{className:"auto-width-wrapper",style:null==options?void 0:options.wrapperStyle},internals.a.safeRender(col,record,rowIndex))}})}));return function(input){var _options$expanderVisi,_innerTransform=innerTransform(input),columns=_innerTransform.columns,dataSource=_innerTransform.dataSource,expanderVisibility=null!==(_options$expanderVisi=null==options?void 0:options.expanderVisibility)&&void 0!==_options$expanderVisi?_options$expanderVisi:"visible";return{columns:(null==options?void 0:options.appendExpander)?columns.concat([{name:"",headerCellProps:{className:"auto-width-expander",style:{background:"hidden"===expanderVisibility?"var(--bgcolor)":void 0,border:"hidden"===expanderVisibility?"none":void 0}},getCellProps:function getCellProps(){return{className:"auto-width-expander",style:{visibility:expanderVisibility}}}}]):columns,dataSource:dataSource}}}try{useAutoWidthTransform.displayName="useAutoWidthTransform",useAutoWidthTransform.__docgenInfo={description:"自适应列宽",displayName:"useAutoWidthTransform",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/autoWidth.tsx#useAutoWidthTransform"]={docgenInfo:useAutoWidthTransform.__docgenInfo,name:"useAutoWidthTransform",path:"../ali-react-table/src/transforms/autoWidth.tsx#useAutoWidthTransform"})}catch(__react_docgen_typescript_loader_error){}var tooltip=__webpack_require__(111),cdn_data=__webpack_require__(118),format=__webpack_require__(29),ncov19_assets=__webpack_require__(34),theme_helpers=__webpack_require__(215),themed_table=__webpack_require__(52);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return transforms_stories_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||transforms_stories_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function transforms_stories_slicedToArray(arr,i){return function transforms_stories_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function transforms_stories_iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||transforms_stories_unsupportedIterableToArray(arr,i)||function transforms_stories_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function transforms_stories_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return transforms_stories_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?transforms_stories_arrayLikeToArray(o,minLen):void 0}}function transforms_stories_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__webpack_exports__.default={parameters:{storySource:{source:"import { Balloon } from '@alifd/next'\nimport { Row16, ThumbsDown16, ThumbsUp16 } from '@carbon/icons-react'\nimport {\n  applyTransforms,\n  ArtColumn,\n  collectNodes,\n  makeAutoRowSpanTransform,\n  makeBuildTreeTransform,\n  makeColumnHoverTransform,\n  makeColumnRangeHoverTransform,\n  makeColumnResizeTransform,\n  makeSortTransform,\n  makeTipsTransform,\n  makeTreeModeTransform,\n  proto,\n  SortHeaderCellProps,\n  SortItem,\n  useAutoWidthTransform,\n} from 'ali-react-table'\nimport { Tooltip } from 'antd'\nimport { getAppTrafficData } from 'assets/src/cdn-data'\nimport { amount, ratio, time } from 'assets/src/format'\nimport { cols, testProvColumns, useCityDataSource, useProvinceDataSource } from 'assets/src/ncov19-assets'\nimport { BaseTableThemeContext } from 'assets/src/theme-helpers'\nimport React, { useContext, useEffect, useRef, useState } from 'react'\nimport { ThemedBaseTable } from './themed-table'\n\nexport default { title: 'transforms 功能拓展（已过时）' }\n\nexport function 树状表格() {\n  const columns: ArtColumn[] = [\n    {\n      code: 'name',\n      name: '数据维度',\n      lock: true,\n      width: 200,\n      // 通过自定义 getValue，可以实现「根据节点深度选取合适的数据字段」\n      // getValue(record: any) {\n      //   const meta = record[treeMetaSymbol]\n      //   const array = [record.subsidiary_name, record.city_name, record.shop_name]\n      //   return array[meta.depth]\n      // },\n    },\n    { code: 'shop_name', name: '门店' },\n    { code: 'imp_uv_dau_pct', name: '曝光UV占DAU比例', render: ratio, align: 'right' },\n    { code: 'app_qty_pbt', name: 'APP件单价', align: 'right' },\n    { code: 'all_app_trd_amt_1d', name: 'APP成交金额汇总', align: 'right' },\n  ]\n\n  const [state, setState] = useState({ isLoading: true, data: [] as any[] })\n\n  useEffect(() => {\n    getAppTrafficData().then((data) => {\n      setState({ isLoading: false, data })\n    })\n  }, [])\n\n  const [openKeys, onChangeOpenKeys] = useState(['B2C'])\n\n  // 注意 renderData 要用起来\n  const renderData = applyTransforms(\n    { columns: columns, dataSource: state.data },\n\n    // 从平铺的数据中，根据 id/parent_id 字段构建出树状结构\n    makeBuildTreeTransform('id', 'parent_id'),\n\n    makeTreeModeTransform({ primaryKey: 'id', openKeys, onChangeOpenKeys }),\n  )\n\n  return <ThemedBaseTable dataSource={renderData.dataSource} columns={renderData.columns} isLoading={state.isLoading} />\n}\n\nexport function 表格排序_多列() {\n  const { isLoading, dataSource } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [\n    { code: 'provinceName', name: '省份', width: 150, features: { sortable: true } },\n    { code: 'confirmedCount', name: '确诊', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'curedCount', name: '治愈', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'deadCount', name: '死亡', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'updateTime', name: '最后更新时间', width: 180, render: time },\n  ]\n\n  const [sorts, onChangeSorts] = useState<SortItem[]>([\n    { code: 'deadCount', order: 'asc' },\n    { code: 'confirmedCount', order: 'desc' },\n  ])\n\n  const renderData = applyTransforms(\n    { columns, dataSource },\n    makeSortTransform({\n      sorts,\n      onChangeSorts,\n    }),\n  )\n\n  return (\n    <div>\n      <div style={{ display: 'flex', alignItems: 'center', height: 40 }}>\n        <div style={{ marginLeft: 8 }}>点击表头的排序图标对表格数据进行排序</div>\n        <button style={{ marginLeft: 16 }} onClick={() => onChangeSorts([])}>\n          清除排序\n        </button>\n      </div>\n      <ThemedBaseTable isLoading={isLoading} dataSource={renderData.dataSource} columns={renderData.columns} />\n    </div>\n  )\n}\n\nexport function 表格排序_单列() {\n  const { isLoading, dataSource: data } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [\n    { code: 'provinceName', name: '省份', width: 150, features: { sortable: true } },\n    { code: 'confirmedCount', name: '确诊', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'curedCount', name: '治愈', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'deadCount', name: '死亡', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'updateTime', name: '最后更新时间', width: 180, render: time },\n  ]\n\n  const [sorts, onChangeSorts] = useState<SortItem[]>([{ code: 'deadCount', order: 'desc' }])\n\n  const renderData = applyTransforms(\n    { columns, dataSource: data.slice(0, 5) },\n    makeSortTransform({\n      sorts,\n      onChangeSorts,\n      mode: 'single', // 改为 multiple 可以使用多列排序\n    }),\n  )\n\n  return <ThemedBaseTable isLoading={isLoading} dataSource={renderData.dataSource} columns={renderData.columns} />\n}\n\nexport function 列高亮() {\n  const { isLoading, dataSource: data } = useProvinceDataSource()\n\n  const [hoverColIndex, onChangeHoverColIndex] = useState(-1)\n\n  const renderData = applyTransforms(\n    { columns: testProvColumns, dataSource: data.slice(0, 5) },\n    makeColumnHoverTransform({\n      hoverColIndex,\n      onChangeHoverColIndex,\n    }),\n  )\n\n  return <ThemedBaseTable isLoading={isLoading} dataSource={renderData.dataSource} columns={renderData.columns} />\n}\n\nexport function 列的范围高亮() {\n  const appIndProto = proto.array<ArtColumn>({ align: 'right' })\n  const rateIndProto = proto.array<ArtColumn>({ align: 'right', render: ratio })\n\n  // 列配置\n  const columns: ArtColumn[] = [\n    {\n      name: '维度',\n      children: [\n        {\n          name: '商品信息',\n          children: [\n            { code: 'sku_code', name: 'SKU code' },\n            { code: 'sku_name', name: 'SKU名称' },\n          ],\n        },\n        {\n          name: '机构信息',\n          children: [\n            { code: 'city_name', name: '城市' },\n            { code: 'shop_name', name: '门店', features: { defaultVisible: true } },\n          ],\n        },\n        {\n          name: '类目信息',\n          children: [\n            { code: 'merge_cate_level1_name', name: '一级类目' },\n            { code: 'merge_cate_level2_name', name: '二级类目' },\n            { code: 'merge_cate_level3_name', name: '三级类目' },\n          ],\n        },\n      ],\n    },\n    {\n      name: '指标',\n      children: [\n        {\n          name: 'APP指标',\n          children: appIndProto([\n            { code: 'imp_uv_dau_pct', name: '曝光UV占DAU比例', render: ratio },\n            { code: 'app_trd_amt_1d', name: 'APP成交金额', render: amount },\n            { code: 'app_qty_pbt', name: 'APP件单价' },\n            { code: 'all_app_trd_amt_1d', name: 'APP成交金额汇总' },\n            { code: 'app_trd_usr_cnt_1d', name: 'APP成交用户数' },\n            { code: 'appout_shop_num', name: '缺货门店数', render: amount },\n            { code: 'all_time_len', name: '店均缺货时长', render: amount },\n            { code: 'bad_rmk_rate', name: '订单差评率', render: ratio },\n          ]),\n        },\n        {\n          name: '转换率',\n          children: rateIndProto([\n            { code: 'all_imp2pay_rate', name: '整体曝光至成交转化率' },\n            { code: 'search_imp2pay_rate', name: '搜索曝光至成交转化率' },\n            { code: 'classis_imp2pay_rate', name: '分类曝光至成交转化率' },\n            { code: 'cart_imp2pay_rate', name: '购物车曝光至成交转化率' },\n            { code: 'my_page_imp2pay_rate', name: '我的曝光至成交转化率' },\n            { code: 'pq_act_imp2pay_rate', name: '活动页曝光至成交转化率' },\n            { code: 'other_imp2pay_rate', name: '其他曝光至成交转化率' },\n          ]),\n        },\n      ],\n    },\n  ]\n\n  const [state, setState] = useState({ isLoading: true, data: [] as any[] })\n\n  useEffect(() => {\n    getAppTrafficData().then((data) => {\n      setState({ isLoading: false, data: data.slice(0, 8) })\n    })\n  }, [])\n\n  const [hoverRange, onChangeHoverRange] = useState({ start: 0, end: 0 })\n\n  const renderData = applyTransforms(\n    { columns, dataSource: state.data },\n    makeColumnRangeHoverTransform({\n      hoverRange,\n      onChangeHoverRange,\n    }),\n  )\n\n  return (\n    <ThemedBaseTable\n      defaultColumnWidth={120}\n      dataSource={renderData.dataSource}\n      columns={renderData.columns}\n      isLoading={state.isLoading}\n    />\n  )\n}\n\nexport function 列气泡提示() {\n  const { isLoading, dataSource: data } = useProvinceDataSource()\n  const theme = useContext(BaseTableThemeContext)\n\n  const [sorts, onChangeSorts] = useState<SortItem[]>([])\n\n  const columns: ArtColumn[] = [\n    {\n      code: 'provinceName',\n      name: '省份',\n      features: {\n        tips:\n          '省份，即我国的省级行政区，是行政地位与省相同行政区的总称，为一级行政区，包括省、自治区、直辖市、特别行政区。' +\n          '中国共计34个省级行政区，包括23个省、5个自治区、4个直辖市、2个特别行政区。',\n      },\n    },\n    {\n      code: 'curedCount',\n      name: '治愈',\n      render: amount,\n      align: 'right',\n      features: {\n        sortable: true,\n        tips: (\n          <div>\n            治愈是汉字词语，英文cure; heal，注音zhì yù，使恢复健康。如：在骨折完全治愈之前不要上班。\n            治愈指动漫中温暖人心，净化心灵，悲伤时看能得到安慰，治愈自己心灵中的创伤、修补自己心灵上缺陷的作品。\n            也可以指动漫中人物，拥有对主角内心抚慰、平复内心创伤的能力。可以分为行动上和语言上的。\n          </div>\n        ),\n      },\n    },\n    {\n      code: 'updateTime',\n      name: '最后更新时间',\n      render: time,\n      features: {\n        tips: (\n          <div>\n            时间，是物质的运动、变化的持续性、顺序性的表现，包含时刻和时段两个概念。\n            时间是人类用以描述物质运动过程或事件发生过程的一个参数，确定时间，是靠不受外界影响的物质周期变化的规律。以地球自转为基础的时间计量系统称为世界时系统。日、月、年、世纪的时间计量属天文学中的历法范畴。\n            以地球自转运动为基础的时间单位称为“日”，以月球绕地球公转运动为基础的时间单位称为“月”，以地球绕太阳公转运动为基础的时间单位称为“年”。\n          </div>\n        ),\n      },\n    },\n  ]\n\n  const renderData = applyTransforms(\n    { columns, dataSource: data.slice(0, 3) },\n    makeSortTransform({ mode: 'single', sorts, onChangeSorts }),\n    makeTipsTransform(theme === 'antd' ? { Tooltip } : { Balloon }),\n  )\n\n  return (\n    <div>\n      <ThemedBaseTable\n        isLoading={isLoading}\n        dataSource={renderData.dataSource.slice(0, 10)}\n        columns={renderData.columns}\n      />\n    </div>\n  )\n}\n\nexport function 树状模式与层级排序() {\n  const columns: ArtColumn[] = [\n    { code: 'name', name: '数据维度', lock: true, width: 200 },\n    { code: 'shop_name', name: '门店', features: { sortable: true } },\n    { code: 'imp_uv_dau_pct', name: '曝光UV占DAU比例', render: ratio, align: 'right', features: { sortable: true } },\n    { code: 'app_qty_pbt', name: 'APP件单价', align: 'right', features: { sortable: true } },\n    { code: 'all_app_trd_amt_1d', name: 'APP成交金额汇总', align: 'right', features: { sortable: true } },\n  ]\n\n  const [state, setState] = useState({ isLoading: true, data: [] as any[] })\n\n  useEffect(() => {\n    getAppTrafficData().then((data) => {\n      setState({ isLoading: false, data })\n    })\n  }, [])\n\n  const [openKeys, onChangeOpenKeys] = useState(['B2C'])\n  const [sorts, onChangeSorts] = useState<SortItem[]>([])\n\n  const renderData = applyTransforms(\n    { columns, dataSource: state.data },\n    // 从平铺的数据中，根据 id/parent_id 字段构建出树状结构\n    makeBuildTreeTransform('id', 'parent_id'),\n    makeSortTransform({\n      sorts,\n      onChangeSorts,\n      mode: 'single', // 改为 multiple 可以使用多列排序\n      highlightColumnWhenActive: true,\n    }),\n    makeTreeModeTransform({ primaryKey: 'id', openKeys, onChangeOpenKeys, indentSize: 20 }),\n  )\n\n  return (\n    <ThemedBaseTable\n      defaultColumnWidth={100}\n      dataSource={renderData.dataSource}\n      columns={renderData.columns}\n      isLoading={state.isLoading}\n    />\n  )\n}\n\nexport function 单元格自动合并() {\n  const { dataSource: cityData, isLoading } = useCityDataSource()\n\n  const renderData = applyTransforms(\n    {\n      dataSource: cityData.slice(0, 3).flatMap((d) => d.children.slice(0, 4)),\n      columns: [\n        {\n          code: 'provinceName',\n          name: '省份',\n          width: 150,\n          features: { autoRowSpan: true },\n        },\n        cols.cityName,\n        ...cols.indCols.map((col) => ({\n          ...col,\n          features: { autoRowSpan: true },\n        })),\n        {\n          code: 'updateTime',\n          name: '最后更新时间',\n          width: 180,\n          render: time,\n          features: { autoRowSpan: true },\n        },\n      ],\n    },\n    makeAutoRowSpanTransform(),\n  )\n\n  return (\n    <ThemedBaseTable\n      isLoading={isLoading}\n      useOuterBorder\n      dataSource={renderData.dataSource}\n      columns={renderData.columns}\n    />\n  )\n}\n\nfunction CustomSortHeaderCell({ column, sortOptions, sortIndex, children, onToggle, sortOrder }: SortHeaderCellProps) {\n  // 通过 justify-content 来与 col.align 保持对齐方向一致\n  const justifyContent = column.align === 'right' ? 'flex-end' : column.align === 'center' ? 'center' : 'flex-start'\n\n  return (\n    <div\n      onClick={onToggle}\n      style={{\n        display: 'flex',\n        justifyContent,\n        cursor: 'pointer',\n      }}\n    >\n      {/* 别忘记渲染原来的表头内容 */}\n      {children}\n\n      <span style={{ marginLeft: 4 }}>\n        {sortOrder === 'none' && <Row16 />}\n        {sortOrder === 'asc' && <ThumbsUp16 />}\n        {sortOrder === 'desc' && <ThumbsDown16 />}\n      </span>\n\n      {sortOptions.mode === 'multiple' && sortOrder !== 'none' && (\n        <span style={{ marginLeft: 4 }}>{sortIndex + 1}</span>\n      )}\n    </div>\n  )\n}\n\nexport function 自定义样式的排序表头() {\n  const { isLoading, dataSource: data } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [\n    { code: 'provinceName', name: '省份', width: 150, features: { sortable: true } },\n    { code: 'confirmedCount', name: '确诊', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'curedCount', name: '治愈', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'deadCount', name: '死亡', width: 100, render: amount, align: 'right', features: { sortable: true } },\n    { code: 'updateTime', name: '最后更新时间', width: 180, render: time },\n  ]\n\n  const [sorts, onChangeSorts] = useState<SortItem[]>([{ code: 'confirmedCount', order: 'desc' }])\n\n  const renderData = applyTransforms(\n    { columns, dataSource: data.slice(0, 5) },\n    makeSortTransform({\n      sorts,\n      onChangeSorts,\n      SortHeaderCell: CustomSortHeaderCell,\n    }),\n  )\n\n  return (\n    <div>\n      <div style={{ display: 'flex', alignItems: 'center', height: 40 }}>\n        <div style={{ marginLeft: 8 }}>通过示例 options.SortHeaderCell 可以自定义排序表头的样式/内容</div>\n        <button style={{ marginLeft: 16 }} onClick={() => onChangeSorts([])}>\n          清除排序\n        </button>\n      </div>\n      <ThemedBaseTable isLoading={isLoading} dataSource={renderData.dataSource} columns={renderData.columns} />\n    </div>\n  )\n}\n\nexport function 拖拽调整列宽() {\n  const { isLoading, dataSource: data } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [cols.provinceName, ...cols.indCols, cols.updateTime]\n\n  const defaultColumnWidth = 120\n  // 注意 columns 可能是嵌套的结构，这里使用 collectNodes 来获取所有叶子节点\n  // 同时注意部分列的 width 可能为空，此时可以用 defaultColumnWidth 作为列的宽度\n  const defaultSizes = collectNodes(columns, 'leaf-only').map((col) => col.width ?? defaultColumnWidth)\n  const [sizes, onChangeSizes] = useState(defaultSizes)\n\n  const renderData = applyTransforms(\n    { columns, dataSource: data.slice(0, 5) },\n    makeColumnResizeTransform({\n      sizes,\n      onChangeSizes,\n      appendExpander: true,\n      expanderVisibility: 'hidden',\n      disableUserSelectWhenResizing: true,\n      minSize: 60,\n      maxSize: 500,\n    }),\n  )\n\n  return (\n    <div>\n      <div style={{ display: 'flex', alignItems: 'center', height: 40 }}>\n        <div style={{ marginLeft: 8 }}>拖拽调整列宽</div>\n      </div>\n      <ThemedBaseTable\n        className=\"bordered\"\n        isLoading={isLoading}\n        dataSource={renderData.dataSource}\n        columns={renderData.columns}\n      />\n    </div>\n  )\n}\n\nexport function 自适应列宽_demo() {\n  const { isLoading, dataSource: rawDataSource } = useProvinceDataSource()\n\n  const columns: ArtColumn[] = [\n    // 注意要为 自适应宽度的列 设置 features.autoWidth=true\n    { code: 'provinceName', name: '省份', features: { autoWidth: true } },\n    { code: 'confirmedCount', name: '确诊', render: amount, align: 'right', features: { autoWidth: true } },\n    { code: 'curedCount', name: '治愈', render: amount, align: 'right', features: { autoWidth: true } },\n    { code: 'deadCount', name: '死亡 (列宽固定为 150)', width: 150, render: amount, align: 'right' },\n    { code: 'updateTime', name: '最后更新时间', features: { autoWidth: true } },\n  ]\n\n  const tableRef = useRef()\n  const [startIndex, setStartIndex] = useState(0)\n\n  const renderData = applyTransforms(\n    { columns, dataSource: rawDataSource.slice(startIndex, startIndex + 5) },\n\n    // 注意 useAutoWidthTransform 是一个 React hooks，要遵循 hooks 的用法规范\n    useAutoWidthTransform(\n      tableRef,\n      {\n        appendExpander: true,\n        expanderVisibility: 'hidden',\n        initColumnWidth: 100,\n      },\n      // deps=[data] 表示：每当 data 发生变化的时候，重新设置表格的列宽\n      // deps=[] 表示：只在 didMount 时重新设置一次列宽\n      // deps=undefined/null 表示：didMount 或每次 didUpdate 时都设置列宽\n      [rawDataSource, startIndex],\n    ),\n  )\n\n  return (\n    <div>\n      <p style={{ fontSize: 16 }}>\n        <code>useAutoWidthTransform</code> 会在 didMount/didUpdate\n        中获取单元格的实际内容宽度，然后重新设置表格列宽，实现「自适应列宽」。\n      </p>\n      <p style={{ fontSize: 14 }}>\n        useAutoWidthTransform 会频繁地从 DOM 中获取单元格的实际渲染宽度，单元格数量较多时会导致性能问题。\n        useAutoWidthTransform 不兼容「拖拽调整列宽」，不兼容「横向虚拟滚动」，不兼容存在 colSpan 的情况。\n        <b>谨慎使用，这里只提供 demo。</b>\n      </p>\n      <div style={{ margin: '12px 0' }}>\n        <button\n          onClick={() => {\n            setStartIndex(startIndex === 0 ? 5 : 0)\n          }}\n        >\n          切换数据\n        </button>\n      </div>\n      <ThemedBaseTable\n        ref={tableRef}\n        className=\"bordered\"\n        isLoading={isLoading}\n        dataSource={renderData.dataSource}\n        columns={renderData.columns}\n      />\n    </div>\n  )\n}\n",locationsMap:{"树状表格":{startLoc:{col:7,line:30},endLoc:{col:1,line:71},startBody:{col:7,line:30},endBody:{col:1,line:71}},"表格排序-多列":{startLoc:{col:7,line:73},endLoc:{col:1,line:108},startBody:{col:7,line:73},endBody:{col:1,line:108}},"表格排序-单列":{startLoc:{col:7,line:110},endLoc:{col:1,line:133},startBody:{col:7,line:110},endBody:{col:1,line:133}},"列高亮":{startLoc:{col:7,line:135},endLoc:{col:1,line:149},startBody:{col:7,line:135},endBody:{col:1,line:149}},"列的范围高亮":{startLoc:{col:7,line:151},endLoc:{col:1,line:242},startBody:{col:7,line:151},endBody:{col:1,line:242}},"列气泡提示":{startLoc:{col:7,line:244},endLoc:{col:1,line:307},startBody:{col:7,line:244},endBody:{col:1,line:307}},"树状模式与层级排序":{startLoc:{col:7,line:309},endLoc:{col:1,line:350},startBody:{col:7,line:309},endBody:{col:1,line:350}},"单元格自动合并":{startLoc:{col:7,line:352},endLoc:{col:1,line:390},startBody:{col:7,line:352},endBody:{col:1,line:390}},"自定义样式的排序表头":{startLoc:{col:7,line:421},endLoc:{col:1,line:454},startBody:{col:7,line:421},endBody:{col:1,line:454}},"拖拽调整列宽":{startLoc:{col:7,line:456},endLoc:{col:1,line:493},startBody:{col:7,line:456},endBody:{col:1,line:493}},"自适应列宽-demo":{startLoc:{col:7,line:495},endLoc:{col:1,line:557},startBody:{col:7,line:495},endBody:{col:1,line:557}}}}},title:"transforms 功能拓展（已过时）"};var transforms_stories_=function 树状表格(){var columns=[{code:"name",name:"数据维度",lock:!0,width:200},{code:"shop_name",name:"门店"},{code:"imp_uv_dau_pct",name:"曝光UV占DAU比例",render:format.c,align:"right"},{code:"app_qty_pbt",name:"APP件单价",align:"right"},{code:"all_app_trd_amt_1d",name:"APP成交金额汇总",align:"right"}],_useState2=transforms_stories_slicedToArray(Object(react.useState)({isLoading:!0,data:[]}),2),state=_useState2[0],setState=_useState2[1];Object(react.useEffect)((function(){Object(cdn_data.a)().then((function(data){setState({isLoading:!1,data:data})}))}),[]);var _useState4=transforms_stories_slicedToArray(Object(react.useState)(["B2C"]),2),openKeys=_useState4[0],onChangeOpenKeys=_useState4[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:state.data},makeBuildTreeTransform("id","parent_id"),Object(treeMode.a)({primaryKey:"id",openKeys:openKeys,onChangeOpenKeys:onChangeOpenKeys}));return react_default.a.createElement(themed_table.a,{dataSource:renderData.dataSource,columns:renderData.columns,isLoading:state.isLoading})};transforms_stories_.displayName="树状表格";var stories_transforms_stories_=function 表格排序_多列(){var _useProvinceDataSourc=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc.isLoading,dataSource=_useProvinceDataSourc.dataSource,columns=[{code:"provinceName",name:"省份",width:150,features:{sortable:!0}},{code:"confirmedCount",name:"确诊",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"curedCount",name:"治愈",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"deadCount",name:"死亡",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"updateTime",name:"最后更新时间",width:180,render:format.d}],_useState6=transforms_stories_slicedToArray(Object(react.useState)([{code:"deadCount",order:"asc"},{code:"confirmedCount",order:"desc"}]),2),sorts=_useState6[0],onChangeSorts=_useState6[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:dataSource},Object(sort.a)({sorts:sorts,onChangeSorts:onChangeSorts}));return react_default.a.createElement("div",null,react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",height:40}},react_default.a.createElement("div",{style:{marginLeft:8}},"点击表头的排序图标对表格数据进行排序"),react_default.a.createElement("button",{style:{marginLeft:16},onClick:function onClick(){return onChangeSorts([])}},"清除排序")),react_default.a.createElement(themed_table.a,{isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns}))};stories_transforms_stories_.displayName="表格排序_多列";var stories_transforms_stories_0=function 表格排序_单列(){var _useProvinceDataSourc2=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc2.isLoading,data=_useProvinceDataSourc2.dataSource,columns=[{code:"provinceName",name:"省份",width:150,features:{sortable:!0}},{code:"confirmedCount",name:"确诊",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"curedCount",name:"治愈",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"deadCount",name:"死亡",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"updateTime",name:"最后更新时间",width:180,render:format.d}],_useState8=transforms_stories_slicedToArray(Object(react.useState)([{code:"deadCount",order:"desc"}]),2),sorts=_useState8[0],onChangeSorts=_useState8[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:data.slice(0,5)},Object(sort.a)({sorts:sorts,onChangeSorts:onChangeSorts,mode:"single"}));return react_default.a.createElement(themed_table.a,{isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns})};stories_transforms_stories_0.displayName="表格排序_单列";var stories_transforms_stories_1=function 列高亮(){var _useProvinceDataSourc3=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc3.isLoading,data=_useProvinceDataSourc3.dataSource,_useState10=transforms_stories_slicedToArray(Object(react.useState)(-1),2),hoverColIndex=_useState10[0],onChangeHoverColIndex=_useState10[1],renderData=Object(applyTransforms.a)({columns:ncov19_assets.b,dataSource:data.slice(0,5)},Object(columnHover.a)({hoverColIndex:hoverColIndex,onChangeHoverColIndex:onChangeHoverColIndex}));return react_default.a.createElement(themed_table.a,{isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns})};stories_transforms_stories_1.displayName="列高亮";var stories_transforms_stories_2=function 列的范围高亮(){var appIndProto=proto.a.array({align:"right"}),rateIndProto=proto.a.array({align:"right",render:format.c}),columns=[{name:"维度",children:[{name:"商品信息",children:[{code:"sku_code",name:"SKU code"},{code:"sku_name",name:"SKU名称"}]},{name:"机构信息",children:[{code:"city_name",name:"城市"},{code:"shop_name",name:"门店",features:{defaultVisible:!0}}]},{name:"类目信息",children:[{code:"merge_cate_level1_name",name:"一级类目"},{code:"merge_cate_level2_name",name:"二级类目"},{code:"merge_cate_level3_name",name:"三级类目"}]}]},{name:"指标",children:[{name:"APP指标",children:appIndProto([{code:"imp_uv_dau_pct",name:"曝光UV占DAU比例",render:format.c},{code:"app_trd_amt_1d",name:"APP成交金额",render:format.a},{code:"app_qty_pbt",name:"APP件单价"},{code:"all_app_trd_amt_1d",name:"APP成交金额汇总"},{code:"app_trd_usr_cnt_1d",name:"APP成交用户数"},{code:"appout_shop_num",name:"缺货门店数",render:format.a},{code:"all_time_len",name:"店均缺货时长",render:format.a},{code:"bad_rmk_rate",name:"订单差评率",render:format.c}])},{name:"转换率",children:rateIndProto([{code:"all_imp2pay_rate",name:"整体曝光至成交转化率"},{code:"search_imp2pay_rate",name:"搜索曝光至成交转化率"},{code:"classis_imp2pay_rate",name:"分类曝光至成交转化率"},{code:"cart_imp2pay_rate",name:"购物车曝光至成交转化率"},{code:"my_page_imp2pay_rate",name:"我的曝光至成交转化率"},{code:"pq_act_imp2pay_rate",name:"活动页曝光至成交转化率"},{code:"other_imp2pay_rate",name:"其他曝光至成交转化率"}])}]}],_useState12=transforms_stories_slicedToArray(Object(react.useState)({isLoading:!0,data:[]}),2),state=_useState12[0],setState=_useState12[1];Object(react.useEffect)((function(){Object(cdn_data.a)().then((function(data){setState({isLoading:!1,data:data.slice(0,8)})}))}),[]);var _useState14=transforms_stories_slicedToArray(Object(react.useState)({start:0,end:0}),2),hoverRange=_useState14[0],onChangeHoverRange=_useState14[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:state.data},Object(columnRangeHover.a)({hoverRange:hoverRange,onChangeHoverRange:onChangeHoverRange}));return react_default.a.createElement(themed_table.a,{defaultColumnWidth:120,dataSource:renderData.dataSource,columns:renderData.columns,isLoading:state.isLoading})};stories_transforms_stories_2.displayName="列的范围高亮";var stories_transforms_stories_3=function 列气泡提示(){var _useProvinceDataSourc4=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc4.isLoading,data=_useProvinceDataSourc4.dataSource,theme=Object(react.useContext)(theme_helpers.b),_useState16=transforms_stories_slicedToArray(Object(react.useState)([]),2),sorts=_useState16[0],onChangeSorts=_useState16[1],columns=[{code:"provinceName",name:"省份",features:{tips:"省份，即我国的省级行政区，是行政地位与省相同行政区的总称，为一级行政区，包括省、自治区、直辖市、特别行政区。中国共计34个省级行政区，包括23个省、5个自治区、4个直辖市、2个特别行政区。"}},{code:"curedCount",name:"治愈",render:format.a,align:"right",features:{sortable:!0,tips:react_default.a.createElement("div",null,"治愈是汉字词语，英文cure; heal，注音zhì yù，使恢复健康。如：在骨折完全治愈之前不要上班。 治愈指动漫中温暖人心，净化心灵，悲伤时看能得到安慰，治愈自己心灵中的创伤、修补自己心灵上缺陷的作品。 也可以指动漫中人物，拥有对主角内心抚慰、平复内心创伤的能力。可以分为行动上和语言上的。")}},{code:"updateTime",name:"最后更新时间",render:format.d,features:{tips:react_default.a.createElement("div",null,"时间，是物质的运动、变化的持续性、顺序性的表现，包含时刻和时段两个概念。 时间是人类用以描述物质运动过程或事件发生过程的一个参数，确定时间，是靠不受外界影响的物质周期变化的规律。以地球自转为基础的时间计量系统称为世界时系统。日、月、年、世纪的时间计量属天文学中的历法范畴。 以地球自转运动为基础的时间单位称为“日”，以月球绕地球公转运动为基础的时间单位称为“月”，以地球绕太阳公转运动为基础的时间单位称为“年”。")}}],renderData=Object(applyTransforms.a)({columns:columns,dataSource:data.slice(0,3)},Object(sort.a)({mode:"single",sorts:sorts,onChangeSorts:onChangeSorts}),Object(tips.a)("antd"===theme?{Tooltip:tooltip.a}:{Balloon:balloon.a}));return react_default.a.createElement("div",null,react_default.a.createElement(themed_table.a,{isLoading:isLoading,dataSource:renderData.dataSource.slice(0,10),columns:renderData.columns}))};stories_transforms_stories_3.displayName="列气泡提示";var stories_transforms_stories_4=function 树状模式与层级排序(){var columns=[{code:"name",name:"数据维度",lock:!0,width:200},{code:"shop_name",name:"门店",features:{sortable:!0}},{code:"imp_uv_dau_pct",name:"曝光UV占DAU比例",render:format.c,align:"right",features:{sortable:!0}},{code:"app_qty_pbt",name:"APP件单价",align:"right",features:{sortable:!0}},{code:"all_app_trd_amt_1d",name:"APP成交金额汇总",align:"right",features:{sortable:!0}}],_useState18=transforms_stories_slicedToArray(Object(react.useState)({isLoading:!0,data:[]}),2),state=_useState18[0],setState=_useState18[1];Object(react.useEffect)((function(){Object(cdn_data.a)().then((function(data){setState({isLoading:!1,data:data})}))}),[]);var _useState20=transforms_stories_slicedToArray(Object(react.useState)(["B2C"]),2),openKeys=_useState20[0],onChangeOpenKeys=_useState20[1],_useState22=transforms_stories_slicedToArray(Object(react.useState)([]),2),sorts=_useState22[0],onChangeSorts=_useState22[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:state.data},makeBuildTreeTransform("id","parent_id"),Object(sort.a)({sorts:sorts,onChangeSorts:onChangeSorts,mode:"single",highlightColumnWhenActive:!0}),Object(treeMode.a)({primaryKey:"id",openKeys:openKeys,onChangeOpenKeys:onChangeOpenKeys,indentSize:20}));return react_default.a.createElement(themed_table.a,{defaultColumnWidth:100,dataSource:renderData.dataSource,columns:renderData.columns,isLoading:state.isLoading})};stories_transforms_stories_4.displayName="树状模式与层级排序";var stories_transforms_stories_5=function 单元格自动合并(){var _useCityDataSource=Object(ncov19_assets.d)(),cityData=_useCityDataSource.dataSource,isLoading=_useCityDataSource.isLoading,renderData=Object(applyTransforms.a)({dataSource:cityData.slice(0,3).flatMap((function(d){return d.children.slice(0,4)})),columns:[{code:"provinceName",name:"省份",width:150,features:{autoRowSpan:!0}},ncov19_assets.a.cityName].concat(_toConsumableArray(ncov19_assets.a.indCols.map((function(col){return Object.assign({},col,{features:{autoRowSpan:!0}})}))),[{code:"updateTime",name:"最后更新时间",width:180,render:format.d,features:{autoRowSpan:!0}}])},Object(autoRowSpan.a)());return react_default.a.createElement(themed_table.a,{isLoading:isLoading,useOuterBorder:!0,dataSource:renderData.dataSource,columns:renderData.columns})};function CustomSortHeaderCell(_ref){var column=_ref.column,sortOptions=_ref.sortOptions,sortIndex=_ref.sortIndex,children=_ref.children,onToggle=_ref.onToggle,sortOrder=_ref.sortOrder,justifyContent="right"===column.align?"flex-end":"center"===column.align?"center":"flex-start";return react_default.a.createElement("div",{onClick:onToggle,style:{display:"flex",justifyContent:justifyContent,cursor:"pointer"}},children,react_default.a.createElement("span",{style:{marginLeft:4}},"none"===sortOrder&&react_default.a.createElement(bucket_14.a,null),"asc"===sortOrder&&react_default.a.createElement(bucket_17.b,null),"desc"===sortOrder&&react_default.a.createElement(bucket_17.a,null)),"multiple"===sortOptions.mode&&"none"!==sortOrder&&react_default.a.createElement("span",{style:{marginLeft:4}},sortIndex+1))}stories_transforms_stories_5.displayName="单元格自动合并",CustomSortHeaderCell.displayName="CustomSortHeaderCell";var stories_transforms_stories_6=function 自定义样式的排序表头(){var _useProvinceDataSourc5=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc5.isLoading,data=_useProvinceDataSourc5.dataSource,columns=[{code:"provinceName",name:"省份",width:150,features:{sortable:!0}},{code:"confirmedCount",name:"确诊",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"curedCount",name:"治愈",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"deadCount",name:"死亡",width:100,render:format.a,align:"right",features:{sortable:!0}},{code:"updateTime",name:"最后更新时间",width:180,render:format.d}],_useState24=transforms_stories_slicedToArray(Object(react.useState)([{code:"confirmedCount",order:"desc"}]),2),sorts=_useState24[0],onChangeSorts=_useState24[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:data.slice(0,5)},Object(sort.a)({sorts:sorts,onChangeSorts:onChangeSorts,SortHeaderCell:CustomSortHeaderCell}));return react_default.a.createElement("div",null,react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",height:40}},react_default.a.createElement("div",{style:{marginLeft:8}},"通过示例 options.SortHeaderCell 可以自定义排序表头的样式/内容"),react_default.a.createElement("button",{style:{marginLeft:16},onClick:function onClick(){return onChangeSorts([])}},"清除排序")),react_default.a.createElement(themed_table.a,{isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns}))};stories_transforms_stories_6.displayName="自定义样式的排序表头";var stories_transforms_stories_7=function 拖拽调整列宽(){var _useProvinceDataSourc6=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc6.isLoading,data=_useProvinceDataSourc6.dataSource,columns=[ncov19_assets.a.provinceName].concat(_toConsumableArray(ncov19_assets.a.indCols),[ncov19_assets.a.updateTime]),defaultSizes=Object(collectNodes.a)(columns,"leaf-only").map((function(col){var _col$width;return null!==(_col$width=col.width)&&void 0!==_col$width?_col$width:120})),_useState26=transforms_stories_slicedToArray(Object(react.useState)(defaultSizes),2),sizes=_useState26[0],onChangeSizes=_useState26[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:data.slice(0,5)},makeColumnResizeTransform({sizes:sizes,onChangeSizes:onChangeSizes,appendExpander:!0,expanderVisibility:"hidden",disableUserSelectWhenResizing:!0,minSize:60,maxSize:500}));return react_default.a.createElement("div",null,react_default.a.createElement("div",{style:{display:"flex",alignItems:"center",height:40}},react_default.a.createElement("div",{style:{marginLeft:8}},"拖拽调整列宽")),react_default.a.createElement(themed_table.a,{className:"bordered",isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns}))};stories_transforms_stories_7.displayName="拖拽调整列宽";var transforms_stories_demo=function 自适应列宽_demo(){var _useProvinceDataSourc7=Object(ncov19_assets.e)(),isLoading=_useProvinceDataSourc7.isLoading,rawDataSource=_useProvinceDataSourc7.dataSource,columns=[{code:"provinceName",name:"省份",features:{autoWidth:!0}},{code:"confirmedCount",name:"确诊",render:format.a,align:"right",features:{autoWidth:!0}},{code:"curedCount",name:"治愈",render:format.a,align:"right",features:{autoWidth:!0}},{code:"deadCount",name:"死亡 (列宽固定为 150)",width:150,render:format.a,align:"right"},{code:"updateTime",name:"最后更新时间",features:{autoWidth:!0}}],tableRef=Object(react.useRef)(),_useState28=transforms_stories_slicedToArray(Object(react.useState)(0),2),startIndex=_useState28[0],setStartIndex=_useState28[1],renderData=Object(applyTransforms.a)({columns:columns,dataSource:rawDataSource.slice(startIndex,startIndex+5)},useAutoWidthTransform(tableRef,{appendExpander:!0,expanderVisibility:"hidden",initColumnWidth:100},[rawDataSource,startIndex]));return react_default.a.createElement("div",null,react_default.a.createElement("p",{style:{fontSize:16}},react_default.a.createElement("code",null,"useAutoWidthTransform")," 会在 didMount/didUpdate 中获取单元格的实际内容宽度，然后重新设置表格列宽，实现「自适应列宽」。"),react_default.a.createElement("p",{style:{fontSize:14}},"useAutoWidthTransform 会频繁地从 DOM 中获取单元格的实际渲染宽度，单元格数量较多时会导致性能问题。 useAutoWidthTransform 不兼容「拖拽调整列宽」，不兼容「横向虚拟滚动」，不兼容存在 colSpan 的情况。",react_default.a.createElement("b",null,"谨慎使用，这里只提供 demo。")),react_default.a.createElement("div",{style:{margin:"12px 0"}},react_default.a.createElement("button",{onClick:function onClick(){setStartIndex(0===startIndex?5:0)}},"切换数据")),react_default.a.createElement(themed_table.a,{ref:tableRef,className:"bordered",isLoading:isLoading,dataSource:renderData.dataSource,columns:renderData.columns}))};transforms_stories_demo.displayName="自适应列宽_demo"},1335:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return collectNodes}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var _isLeafNode__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(95);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function collectNodes(nodes,order){var result=[];return function dfs(nodes){var _step,_iterator=_createForOfIteratorHelper(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;Object(_isLeafNode__WEBPACK_IMPORTED_MODULE_13__.a)(node)?result.push(node):"pre"===order?(result.push(node),dfs(node.children)):"post"===order?(dfs(node.children),result.push(node)):dfs(node.children)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}(nodes),result}},1336:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return buildRecordMatrix})),__webpack_require__.d(__webpack_exports__,"a",(function(){return buildRecordMap}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(94),__webpack_require__(114),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(41),__webpack_require__(64),__webpack_require__(129),__webpack_require__(54),__webpack_require__(115),__webpack_require__(55);var _utils__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(95),_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(463),_utils_others__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(178),_buildDrillTree__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(374),_simpleEncode__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(225);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function fallbackAggregate(slice){return 1===slice.length?slice[0]:{}}function buildRecordMatrix(_ref){var data=_ref.data,leftCodes=_ref.leftCodes,topCodes=_ref.topCodes,_ref$aggregate=_ref.aggregate,aggregate=void 0===_ref$aggregate?fallbackAggregate:_ref$aggregate,_ref$encode=_ref.encode,encode=void 0===_ref$encode?_simpleEncode__WEBPACK_IMPORTED_MODULE_23__.a:_ref$encode,_ref$isLeftExpand=_ref.isLeftExpand,isLeftExpand=void 0===_ref$isLeftExpand?function(){return!0}:_ref$isLeftExpand,_ref$isTopExpand=_ref.isTopExpand,isTopExpand=void 0===_ref$isTopExpand?function(){return!0}:_ref$isTopExpand,prebuiltLeftTree=_ref.prebuiltLeftTree,prebuiltTopTree=_ref.prebuiltTopTree,ctx={peculiarity:new Set},leftRootDrillNode=_slicedToArray(null!=prebuiltLeftTree?prebuiltLeftTree:Object(_buildDrillTree__WEBPACK_IMPORTED_MODULE_22__.a)(data,leftCodes,{encode:encode,includeTopWrapper:!0,isExpand:isLeftExpand}),1)[0],topRootDrillNode=_slicedToArray(null!=prebuiltTopTree?prebuiltTopTree:Object(_buildDrillTree__WEBPACK_IMPORTED_MODULE_22__.a)(data,topCodes,{encode:encode,includeTopWrapper:!0,isExpand:isTopExpand}),1)[0];return function makeMatrix(rootRow){var result=new Map;return function dfsRow(matrix,row){var subMap=new Map;matrix.set(row.leftKey,subMap),function dfsCol(subMap,col){subMap.set(col.topKey,col.record),Object(_utils__WEBPACK_IMPORTED_MODULE_19__.a)(col)||col.children.forEach((function(childCol){dfsCol(subMap,childCol)}))}(subMap,row.col),Object(_utils__WEBPACK_IMPORTED_MODULE_19__.a)(row)||row.children.forEach((function(childRow){dfsRow(matrix,childRow)}))}(result,rootRow),result}(function buildByLeft(ctx,slice,drillNode,depth){var col,children=null;if(Object(_utils__WEBPACK_IMPORTED_MODULE_19__.a)(drillNode))col=function buildByTop(ctx,slice,drillNode,depth){var record,children=null;if(Object(_utils__WEBPACK_IMPORTED_MODULE_19__.a)(drillNode))record=aggregate(slice,ctx);else{children=[];var code=topCodes[depth],groups=Object(_utils__WEBPACK_IMPORTED_MODULE_20__.a)(slice,(function(dwdRow){return dwdRow[code]}));ctx.peculiarity.add(code);var _step2,_iterator2=_createForOfIteratorHelper(drillNode.children);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var child=_step2.value,group=groups[child.value];group&&children.push(buildByTop(ctx,group,child,depth+1))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}ctx.peculiarity.delete(code),record=aggregate(children.map((function(child){return child.record})),ctx)}return{topKey:drillNode.key,topValue:drillNode.value,children:children,record:record}}(ctx,slice,topRootDrillNode,0);else{children=[];var code=leftCodes[depth],groups=Object(_utils__WEBPACK_IMPORTED_MODULE_20__.a)(slice,(function(dwdRow){return dwdRow[code]}));ctx.peculiarity.add(code);var _step,_iterator=_createForOfIteratorHelper(drillNode.children);try{for(_iterator.s();!(_step=_iterator.n()).done;){var child=_step.value,group=groups[child.value];group&&children.push(buildByLeft(ctx,group,child,depth+1))}}catch(err){_iterator.e(err)}finally{_iterator.f()}ctx.peculiarity.delete(code),col=function mergeColsByTopTree(ctx,colsToMerge){return function dfs(ctx,cols,topDrillNode,depth){var children=null,record=aggregate(cols.map((function(c){return c.record})),ctx);if(!Object(_utils__WEBPACK_IMPORTED_MODULE_19__.a)(topDrillNode)){var topCode=topCodes[depth];ctx.peculiarity.add(topCode);var drillChildDict=Object(_utils_others__WEBPACK_IMPORTED_MODULE_21__.b)(topDrillNode.children.map((function(child){return[child.value,child]}))),colChildDictArray=cols.map((function(col){return Object(_utils_others__WEBPACK_IMPORTED_MODULE_21__.b)(col.children.map((function(child){return[child.topValue,child]})))}));children=topDrillNode.children.map((function(item){var childCols=colChildDictArray.map((function(colChildDict){return colChildDict[item.value]})).filter(Boolean);return dfs(ctx,childCols,drillChildDict[item.value],depth+1)})),ctx.peculiarity.delete(topCode)}return{topKey:topDrillNode.key,topValue:topDrillNode.value,record:record,children:children}}(ctx,colsToMerge,topRootDrillNode,0)}(ctx,children.map((function(child){return child.col})))}return{leftKey:drillNode.key,children:children,col:col}}(ctx,data,leftRootDrillNode,0))}function buildRecordMap(_ref6){var codes=_ref6.codes,_ref6$encode=_ref6.encode,encode=void 0===_ref6$encode?_simpleEncode__WEBPACK_IMPORTED_MODULE_23__.a:_ref6$encode,data=_ref6.data,aggregate=_ref6.aggregate,matrix=buildRecordMatrix({data:data,leftCodes:[],topCodes:codes,isTopExpand:_ref6.isExpand,aggregate:aggregate,encode:encode}),totalKey=encode([]);return matrix.get(totalKey)}},1337:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeTreeModeTransform}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(94),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(93),__webpack_require__(41),__webpack_require__(64),__webpack_require__(129),__webpack_require__(54),__webpack_require__(55);var classnames__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3),classnames__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_18__),react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_19__),_common_views__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(99),_internals__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(74),_utils__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(95),_utils__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(269);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var treeMetaSymbol=Symbol("treeMetaSymbol");function makeTreeModeTransform(_ref){var onChangeOpenKeys=_ref.onChangeOpenKeys,openKeys=_ref.openKeys,primaryKey=_ref.primaryKey,_ref$iconIndent=_ref.iconIndent,iconIndent=void 0===_ref$iconIndent?-6:_ref$iconIndent,_ref$iconGap=_ref.iconGap,iconGap=void 0===_ref$iconGap?0:_ref$iconGap,_ref$indentSize=_ref.indentSize,indentSize=void 0===_ref$indentSize?16:_ref$indentSize,_ref$isLeafNode=_ref.isLeafNode,isLeafNode=void 0===_ref$isLeafNode?_utils__WEBPACK_IMPORTED_MODULE_22__.a:_ref$isLeafNode,openKeySet=new Set(openKeys);return function(_ref2){var columns=_ref2.columns,dataSource=_ref2.dataSource;return{columns:function processColumns(columns){if(0===columns.length)return columns;var _columns=function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest()}(columns),firstCol=_columns[0],others=_columns.slice(1);return[Object.assign({},firstCol,{title:react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("span",{style:{marginLeft:iconIndent+16+iconGap}},_internals__WEBPACK_IMPORTED_MODULE_21__.a.safeRenderHeader(firstCol)),render:function render(value,record,recordIndex){var content=_internals__WEBPACK_IMPORTED_MODULE_21__.a.safeRender(firstCol,record,recordIndex);if(null==record[treeMetaSymbol])return content;var _record$treeMetaSymbo=record[treeMetaSymbol],depth=_record$treeMetaSymbo.depth,isLeaf=_record$treeMetaSymbo.isLeaf,expanded=_record$treeMetaSymbo.expanded,indent=iconIndent+depth*indentSize;if(isLeaf)return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_common_views__WEBPACK_IMPORTED_MODULE_20__.a,{className:"expansion-cell leaf"},react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement("span",{style:{marginLeft:indent+16+iconGap}},content));var expandCls=expanded?"expanded":"collapsed";return react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_common_views__WEBPACK_IMPORTED_MODULE_20__.a,{className:classnames__WEBPACK_IMPORTED_MODULE_18___default()("expansion-cell",expandCls)},react__WEBPACK_IMPORTED_MODULE_19___default.a.createElement(_common_views__WEBPACK_IMPORTED_MODULE_20__.c.CaretRight,{className:classnames__WEBPACK_IMPORTED_MODULE_18___default()("expansion-icon",expandCls),style:{marginLeft:indent,marginRight:iconGap}}),content)},getCellProps:function getCellProps(value,record,rowIndex){var _firstCol$getCellProp;if(null==record[treeMetaSymbol])return _internals__WEBPACK_IMPORTED_MODULE_21__.a.safeGetCellProps(firstCol,record,rowIndex);var onClick,_record$treeMetaSymbo2=record[treeMetaSymbol],isLeaf=_record$treeMetaSymbo2.isLeaf,rowKey=_record$treeMetaSymbo2.rowKey,expanded=_record$treeMetaSymbo2.expanded;isLeaf||(onClick=expanded?function onClick(){onChangeOpenKeys(openKeys.filter((function(key){return key!==rowKey})),rowKey,"collapse")}:function onClick(){onChangeOpenKeys([].concat(_toConsumableArray(openKeys),[rowKey]),rowKey,"expand")});var prevProps=null===(_firstCol$getCellProp=firstCol.getCellProps)||void 0===_firstCol$getCellProp?void 0:_firstCol$getCellProp.call(firstCol,value,record,rowIndex);return Object(_utils__WEBPACK_IMPORTED_MODULE_23__.a)(prevProps,{onClick:onClick,style:{cursor:isLeaf?void 0:"pointer"}})}})].concat(_toConsumableArray(others))}(columns),dataSource:function processDataSource(input){var result=[];return function dfs(nodes,depth){if(null==nodes)return;var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(nodes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _node=_step.value,rowKey=_node[primaryKey],expanded=openKeySet.has(rowKey),isLeaf=isLeafNode(_node,{depth:depth,expanded:expanded,rowKey:rowKey}),treeMeta={depth:depth,isLeaf:isLeaf,expanded:expanded,rowKey:rowKey};result.push(Object.assign((value=treeMeta,(key=treeMetaSymbol)in(obj={})?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj),_node)),!isLeaf&&expanded&&dfs(_node.children,depth+1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}var obj,key,value}(input,0),result}(dataSource)}}}function useTreeModeTransform(_ref3){var isLeafNode=_ref3.isLeafNode,indentSize=_ref3.indentSize,primaryKey=_ref3.primaryKey,_ref3$defaultOpenKeys=_ref3.defaultOpenKeys,defaultOpenKeys=void 0===_ref3$defaultOpenKeys?[]:_ref3$defaultOpenKeys,iconGap=_ref3.iconGap,iconIndent=_ref3.iconIndent,_useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_19__.useState)(defaultOpenKeys),2);return makeTreeModeTransform({indentSize:indentSize,primaryKey:primaryKey,isLeafNode:isLeafNode,iconGap:iconGap,iconIndent:iconIndent,openKeys:_useState2[0],onChangeOpenKeys:_useState2[1]})}try{makeTreeModeTransform.displayName="makeTreeModeTransform",makeTreeModeTransform.__docgenInfo={description:"",displayName:"makeTreeModeTransform",props:{primaryKey:{defaultValue:null,description:"",name:"primaryKey",required:!0,type:{name:"string"}},openKeys:{defaultValue:null,description:"",name:"openKeys",required:!0,type:{name:"string[]"}},onChangeOpenKeys:{defaultValue:null,description:"",name:"onChangeOpenKeys",required:!0,type:{name:'(nextKeys: string[], key: string, action: "expand" | "collapse") => void'}},isLeafNode:{defaultValue:null,description:"",name:"isLeafNode",required:!1,type:{name:"(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string; }) => boolean"}},iconIndent:{defaultValue:{value:-6},description:"icon 的缩进值，一般为负数，此时 icon 将向左偏移. 默认为 -6",name:"iconIndent",required:!1,type:{name:"number"}},iconGap:{defaultValue:{value:0},description:"icon 与右侧文本的距离，默认为 0",name:"iconGap",required:!1,type:{name:"number"}},indentSize:{defaultValue:{value:16},description:"每一级缩进产生的距离，默认为 16",name:"indentSize",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/treeMode.tsx#makeTreeModeTransform"]={docgenInfo:makeTreeModeTransform.__docgenInfo,name:"makeTreeModeTransform",path:"../ali-react-table/src/transforms/treeMode.tsx#makeTreeModeTransform"})}catch(__react_docgen_typescript_loader_error){}try{useTreeModeTransform.displayName="useTreeModeTransform",useTreeModeTransform.__docgenInfo={description:"",displayName:"useTreeModeTransform",props:{primaryKey:{defaultValue:null,description:"",name:"primaryKey",required:!0,type:{name:"string"}},isLeafNode:{defaultValue:null,description:"",name:"isLeafNode",required:!1,type:{name:"(node: any, nodeMeta: { depth: number; expanded: boolean; rowKey: string; }) => boolean"}},iconIndent:{defaultValue:null,description:"icon 的缩进值，一般为负数，此时 icon 将向左偏移. 默认为 -6",name:"iconIndent",required:!1,type:{name:"number"}},iconGap:{defaultValue:null,description:"icon 与右侧文本的距离，默认为 0",name:"iconGap",required:!1,type:{name:"number"}},indentSize:{defaultValue:null,description:"每一级缩进产生的距离，默认为 16",name:"indentSize",required:!1,type:{name:"number"}},defaultOpenKeys:{defaultValue:{value:"[]"},description:"",name:"defaultOpenKeys",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/treeMode.tsx#useTreeModeTransform"]={docgenInfo:useTreeModeTransform.__docgenInfo,name:"useTreeModeTransform",path:"../ali-react-table/src/transforms/treeMode.tsx#useTreeModeTransform"})}catch(__react_docgen_typescript_loader_error){}},1340:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getTreeDepth}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var _isLeafNode__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(95);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function getTreeDepth(nodes){var maxDepth=-1;return function dfs(columns,depth){var _step,_iterator=_createForOfIteratorHelper(columns);try{for(_iterator.s();!(_step=_iterator.n()).done;){var column=_step.value;Object(_isLeafNode__WEBPACK_IMPORTED_MODULE_13__.a)(column)?maxDepth=Math.max(maxDepth,depth):dfs(column.children,depth+1)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}(nodes,0),maxDepth}},1348:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeColumnHoverTransform}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(228),_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(95),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(269);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function makeColumnHoverTransform(_ref){var _ref$hoverColor=_ref.hoverColor,hoverColor=void 0===_ref$hoverColor?"var(--hover-bgcolor)":_ref$hoverColor,hoverColIndex=_ref.hoverColIndex,onChangeHoverColIndex=_ref.onChangeHoverColIndex;return Object(_utils__WEBPACK_IMPORTED_MODULE_15__.a)((function(col,_ref2){var range=_ref2.range;if(!Object(_utils__WEBPACK_IMPORTED_MODULE_16__.a)(col))return col;var colIndexMatched=range.start<=hoverColIndex&&hoverColIndex<range.end,prevGetCellProps=col.getCellProps;return Object.assign({},col,{getCellProps:function getCellProps(value,record,rowIndex){var prevCellProps=null==prevGetCellProps?void 0:prevGetCellProps(value,record,rowIndex);return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(prevCellProps,{style:{"--bgcolor":colIndexMatched?hoverColor:void 0},onMouseEnter:function onMouseEnter(){onChangeHoverColIndex(range.start)},onMouseLeave:function onMouseLeave(){onChangeHoverColIndex(-1)}})}})}))}function useColumnHoverTransform(){var _ref3=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},hoverColor=_ref3.hoverColor,_ref3$defaultHoverCol=_ref3.defaultHoverColIndex,defaultHoverColIndex=void 0===_ref3$defaultHoverCol?-1:_ref3$defaultHoverCol,_useState=Object(react__WEBPACK_IMPORTED_MODULE_14__.useState)(defaultHoverColIndex),_useState2=_slicedToArray(_useState,2),hoverColIndex=_useState2[0],onChangeHoverColIndex=_useState2[1];return makeColumnHoverTransform({hoverColor:hoverColor,hoverColIndex:hoverColIndex,onChangeHoverColIndex:onChangeHoverColIndex})}try{makeColumnHoverTransform.displayName="makeColumnHoverTransform",makeColumnHoverTransform.__docgenInfo={description:"",displayName:"makeColumnHoverTransform",props:{hoverColor:{defaultValue:{value:"var(--hover-bgcolor)"},description:"",name:"hoverColor",required:!1,type:{name:"string"}},hoverColIndex:{defaultValue:null,description:"",name:"hoverColIndex",required:!0,type:{name:"number"}},onChangeHoverColIndex:{defaultValue:null,description:"",name:"onChangeHoverColIndex",required:!0,type:{name:"(nextColIndex: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/columnHover.tsx#makeColumnHoverTransform"]={docgenInfo:makeColumnHoverTransform.__docgenInfo,name:"makeColumnHoverTransform",path:"../ali-react-table/src/transforms/columnHover.tsx#makeColumnHoverTransform"})}catch(__react_docgen_typescript_loader_error){}try{useColumnHoverTransform.displayName="useColumnHoverTransform",useColumnHoverTransform.__docgenInfo={description:"",displayName:"useColumnHoverTransform",props:{hoverColor:{defaultValue:null,description:"",name:"hoverColor",required:!1,type:{name:"string"}},defaultHoverColIndex:{defaultValue:{value:-1},description:"",name:"defaultHoverColIndex",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/columnHover.tsx#useColumnHoverTransform"]={docgenInfo:useColumnHoverTransform.__docgenInfo,name:"useColumnHoverTransform",path:"../ali-react-table/src/transforms/columnHover.tsx#useColumnHoverTransform"})}catch(__react_docgen_typescript_loader_error){}},1349:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeColumnRangeHoverTransform}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55),__webpack_require__(0);var _utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(228),_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(95),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(269);var EMPTY_RANGE={start:-1,end:-1};function makeColumnRangeHoverTransform(_ref){var _ref$hoverColor=_ref.hoverColor,hoverColor=void 0===_ref$hoverColor?"var(--hover-bgcolor)":_ref$hoverColor,_ref$headerHoverColor=_ref.headerHoverColor,headerHoverColor=void 0===_ref$headerHoverColor?"var(--header-hover-bgcolor)":_ref$headerHoverColor,hoverRange=_ref.hoverRange,onChangeHoverRange=_ref.onChangeHoverRange;return Object(_utils__WEBPACK_IMPORTED_MODULE_15__.a)((function(col,_ref2){var colRange=_ref2.range,match=colRange.end>hoverRange.start&&hoverRange.end>colRange.start;if(!Object(_utils__WEBPACK_IMPORTED_MODULE_16__.a)(col))return null==headerHoverColor?col:Object.assign({},col,{headerCellProps:Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(col.headerCellProps,{onMouseEnter:function onMouseEnter(){onChangeHoverRange(colRange)},onMouseLeave:function onMouseLeave(){onChangeHoverRange(EMPTY_RANGE)},style:{"--header-bgcolor":match?headerHoverColor:void 0}})});var prevGetCellProps=col.getCellProps;return Object.assign({},col,{headerCellProps:Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(col.headerCellProps,{onMouseEnter:function onMouseEnter(){onChangeHoverRange(colRange)},onMouseLeave:function onMouseLeave(){onChangeHoverRange(EMPTY_RANGE)},style:{"--header-bgcolor":match?headerHoverColor:void 0}}),getCellProps:function getCellProps(value,record,rowIndex){var prevCellProps=null==prevGetCellProps?void 0:prevGetCellProps(value,record,rowIndex);return Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(prevCellProps,{onMouseEnter:function onMouseEnter(){onChangeHoverRange(colRange)},onMouseLeave:function onMouseLeave(){onChangeHoverRange(EMPTY_RANGE)},style:{"--bgcolor":match?hoverColor:void 0}})}})}))}},1350:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeAutoRowSpanTransform}));__webpack_require__(65);var _internals__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(228),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(95);function isIdentity(x,y){return x===y}function makeAutoRowSpanTransform(){return Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)((function(col,_ref){var _col$features,dataSource=_ref.dataSource,range=_ref.range;if(!(null===(_col$features=col.features)||void 0===_col$features?void 0:_col$features.autoRowSpan))return col;if(!Object(_utils__WEBPACK_IMPORTED_MODULE_3__.a)(col))return col;for(var shouldMergeCell="function"==typeof col.features.autoRowSpan?col.features.autoRowSpan:isIdentity,spanRects=[],lastBottom=0,prevValue=null,prevRow=null,rowIndex=0;rowIndex<dataSource.length;rowIndex++){var row=dataSource[rowIndex],value=_internals__WEBPACK_IMPORTED_MODULE_1__.a.safeGetValue(col,row,rowIndex);if(0===rowIndex||!shouldMergeCell(prevValue,value,prevRow,row)){for(var spanRect={top:lastBottom,bottom:rowIndex,left:range.start,right:range.end},i=lastBottom;i<rowIndex;i++)spanRects.push(spanRect);lastBottom=rowIndex}prevValue=value,prevRow=row}for(var _i=lastBottom;_i<dataSource.length;_i++)spanRects.push({top:lastBottom,bottom:dataSource.length,left:range.start,right:range.end});return Object.assign({},col,{getSpanRect:function getSpanRect(value,row,rowIndex){return spanRects[rowIndex]}})}))}},1351:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeTipsTransform}));__webpack_require__(65);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(71),_common_views__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(99),_internals__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(74),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(228),HeaderCellWithTips=styled_components__WEBPACK_IMPORTED_MODULE_2__.b.div.withConfig({displayName:"tips__HeaderCellWithTips",componentId:"sc-12w2m9h-0"})(["display:flex;align-items:center;.tip-icon-wrapper{margin-left:2px;}.tip-icon{display:flex;fill:currentColor;}"]);function makeTipsTransform(_ref){var Balloon=_ref.Balloon,Tooltip=_ref.Tooltip;return Object(_utils__WEBPACK_IMPORTED_MODULE_5__.a)((function(col){var _col$features;if(!(null===(_col$features=col.features)||void 0===_col$features?void 0:_col$features.tips))return col;var justifyContent="right"===col.align?"flex-end":"center"===col.align?"center":"flex-start";return Object.assign({},col,{title:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(HeaderCellWithTips,{style:{justifyContent:justifyContent}},_internals__WEBPACK_IMPORTED_MODULE_4__.a.safeRenderHeader(col),Balloon?react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Balloon,{closable:!1,trigger:react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"tip-icon-wrapper"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_views__WEBPACK_IMPORTED_MODULE_3__.c.Info,{className:"tip-icon"}))},col.features.tips):react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(Tooltip,{title:col.features.tips},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div",{className:"tip-icon-wrapper"},react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement(_common_views__WEBPACK_IMPORTED_MODULE_3__.c.Info,{className:"tip-icon"}))))})}))}try{makeTipsTransform.displayName="makeTipsTransform",makeTipsTransform.__docgenInfo={description:"",displayName:"makeTipsTransform",props:{Balloon:{defaultValue:null,description:"",name:"Balloon",required:!1,type:{name:"any"}},Tooltip:{defaultValue:null,description:"",name:"Tooltip",required:!1,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/tips.tsx#makeTipsTransform"]={docgenInfo:makeTipsTransform.__docgenInfo,name:"makeTipsTransform",path:"../ali-react-table/src/transforms/tips.tsx#makeTipsTransform"})}catch(__react_docgen_typescript_loader_error){}},1352:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildTree}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(94),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var _others__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(178);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function buildTree(idProp,parentIdProp,items){var _step,wrapperMap=new Map,ensure=function ensure(id){if(wrapperMap.has(id))return wrapperMap.get(id);var wrapper={id:id,parent:null,item:null,children:[]};return wrapperMap.set(id,wrapper),wrapper},_iterator=_createForOfIteratorHelper(items);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,parentWrapper=ensure(item[parentIdProp]),itemWrapper=ensure(item[idProp]);itemWrapper.parent=parentWrapper,parentWrapper.children.push(itemWrapper),itemWrapper.item=item}}catch(err){_iterator.e(err)}finally{_iterator.f()}return function unwrapRecursively(wrapperArray){var _step2,result=[],_iterator2=_createForOfIteratorHelper(wrapperArray);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var wrapper=_step2.value;0===wrapper.children.length?result.push(wrapper.item):result.push(Object.assign({},wrapper.item,{children:unwrapRecursively(wrapper.children)}))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return result}(Object(_others__WEBPACK_IMPORTED_MODULE_16__.a)(Array.from(wrapperMap.values()).filter((function(wrapper){return null==wrapper.parent})),(function(wrapper){return wrapper.children})))}try{buildTree.displayName="buildTree",buildTree.__docgenInfo={description:"根据 idProp 与 parentIdProp 从对象数组中构建对应的树\n当 A[parentIdProp] === B[idProp] 时，对象A会被移动到对象B的children。\n当一个对象的 parentIdProp 不与其他对象的 idProp 字段相等时，该对象被作为树的顶层节点",displayName:"buildTree",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/utils/buildTree.tsx#buildTree"]={docgenInfo:buildTree.__docgenInfo,name:"buildTree",path:"../ali-react-table/src/utils/buildTree.tsx#buildTree"})}catch(__react_docgen_typescript_loader_error){}},1360:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return makeSortTransform}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(94),__webpack_require__(1329),__webpack_require__(67),__webpack_require__(128),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(328),__webpack_require__(63),__webpack_require__(59),__webpack_require__(143),__webpack_require__(65),__webpack_require__(105),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var react=__webpack_require__(0),react_default=__webpack_require__.n(react),styled_components_browser_esm=__webpack_require__(71),internals=__webpack_require__(74),isLeafNode=__webpack_require__(95),collectNodes=__webpack_require__(1335);__webpack_require__(319);function smartCompare(x,y){if(null==x)return 1;if(null==y)return-1;if("number"==typeof x&&"number"==typeof y)return x-y;if("string"==typeof x&&"string"==typeof y)return x<y?-1:x>y?1:0;if(Array.isArray(x)&&Array.isArray(y)){for(var len=Math.min(x.length,y.length),i=0;i<len;i++){var cmp=smartCompare(x[i],y[i]);if(0!==cmp)return cmp}return x.length-y.length}return 0}var mergeCellProps=__webpack_require__(269);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function SortIcon(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?32:_ref$size,style=_ref.style,className=_ref.className,order=_ref.order;return react_default.a.createElement("svg",{style:style,className:className,focusable:"false",preserveAspectRatio:"xMidYMid meet",width:size,height:size,viewBox:"0 0 32 32","aria-hidden":"true"},react_default.a.createElement("path",{fill:"asc"===order?"#23A3FF":"#bfbfbf",transform:"translate(0, 4)",d:"M8 8L16 0 24 8z"}),react_default.a.createElement("path",{fill:"desc"===order?"#23A3FF":"#bfbfbf",transform:"translate(0, -4)",d:"M24 24L16 32 8 24z "}))}function DefaultSortHeaderCell(_ref2){var children=_ref2.children,column=_ref2.column,onToggle=_ref2.onToggle,sortOrder=_ref2.sortOrder,sortIndex=_ref2.sortIndex,sortOptions=_ref2.sortOptions,justifyContent="right"===column.align?"flex-end":"center"===column.align?"center":"flex-start";return react_default.a.createElement(TableHeaderCell,{onClick:onToggle,style:{justifyContent:justifyContent}},children,react_default.a.createElement(SortIcon,{style:{userSelect:"none",marginLeft:2,flexShrink:0},size:16,order:sortOrder}),"multiple"===sortOptions.mode&&-1!=sortIndex&&react_default.a.createElement("div",{style:{userSelect:"none",marginLeft:2,color:"#666",flex:"0 0 auto",fontSize:10,fontFamily:"monospace"}},sortIndex+1))}SortIcon.displayName="SortIcon",DefaultSortHeaderCell.displayName="DefaultSortHeaderCell";var TableHeaderCell=styled_components_browser_esm.b.div.withConfig({displayName:"sort__TableHeaderCell",componentId:"zp001n-0"})(["cursor:pointer;display:flex;align-items:center;"]);function makeSortTransform(_ref3){var inputSorts=_ref3.sorts,inputOnChangeSorts=_ref3.onChangeSorts,_ref3$orders=_ref3.orders,orders=void 0===_ref3$orders?["desc","asc","none"]:_ref3$orders,_ref3$mode=_ref3.mode,mode=void 0===_ref3$mode?"multiple":_ref3$mode,_ref3$SortHeaderCell=_ref3.SortHeaderCell,SortHeaderCell=void 0===_ref3$SortHeaderCell?DefaultSortHeaderCell:_ref3$SortHeaderCell,keepDataSource=_ref3.keepDataSource,highlightColumnWhenActive=_ref3.highlightColumnWhenActive,filteredInputSorts=inputSorts.filter((function(s){return"none"!==s.order})),sorts="multiple"===mode?filteredInputSorts:filteredInputSorts.slice(0,1),onChangeSorts="multiple"===mode?inputOnChangeSorts:function(nextSorts){var len=nextSorts.length;inputOnChangeSorts(nextSorts.slice(len-1))},sortOptions={sorts:sorts,onChangeSorts:onChangeSorts,orders:orders,mode:mode,keepDataSource:keepDataSource,highlightColumnWhenActive:highlightColumnWhenActive},sortMap=new Map(sorts.map((function(sort,index){return[sort.code,Object.assign({index:index},sort)]})));return function(_ref4){var dataSource=_ref4.dataSource,columns=_ref4.columns;return{columns:function processColumns(columns){return columns.map((function dfs(col){var _col$features3,result=Object.assign({},col),sortable=col.code&&((null===(_col$features3=col.features)||void 0===_col$features3?void 0:_col$features3.sortable)||sortMap.has(col.code)),active=sortable&&sortMap.has(col.code);if(sortable){var sortIndex=-1,sortOrder="none";if(active){var _sortMap$get=sortMap.get(col.code),order=_sortMap$get.order,index=_sortMap$get.index;sortOrder=order,sortIndex=index,highlightColumnWhenActive&&(result.headerCellProps=Object(mergeCellProps.a)(col.headerCellProps,{style:{background:"var(--header-highlight-bgcolor)"}}),result.getCellProps=function(value,row,rowIndex){var prevCellProps=internals.a.safeGetCellProps(col,row,rowIndex);return Object(mergeCellProps.a)(prevCellProps,{style:{background:"var(--highlight-bgcolor)"}})})}result.title=react_default.a.createElement(SortHeaderCell,{onToggle:function onToggle(){return function toggle(code){var sort=sortMap.get(code);if(null==sort)onChangeSorts(sorts.concat([{code:code,order:orders[0]}]));else{var index=sorts.findIndex((function(s){return s.code===code})),_nextSorts=sorts.slice(0,index+1),nextOrder=function getNextOrder(order){var idx=orders.indexOf(order);return orders[idx===orders.length-1?0:idx+1]}(sort.order);"none"===nextOrder?_nextSorts.pop():_nextSorts[index]=Object.assign({},_nextSorts[index],{order:nextOrder}),onChangeSorts(_nextSorts)}}(col.code)},sortOrder:sortOrder,column:col,sortIndex:sortIndex,sortOptions:sortOptions},internals.a.safeRenderHeader(col))}Object(isLeafNode.a)(col)||(result.children=col.children.map(dfs));return result}))}(columns),dataSource:function processDataSource(dataSource){if(keepDataSource)return dataSource;var sortColumnsMap=new Map(Object(collectNodes.a)(columns,"leaf-only").filter((function(col){var _col$features2;return null!=(null===(_col$features2=col.features)||void 0===_col$features2?void 0:_col$features2.sortable)})).map((function(col){return[col.code,col]})));return function layeredSort(array,compare){return function dfs(rows){if(!Array.isArray(array))return array;return rows.map((function(row){return Object(isLeafNode.a)(row)?row:Object.assign({},row,{children:dfs(row.children)})})).sort(compare)}(array)}(dataSource,(function(x,y){var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(sorts);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref5=_step.value,code=_ref5.code,order=_ref5.order,column=sortColumnsMap.get(code);if(null!=column){var sortable=column.features.sortable,cmp=("function"==typeof sortable?sortable:smartCompare)(internals.a.safeGetValue(column,x,-1),internals.a.safeGetValue(column,y,-1));if(0!==cmp)return cmp*("asc"===order?1:-1)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return 0}))}(dataSource)}}}function useSortTransform(){var _ref6=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref6$defaultSorts=_ref6.defaultSorts,defaultSorts=void 0===_ref6$defaultSorts?[]:_ref6$defaultSorts,others=_objectWithoutProperties(_ref6,["defaultSorts"]),_useState=Object(react.useState)(defaultSorts),_useState2=_slicedToArray(_useState,2),sorts=_useState2[0],onChangeSorts=_useState2[1];return makeSortTransform(Object.assign({sorts:sorts,onChangeSorts:onChangeSorts},others))}try{makeSortTransform.displayName="makeSortTransform",makeSortTransform.__docgenInfo={description:"",displayName:"makeSortTransform",props:{sorts:{defaultValue:null,description:"排序字段列表",name:"sorts",required:!0,type:{name:"SortItem[]"}},onChangeSorts:{defaultValue:null,description:"更新排序字段列表的回调函数",name:"onChangeSorts",required:!0,type:{name:"(nextSorts: SortItem[]) => void"}},orders:{defaultValue:{value:"['desc', 'asc', 'none']"},description:"排序切换顺序",name:"orders",required:!1,type:{name:"SortOrder[]"}},mode:{defaultValue:{value:"multiple"},description:"排序模式。单选 single，多选 multiple，默认为多选",name:"mode",required:!1,type:{name:"enum",value:[{value:'"multiple"'},{value:'"single"'}]}},SortHeaderCell:{defaultValue:null,description:"自定义排序表头",name:"SortHeaderCell",required:!1,type:{name:"ComponentType<SortHeaderCellProps>"}},keepDataSource:{defaultValue:null,description:"是否保持 dataSource 不变",name:"keepDataSource",required:!1,type:{name:"boolean"}},highlightColumnWhenActive:{defaultValue:null,description:"排序激活时 是否高亮这一列的单元格",name:"highlightColumnWhenActive",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/sort.tsx#makeSortTransform"]={docgenInfo:makeSortTransform.__docgenInfo,name:"makeSortTransform",path:"../ali-react-table/src/transforms/sort.tsx#makeSortTransform"})}catch(__react_docgen_typescript_loader_error){}try{useSortTransform.displayName="useSortTransform",useSortTransform.__docgenInfo={description:"",displayName:"useSortTransform",props:{mode:{defaultValue:null,description:"排序模式。单选 single，多选 multiple，默认为多选",name:"mode",required:!1,type:{name:"enum",value:[{value:'"multiple"'},{value:'"single"'}]}},orders:{defaultValue:null,description:"排序切换顺序",name:"orders",required:!1,type:{name:"SortOrder[]"}},SortHeaderCell:{defaultValue:null,description:"自定义排序表头",name:"SortHeaderCell",required:!1,type:{name:"ComponentType<SortHeaderCellProps>"}},keepDataSource:{defaultValue:null,description:"是否保持 dataSource 不变",name:"keepDataSource",required:!1,type:{name:"boolean"}},highlightColumnWhenActive:{defaultValue:null,description:"排序激活时 是否高亮这一列的单元格",name:"highlightColumnWhenActive",required:!1,type:{name:"boolean"}},defaultSorts:{defaultValue:{value:"[]"},description:"",name:"defaultSorts",required:!1,type:{name:"SortItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/transforms/sort.tsx#useSortTransform"]={docgenInfo:useSortTransform.__docgenInfo,name:"useSortTransform",path:"../ali-react-table/src/transforms/sort.tsx#useSortTransform"})}catch(__react_docgen_typescript_loader_error){}},146:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AntdBaseTable})),__webpack_require__.d(__webpack_exports__,"g",(function(){return MinimumPivotTableDesigner})),__webpack_require__.d(__webpack_exports__,"e",(function(){return HippoBaseTable})),__webpack_require__.d(__webpack_exports__,"c",(function(){return theme_helpers.b})),__webpack_require__.d(__webpack_exports__,"d",(function(){return theme_helpers.c})),__webpack_require__.d(__webpack_exports__,"b",(function(){return theme_helpers.a})),__webpack_require__.d(__webpack_exports__,"f",(function(){return theme_helpers.d}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(51),__webpack_require__(63),__webpack_require__(65),__webpack_require__(288),__webpack_require__(93),__webpack_require__(237),__webpack_require__(289),__webpack_require__(41),__webpack_require__(290),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var table=__webpack_require__(229),styles=__webpack_require__(69),getTreeDepth=__webpack_require__(1340),spin=__webpack_require__(196),classnames=__webpack_require__(3),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__(0),react_default=__webpack_require__.n(react),styled_components_browser_esm=__webpack_require__(71);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var StyledBaseTable=Object(styled_components_browser_esm.b)(table.a).withConfig({displayName:"AntdBaseTable__StyledBaseTable",componentId:"sc-178izuu-0"})(["--highlight-bgcolor:#fafafa;--header-highlight-bgcolor:#f5f5f5;--lock-shadow:rgba(0,0,0,0.2) 0 0 10px 0px;--row-height:32px;--header-row-height:36px;--cell-padding:16px;--color:rgba(0,0,0,0.85);--header-color:rgba(0,0,0,0.85);--header-bgcolor:#fafafa;--hover-bgcolor:#fafafa;--header-hover-bgcolor:#f5f5f5;--line-height:1.5715;--font-size:14px;--border-color:#f0f0f0;td{transition:background 0.3s;}.","{.","{transition:box-shadow 0.3s;}}&:not(.bordered){--cell-border-vertical:none;--header-cell-border-vertical:none;thead > tr.first th{border-top:none;}}th{font-weight:500;}&.compact{--row-height:48px;--header-row-height:48px;--cell-padding:12px 8px;}"],styles.a.lockShadowMask,styles.a.lockShadow),AntEmptyContent=react_default.a.memo((function(){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"41",className:"ant-empty-img-simple",viewBox:"0 0 64 41"},react_default.a.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(0 1)"},react_default.a.createElement("ellipse",{cx:"32",cy:"33",className:"ant-empty-img-simple-ellipse",rx:"32",ry:"7"}),react_default.a.createElement("g",{fillRule:"nonzero",className:"ant-empty-img-simple-g"},react_default.a.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),react_default.a.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",className:"ant-empty-img-simple-path"})))),react_default.a.createElement("div",{className:"empty-tips",style:{marginTop:8,color:"rgba(0,0,0,.25)",fontSize:14}},"暂无数据"))})),AntdBaseTable_AntLoadingContentWrapper=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AntLoadingContentWrapper,_React$Component);var _super=_createSuper(AntLoadingContentWrapper);function AntLoadingContentWrapper(){return _classCallCheck(this,AntLoadingContentWrapper),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AntLoadingContentWrapper,[{key:"render",value:function render(){var _this$props=this.props,children=_this$props.children,visible=_this$props.visible;return react_default.a.createElement("div",{className:"ant-loading-content-wrapper",style:{opacity:visible?.6:void 0}},children)}}]),AntLoadingContentWrapper}(react_default.a.Component);function BlockSpin(){return react_default.a.createElement(spin.a,{style:{display:"block"}})}BlockSpin.displayName="BlockSpin";var AntdBaseTable=react_default.a.forwardRef((function(props,ref){var headerDepth=Object(getTreeDepth.a)(props.columns);return react_default.a.createElement(StyledBaseTable,_extends({ref:ref},props,{className:classnames_default()(props.className,{"header-depth-0":0===headerDepth,"header-depth-1":1===headerDepth}),components:Object.assign({EmptyContent:AntEmptyContent,LoadingContentWrapper:AntdBaseTable_AntLoadingContentWrapper,LoadingIcon:BlockSpin},props.components)}))}));try{AntdBaseTable.displayName="AntdBaseTable",AntdBaseTable.__docgenInfo={description:"Ant Design 基础表格组件\n\nAntdBaseTable 在 ali-react-table 提供的 BaseTable 基础上定制了默认的表格样式。",displayName:"AntdBaseTable",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/AntdBaseTable.tsx#AntdBaseTable"]={docgenInfo:AntdBaseTable.__docgenInfo,name:"AntdBaseTable",path:"../assets/src/AntdBaseTable.tsx#AntdBaseTable"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(118),__webpack_require__(75),__webpack_require__(94),__webpack_require__(191),__webpack_require__(84),__webpack_require__(59),__webpack_require__(143),__webpack_require__(211);var es_button=__webpack_require__(50),PivotTableDesignerDiv=styled_components_browser_esm.b.div.withConfig({displayName:"MinimumPivotTableDesigner__PivotTableDesignerDiv",componentId:"j0ga5v-0"})([".designer-row{height:36px;display:flex;align-items:center;.label{width:160px;}.prompt{color:#999;}.spare-dim{text-decoration:underline;margin-left:8px;cursor:pointer;:hover{outline:1px dashed #ccc;outline-offset:4px;}}}"]);function MinimumPivotTableDesigner(_ref){var dimensions=_ref.dimensions,leftCodes=_ref.leftCodes,topCodes=_ref.topCodes,indicatorSide=_ref.indicatorSide,onChangeIndicatorSide=_ref.onChangeIndicatorSide,onChangeLeftCodes=_ref.onChangeLeftCodes,onChangeTopCodes=_ref.onChangeTopCodes,showSubtotal=_ref.showSubtotal,onChangeShowSubtotal=_ref.onChangeShowSubtotal,showSupportsExpandToggle=_ref.showSupportsExpandToggle,supportsExpand=_ref.supportsExpand,onChangeSupportsExpand=_ref.onChangeSupportsExpand,dimMap=new Map(dimensions.map((function(dim){return[dim.code,dim]}))),spareDims=dimensions.filter((function(dim){return!leftCodes.includes(dim.code)&&!topCodes.includes(dim.code)}));return react_default.a.createElement(PivotTableDesignerDiv,null,react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"表格结构："),react_default.a.createElement(es_button.a.Group,null,react_default.a.createElement(es_button.a,{type:"left"===indicatorSide?"primary":"normal",onClick:function onClick(){return onChangeIndicatorSide("left")}},"指标放在左侧"),react_default.a.createElement(es_button.a,{type:"top"===indicatorSide?"primary":"normal",onClick:function onClick(){return onChangeIndicatorSide("top")}},"指标放在上方")),react_default.a.createElement(es_button.a.Group,{style:{marginLeft:16}},react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeShowSubtotal(!0)},type:showSubtotal?"primary":"normal"},"显示总计/小计"),react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeShowSubtotal(!1)},type:showSubtotal?"normal":"primary"},"隐藏总计/小计")),showSupportsExpandToggle&&react_default.a.createElement(es_button.a.Group,{style:{marginLeft:16}},react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeSupportsExpand(!0)},type:supportsExpand?"primary":"normal"},"开启展开/收拢"),react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeSupportsExpand(!1)},type:supportsExpand?"normal":"primary"},"关闭展开/收拢"))),react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"清空维度："),react_default.a.createElement(es_button.a.Group,null,react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeLeftCodes([])},disabled:0===leftCodes.length},"清空左侧维度"),react_default.a.createElement(es_button.a,{onClick:function onClick(){return onChangeTopCodes([])},disabled:0===topCodes.length},"清空上方维度"))),react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"左侧的维度序列："),0===leftCodes.length&&react_default.a.createElement("span",{className:"prompt"},"暂无维度"),leftCodes.map((function(code,i){return react_default.a.createElement(react_default.a.Fragment,{key:i},i>0&&react_default.a.createElement("span",{style:{margin:"0 4px"}},">"),react_default.a.createElement("span",null,dimMap.get(code).name))}))),react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"左侧的可添加的维度："),0===spareDims.length&&react_default.a.createElement("span",{className:"prompt"},"暂无维度"),spareDims.map((function(dim){return react_default.a.createElement("span",{key:dim.code,className:"spare-dim",onClick:function onClick(){return onChangeLeftCodes(leftCodes.concat([dim.code]))}},dim.name)}))),react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"上方维度序列："),0===topCodes.length&&react_default.a.createElement("span",{className:"prompt"},"暂无维度"),topCodes.map((function(code,i){return react_default.a.createElement(react_default.a.Fragment,{key:i},i>0&&react_default.a.createElement("span",{style:{margin:"0 4px"}},">"),react_default.a.createElement("span",null,dimMap.get(code).name))}))),react_default.a.createElement("div",{className:"designer-row"},react_default.a.createElement("span",{className:"label"},"上方的可添加的维度："),0===spareDims.length&&react_default.a.createElement("span",{className:"prompt"},"暂无维度"),spareDims.map((function(dim){return react_default.a.createElement("span",{key:dim.code,className:"spare-dim",onClick:function onClick(){return onChangeTopCodes(topCodes.concat([dim.code]))}},dim.name)}))))}MinimumPivotTableDesigner.displayName="MinimumPivotTableDesigner";try{MinimumPivotTableDesigner.displayName="MinimumPivotTableDesigner",MinimumPivotTableDesigner.__docgenInfo={description:"",displayName:"MinimumPivotTableDesigner",props:{dimensions:{defaultValue:null,description:"",name:"dimensions",required:!0,type:{name:"{ code: string; name: string; }[]"}},leftCodes:{defaultValue:null,description:"",name:"leftCodes",required:!0,type:{name:"string[]"}},topCodes:{defaultValue:null,description:"",name:"topCodes",required:!0,type:{name:"string[]"}},indicatorSide:{defaultValue:null,description:"",name:"indicatorSide",required:!0,type:{name:"string"}},onChangeIndicatorSide:{defaultValue:null,description:"",name:"onChangeIndicatorSide",required:!0,type:{name:"(side: string) => void"}},onChangeLeftCodes:{defaultValue:null,description:"",name:"onChangeLeftCodes",required:!0,type:{name:"(codes: string[]) => void"}},onChangeTopCodes:{defaultValue:null,description:"",name:"onChangeTopCodes",required:!0,type:{name:"(codes: string[]) => void"}},showSubtotal:{defaultValue:null,description:"",name:"showSubtotal",required:!0,type:{name:"boolean"}},onChangeShowSubtotal:{defaultValue:null,description:"",name:"onChangeShowSubtotal",required:!0,type:{name:"(show: boolean) => void"}},showSupportsExpandToggle:{defaultValue:null,description:"",name:"showSupportsExpandToggle",required:!1,type:{name:"boolean"}},supportsExpand:{defaultValue:null,description:"",name:"supportsExpand",required:!1,type:{name:"boolean"}},onChangeSupportsExpand:{defaultValue:null,description:"",name:"onChangeSupportsExpand",required:!1,type:{name:"(bool: boolean) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/MinimumPivotTableDesigner.tsx#MinimumPivotTableDesigner"]={docgenInfo:MinimumPivotTableDesigner.__docgenInfo,name:"MinimumPivotTableDesigner",path:"../assets/src/MinimumPivotTableDesigner.tsx#MinimumPivotTableDesigner"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(29),__webpack_require__(67),__webpack_require__(62),__webpack_require__(720);var common_views=__webpack_require__(99);function HippoBaseTable_extends(){return(HippoBaseTable_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function HippoBaseTable_typeof(obj){return(HippoBaseTable_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function HippoBaseTable_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function HippoBaseTable_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function HippoBaseTable_setPrototypeOf(o,p){return(HippoBaseTable_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function HippoBaseTable_createSuper(Derived){var hasNativeReflectConstruct=function HippoBaseTable_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=HippoBaseTable_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=HippoBaseTable_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return HippoBaseTable_possibleConstructorReturn(this,result)}}function HippoBaseTable_possibleConstructorReturn(self,call){return!call||"object"!==HippoBaseTable_typeof(call)&&"function"!=typeof call?function HippoBaseTable_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function HippoBaseTable_getPrototypeOf(o){return(HippoBaseTable_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var loadingIconRotate=Object(styled_components_browser_esm.c)(["from{transform:rotate(0deg);}to{transform:rotate(360deg);}"]),HippoBaseTable_StyledBaseTable=Object(styled_components_browser_esm.b)(table.a).withConfig({displayName:"HippoBaseTable__StyledBaseTable",componentId:"sc-1mi1n6i-0"})(["--row-height:50px;--header-row-height:36px;--border-color:#eee;--lock-shadow:rgba(56,88,207,0.12) 0 0 8px 4px;--cell-padding:8px 20px;--line-height:20px;--color:#666;--header-color:#333;--header-bgcolor:#f9f9f9;--hover-bgcolor:#eff3fb;--header-hover-bgcolor:#eff2fb;--highlight-bgcolor:#e2e6ef;--header-highlight-bgcolor:#e2e6ef;&.header-depth-1{--header-row-height:40px;}&.header-depth-0{--header-row-height:50px;}&:not(.bordered){--cell-border-vertical:none;--header-cell-border-vertical:none;thead > tr.first th{border-top:none;}thead > tr.last th{border-bottom:none;}}th{font-weight:500;}&.compact{--row-height:40px;--header-row-height:40px;--cell-padding:8px 16px;}&.zebra tr.odd,tr.alternative{--bgcolor:#f9f9f9;}"]),HippoEmptyContent=react_default.a.memo((function(){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("img",{alt:"hippo-table-empty",width:"160",height:"160",src:"https://img.alicdn.com/tfs/TB1s7zrWeL2gK0jSZFmXXc7iXXa-240-240.svg"}),react_default.a.createElement("div",{className:"empty-tips",style:{marginTop:-24}},"没有符合查询条件的数据",react_default.a.createElement("br",null),"请修改条件后重新查询"))})),HippoBaseTable_HippoLoadingContentWrapper=function(_React$Component){!function HippoBaseTable_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&HippoBaseTable_setPrototypeOf(subClass,superClass)}(HippoLoadingContentWrapper,_React$Component);var _super=HippoBaseTable_createSuper(HippoLoadingContentWrapper);function HippoLoadingContentWrapper(){var _this;HippoBaseTable_classCallCheck(this,HippoLoadingContentWrapper);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).handle=void 0,_this.state={warming:!1,prevVisible:!1},_this}return function HippoBaseTable_createClass(Constructor,protoProps,staticProps){return protoProps&&HippoBaseTable_defineProperties(Constructor.prototype,protoProps),staticProps&&HippoBaseTable_defineProperties(Constructor,staticProps),Constructor}(HippoLoadingContentWrapper,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this2=this;!prevProps.visible&&this.props.visible?this.handle=setTimeout((function(){_this2.setState({warming:!1})}),1e3):this.props.visible||clearTimeout(this.handle)}},{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.handle)}},{key:"render",value:function render(){var _this$props=this.props,visible=_this$props.visible,children=_this$props.children,warming=this.state.warming;return react_default.a.createElement("div",{className:"hippo-loading-content-wrapper",style:{filter:visible?warming?"blur(0.5px)":"blur(1px)":"none",transition:"filter 300ms cubic-bezier(0, 0.4, 0.6, 1)"}},children)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){return!state.prevVisible&&props.visible?{warming:!0,prevVisible:!0}:props.visible?null:{warming:!1,prevVisible:!1}}}]),HippoLoadingContentWrapper}(react_default.a.Component),StyledSvgIcon=Object(styled_components_browser_esm.b)(common_views.c.Loading).withConfig({displayName:"HippoBaseTable__StyledSvgIcon",componentId:"sc-1mi1n6i-1"})(["display:block;margin:auto;width:40px;height:40px;animation:1.5s linear 0s infinite ",";opacity:1;transition:opacity 300ms;"],loadingIconRotate),HippoLoadingIcon=react_default.a.memo((function(){var _useState2=_slicedToArray(Object(react.useState)(!1),2),show=_useState2[0],setShow=_useState2[1];return Object(react.useEffect)((function(){var handle=setTimeout((function(){setShow(!0)}),1e3);return function(){return clearTimeout(handle)}}),[]),react_default.a.createElement(StyledSvgIcon,{type:"loading",className:"hippo-table-loading",style:{opacity:show?1:0}})})),HippoBaseTable=react_default.a.forwardRef((function(props,ref){var headerDepth=Object(getTreeDepth.a)(props.columns);return react_default.a.createElement(HippoBaseTable_StyledBaseTable,HippoBaseTable_extends({ref:ref},props,{className:classnames_default()(props.className,{"header-depth-0":0===headerDepth,"header-depth-1":1===headerDepth}),components:Object.assign({EmptyContent:HippoEmptyContent,LoadingContentWrapper:HippoBaseTable_HippoLoadingContentWrapper,LoadingIcon:HippoLoadingIcon},props.components)}))}));try{HippoBaseTable.displayName="HippoBaseTable",HippoBaseTable.__docgenInfo={description:"Hippo Design 基础表格组件\n\nHippoBaseTable 在 ali-react-table 提供的 BaseTable 基础上定制了默认的表格样式。",displayName:"HippoBaseTable",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/HippoBaseTable.tsx#HippoBaseTable"]={docgenInfo:HippoBaseTable.__docgenInfo,name:"HippoBaseTable",path:"../assets/src/HippoBaseTable.tsx#HippoBaseTable"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(76),__webpack_require__(34),__webpack_require__(259);var theme_helpers=__webpack_require__(215);__webpack_require__(423),__webpack_require__(58),__webpack_require__(244),__webpack_require__(271);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function MockDataService_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return MockDataService_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||function MockDataService_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return MockDataService_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MockDataService_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MockDataService_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var fullData=[{key:"key:@total@",parentKey:null,name:"总计",childCount:1,a:126434.47,b:90437.96,c:86279.48,d:59811.81,lfl:.31,rate:.66}].concat(_toConsumableArray(makeSubData("杭州")),_toConsumableArray(makeSubData("上海")),_toConsumableArray(makeSubData("北京")),_toConsumableArray(makeSubData("武汉")),_toConsumableArray(makeSubData("成都")));function makeSubData(prefix){return[{key:"key:".concat(prefix),parentKey:"key:@total@",name:prefix,childCount:1,a:69665.75,b:46072.06,c:43819.82,d:30336.13,lfl:.37,rate:.65},{key:"key:".concat(prefix," 一季度"),parentKey:"key:".concat(prefix),name:"一季度",childCount:3,a:14438.76,b:9822.21,c:8724.7,d:5929.93,lfl:.39,rate:.6},{key:"key:".concat(prefix," 一季度 2022-01"),parentKey:"key:".concat(prefix," 一季度"),name:"2022-01",childCount:0,a:4349.64,b:3072.48,c:2412.92,d:1840.75,lfl:.44,rate:.59},{key:"key:".concat(prefix," 一季度 2022-02"),parentKey:"key:".concat(prefix," 一季度"),name:"2022-02",childCount:0,a:4873.01,b:3239.29,c:3072.48,d:1931.65,lfl:.36,rate:.59},{key:"key:".concat(prefix," 一季度 2022-03"),parentKey:"key:".concat(prefix," 一季度"),name:"2022-03",childCount:0,a:5216.1,b:3510.44,c:3239.29,d:2157.52,lfl:.37,rate:.61},{key:"key:".concat(prefix," 二季度"),parentKey:"key:".concat(prefix),name:"二季度",childCount:3,a:16870.42,b:10983.12,c:10585.88,d:7037.24,lfl:.37,rate:.64},{key:"key:".concat(prefix," 二季度 2022-04"),parentKey:"key:".concat(prefix," 二季度"),name:"2022-04",childCount:0,a:5214.15,b:3411.93,c:3510.44,d:2110.52,lfl:.32,rate:.61},{key:"key:".concat(prefix," 二季度 2022-05"),parentKey:"key:".concat(prefix," 二季度"),name:"2022-05",childCount:0,a:5749.32,b:3663.5,c:3411.93,d:2376.51,lfl:.4,rate:.64},{key:"key:".concat(prefix," 二季度 2022-06"),parentKey:"key:".concat(prefix," 二季度"),name:"2022-06",childCount:0,a:5906.94,b:3907.68,c:3663.5,d:2550.21,lfl:.37,rate:.65}]}function delay(ms,resolvedValue){return new Promise((function(resolve){setTimeout(resolve,ms,resolvedValue)}))}var MockTreeDataService=function(){function MockTreeDataService(){!function MockDataService_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,MockTreeDataService),this.count=0}var _loadNodeDataByParentKey,_loadRootNodeData;return function MockDataService_createClass(Constructor,protoProps,staticProps){return protoProps&&MockDataService_defineProperties(Constructor.prototype,protoProps),staticProps&&MockDataService_defineProperties(Constructor,staticProps),Constructor}(MockTreeDataService,[{key:"loadRootNodeData",value:(_loadRootNodeData=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var rootDataNode;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return rootDataNode=fullData.find((function(d){return null==d.parentKey})),_context.abrupt("return",delay(1e3,rootDataNode));case 2:case"end":return _context.stop()}}),_callee)}))),function loadRootNodeData(){return _loadRootNodeData.apply(this,arguments)})},{key:"loadNodeDataByParentKey",value:(_loadNodeDataByParentKey=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(parentKey){var slice;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return slice=fullData.filter((function(d){return d.parentKey==parentKey})),_context2.abrupt("return",delay([500,500,2e3,5e3,1e3,800,3e3][this.count++%7],slice));case 2:case"end":return _context2.stop()}}),_callee2,this)}))),function loadNodeDataByParentKey(_x){return _loadNodeDataByParentKey.apply(this,arguments)})}]),MockTreeDataService}();try{MockTreeDataService.displayName="MockTreeDataService",MockTreeDataService.__docgenInfo={description:"一个 mock 的树状数据服务，实际使用时要替换为相应的真实接口",displayName:"MockTreeDataService",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/MockDataService.tsx#MockTreeDataService"]={docgenInfo:MockTreeDataService.__docgenInfo,name:"MockTreeDataService",path:"../assets/src/MockDataService.tsx#MockTreeDataService"})}catch(__react_docgen_typescript_loader_error){}},178:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return flatMap})),__webpack_require__.d(__webpack_exports__,"b",(function(){return fromEntries}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(114),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(115),__webpack_require__(55);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function flatMap(array,callback){var result=[];return array.forEach((function(value,index){result.push.apply(result,_toConsumableArray(callback(value,index,array)))})),result}function fromEntries(entries){var _step,result={},_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(entries);try{for(_iterator.s();!(_step=_iterator.n()).done;){var _ref2=_slicedToArray(_step.value,2),key=_ref2[0],_value=_ref2[1];result[key]=_value}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}},203:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(43),__webpack_require__(53),__webpack_require__(114),__webpack_require__(58),__webpack_require__(84),__webpack_require__(65),__webpack_require__(105),__webpack_require__(41),__webpack_require__(115);var factorySymbol=Symbol("factory-symbol");function isProtoFactory(v){return v&&v[factorySymbol]}function proto(baseRecord){var ensureArray=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",baseKeys=Object.keys(baseRecord);function process(record){var result=Object.assign({},record);return baseKeys.forEach((function(key){if(result[key]!==proto.empty){var _result$key,base=baseRecord[key];if(isProtoFactory(base))result[key]=base(result[key]);else result[key]=null!==(_result$key=result[key])&&void 0!==_result$key?_result$key:base}else delete result[key]})),result}function factory(arg){return("auto"===ensureArray?Array.isArray(arg):ensureArray)?null==arg?[]:arg.map(process):process(arg)}return factory[factorySymbol]=!0,factory.extends=function(extRecord){var extFactory=proto(extRecord,ensureArray);return function(arg){return factory(extFactory(arg))}},factory}proto.empty=Symbol("proto.empty"),proto.string=function(v){if(null!=v&&"string"!=typeof v)throw new Error("must be string");return v},proto.string[factorySymbol]=!0,proto.number=function(v){if(null!=v&&"number"!=typeof v)throw new Error("must be number");return v},proto.number[factorySymbol]=!0,proto.notNull=function(v){if(null==v)throw new Error("must be not null");return v},proto.notNull[factorySymbol]=!0,proto.object=function(baseRecord){return proto(baseRecord,!1)},proto.array=function(baseRecord){return proto(baseRecord,!0)},__webpack_exports__.a=proto},215:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return BaseTableThemeContext})),__webpack_require__.d(__webpack_exports__,"a",(function(){return AntdStyles})),__webpack_require__.d(__webpack_exports__,"c",(function(){return FusionStyles})),__webpack_require__.d(__webpack_exports__,"d",(function(){return HippoStyles}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),react_helmet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(373),BaseTableThemeContext=react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext("default"),AntdStyles=function AntdStyles(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_helmet__WEBPACK_IMPORTED_MODULE_1__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"https://gw.alipayobjects.com/os/lib/antd/4.6.6/dist/antd.css"}))};AntdStyles.displayName="AntdStyles";var FusionStyles=function FusionStyles(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_helmet__WEBPACK_IMPORTED_MODULE_1__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"https://gw.alipayobjects.com/os/lib/alifd/next/1.21.6/dist/next.css"}))};FusionStyles.displayName="FusionStyles";var HippoStyles=function HippoStyles(){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_helmet__WEBPACK_IMPORTED_MODULE_1__.a,null,react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("link",{rel:"stylesheet",href:"https://gw.alipayobjects.com/os/lib/alife/hippo/2.12.11/dist/hippo.css"}))};HippoStyles.displayName="HippoStyles"},225:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return simpleEncode}));__webpack_require__(731);function simpleEncode(path){return 0===path.length?"key:@total@":"key:".concat(path.join(" "))}},228:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return traverseColumn}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var _isLeafNode__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(95);function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function traverseColumn(fn){return function(_ref){var columns=_ref.columns,dataSource=_ref.dataSource;return{dataSource:dataSource,columns:function dfs(columns,parentStartColIndex){var _step,flatColCount=0,result=[],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(columns);try{for(_iterator.s();!(_step=_iterator.n()).done;){var col=_step.value,startColIndex=parentStartColIndex+flatColCount,unNormalized=void 0;if(Object(_isLeafNode__WEBPACK_IMPORTED_MODULE_14__.a)(col))unNormalized=fn(col,{range:{start:startColIndex,end:startColIndex+1},dataSource:dataSource}),flatColCount+=1;else{var dfsResult=dfs(col.children,startColIndex);unNormalized=fn(Object.assign({},col,{children:dfsResult.result}),{range:{start:startColIndex,end:startColIndex+dfsResult.flatColCount},dataSource:dataSource}),flatColCount+=dfsResult.flatColCount}result.push.apply(result,_toConsumableArray(null==(input=unNormalized)?[]:Array.isArray(input)?input:[input]))}}catch(err){_iterator.e(err)}finally{_iterator.f()}var input;return{result:result,flatColCount:flatColCount}}(columns,0).result}}}},229:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return table_BaseTable}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(94),__webpack_require__(326),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(327),__webpack_require__(63),__webpack_require__(59),__webpack_require__(248),__webpack_require__(65),__webpack_require__(288),__webpack_require__(93),__webpack_require__(237),__webpack_require__(289),__webpack_require__(41),__webpack_require__(290),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var classnames=__webpack_require__(3),classnames_default=__webpack_require__.n(classnames),react=__webpack_require__(0),react_default=__webpack_require__.n(react),Subscription=__webpack_require__(119),BehaviorSubject=__webpack_require__(1356),of=__webpack_require__(1342),timer=__webpack_require__(1362),animationFrame=__webpack_require__(1358),combineLatest=__webpack_require__(1357),noop=__webpack_require__(1345),map=__webpack_require__(257),switchMap=__webpack_require__(1341),distinctUntilChanged=__webpack_require__(1343),filter=__webpack_require__(1344),internals=__webpack_require__(74),styles=__webpack_require__(69),DefaultEmptyContent=react_default.a.memo((function(){return react_default.a.createElement(react_default.a.Fragment,null,react_default.a.createElement("img",{alt:"empty-image",className:"empty-image",src:"//img.alicdn.com/tfs/TB1l1LcM3HqK1RjSZJnXXbNLpXa-50-50.svg"}),react_default.a.createElement("div",{className:"empty-tips"},"没有符合查询条件的数据",react_default.a.createElement("br",null),"请修改条件后重新查询"))}));function EmptyTable(_ref){var colgroup=_ref.colgroup,colSpan=_ref.colSpan,isLoading=_ref.isLoading,emptyCellHeight=_ref.emptyCellHeight,_ref$EmptyContent=_ref.EmptyContent,EmptyContent=void 0===_ref$EmptyContent?DefaultEmptyContent:_ref$EmptyContent,show=!isLoading;return react_default.a.createElement("table",null,colgroup,react_default.a.createElement("tbody",null,react_default.a.createElement("tr",{className:classnames_default()(styles.a.tableRow,"first","last","no-hover"),"data-rowindex":0},react_default.a.createElement("td",{className:classnames_default()(styles.a.tableCell,"first","last"),colSpan:colSpan,style:{height:null!=emptyCellHeight?emptyCellHeight:200}},show&&react_default.a.createElement("div",{className:styles.a.emptyWrapper},react_default.a.createElement(EmptyContent,null))))))}EmptyTable.displayName="EmptyTable";try{empty.displayName="empty",empty.__docgenInfo={description:"",displayName:"empty",props:{colgroup:{defaultValue:null,description:"",name:"colgroup",required:!0,type:{name:"ReactNode"}},colSpan:{defaultValue:null,description:"",name:"colSpan",required:!0,type:{name:"number"}},isLoading:{defaultValue:null,description:"",name:"isLoading",required:!0,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"",name:"emptyCellHeight",required:!1,type:{name:"number"}},EmptyContent:{defaultValue:null,description:"",name:"EmptyContent",required:!1,type:{name:"ComponentType<{}>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/empty.tsx#empty"]={docgenInfo:empty.__docgenInfo,name:"empty",path:"../ali-react-table/src/base-table/empty.tsx#empty"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(190),__webpack_require__(573),__webpack_require__(328),__webpack_require__(143);var isLeafNode=__webpack_require__(95),collectNodes=__webpack_require__(1335),defer=(__webpack_require__(114),__webpack_require__(1119),__webpack_require__(105),__webpack_require__(129),__webpack_require__(115),__webpack_require__(1361)),fromEvent=__webpack_require__(1339),scheduler_async=__webpack_require__(342),throttleTime=__webpack_require__(1363);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var STYLED_VERSION=null!=__webpack_require__(71).a?"v5":"v3",STYLED_REF_PROP="v3"===STYLED_VERSION?"innerRef":"ref";function sum(arr){var result=0;return arr.forEach((function(x){result+=x})),result}var scrollBarSize$,throttledWindowResize$=Object(defer.a)((function(){return Object(fromEvent.a)(window,"resize").pipe(Object(throttleTime.a)(150,scheduler_async.b,{leading:!0,trailing:!0}))}));function getScrollbarSizeImpl(){var scrollDiv=document.createElement("div");scrollDiv.style.position="absolute",scrollDiv.style.width="100px",scrollDiv.style.height="100px",scrollDiv.style.overflow="scroll",scrollDiv.style.top="-9999px",document.body.appendChild(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth,scrollbarHeight=scrollDiv.offsetHeight-scrollDiv.clientHeight;return document.body.removeChild(scrollDiv),{width:scrollbarWidth,height:scrollbarHeight}}function syncScrollLeft(elements,callback){var bypassSet=new Set;var _step2,subscription=new Subscription.a,_loop=function _loop(ele){var listener=function listener(){if(bypassSet.has(ele))bypassSet.delete(ele);else{var scrollLeft=ele.scrollLeft;!function publishScrollLeft(origin,scrollLeft){bypassSet.clear();var _step,_iterator=_createForOfIteratorHelper(elements);try{for(_iterator.s();!(_step=_iterator.n()).done;){var elem=_step.value;elem!==origin&&(elem.scrollLeft=scrollLeft,bypassSet.add(elem))}}catch(err){_iterator.e(err)}finally{_iterator.f()}}(ele,scrollLeft),callback(scrollLeft)}};ele.addEventListener("scroll",listener,{passive:!0}),subscription.add((function(){return ele.removeEventListener("scroll",listener)}))},_iterator2=_createForOfIteratorHelper(elements);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_loop(_step2.value)}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return subscription}function query(elem,className){return null==elem?void 0:elem.querySelector("."+className)}function shallowEqual(objA,objB){var hasOwnProperty=Object.prototype.hasOwnProperty;if(Object.is(objA,objB))return!0;if("object"!==_typeof(objA)||null===objA||"object"!==_typeof(objB)||null===objB)return!1;var keysA=Object.keys(objA),keysB=Object.keys(objB);if(keysA.length!==keysB.length)return!1;for(var i=0;i<keysA.length;i++)if(!hasOwnProperty.call(objB,keysA[i])||!Object.is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}try{sum.displayName="sum",sum.__docgenInfo={description:"",displayName:"sum",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/utils.tsx#sum"]={docgenInfo:sum.__docgenInfo,name:"sum",path:"../ali-react-table/src/base-table/utils.tsx#sum"})}catch(__react_docgen_typescript_loader_error){}try{syncScrollLeft.displayName="syncScrollLeft",syncScrollLeft.__docgenInfo={description:"同步多个元素之间的 scrollLeft, 每当 scrollLeft 发生变化时 callback 会被调用",displayName:"syncScrollLeft",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/utils.tsx#syncScrollLeft"]={docgenInfo:syncScrollLeft.__docgenInfo,name:"syncScrollLeft",path:"../ali-react-table/src/base-table/utils.tsx#syncScrollLeft"})}catch(__react_docgen_typescript_loader_error){}try{shallowEqual.displayName="shallowEqual",shallowEqual.__docgenInfo={description:"Performs equality by iterating through keys on an object and returning false\nwhen any key has values which are not strictly equal between the arguments.\nReturns true when the values of all keys are strictly equal.",displayName:"shallowEqual",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/utils.tsx#shallowEqual"]={docgenInfo:shallowEqual.__docgenInfo,name:"shallowEqual",path:"../ali-react-table/src/base-table/utils.tsx#shallowEqual"})}catch(__react_docgen_typescript_loader_error){}try{STYLED_VERSION.displayName="STYLED_VERSION",STYLED_VERSION.__docgenInfo={description:"styled-components 类库的版本，ali-react-table 同时支持 v3 和 v5",displayName:"STYLED_VERSION",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/utils.tsx#STYLED_VERSION"]={docgenInfo:STYLED_VERSION.__docgenInfo,name:"STYLED_VERSION",path:"../ali-react-table/src/base-table/utils.tsx#STYLED_VERSION"})}catch(__react_docgen_typescript_loader_error){}function getDerivedStateFromProps_typeof(obj){return(getDerivedStateFromProps_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function getDerivedStateFromProps_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function getDerivedStateFromProps_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return getDerivedStateFromProps_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return getDerivedStateFromProps_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function getDerivedStateFromProps_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function resolveVirtualEnabled(virtualEnum,defaultValue){return null==virtualEnum||"auto"===virtualEnum?defaultValue:virtualEnum}var columnHiddenDeprecatedWarned=!1;function warnColumnHiddenDeprecated(column){columnHiddenDeprecatedWarned||(columnHiddenDeprecatedWarned=!0,console.warn("[ali-react-table] column.hidden 已经过时，如果需要隐藏该列，请将其从 columns 数组中移除",column))}function getLeftNestedLockCount(columns){var _step2,nestedCount=0,_iterator2=getDerivedStateFromProps_createForOfIteratorHelper(columns);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){if(!isLock(_step2.value))break;nestedCount+=1}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return nestedCount;function isLock(col){return Object(isLeafNode.a)(col)?col.lock:col.lock||col.children.some(isLock)}}function getDerivedStateFromProps(props,state){var useVirtualProp=props.useVirtual,columnsProp=props.columns,dataSourceProp=props.dataSource,columns=function processColumns(columns,defaultColumnWidth){return null!=columns&&Array.isArray(columns)||(console.warn("[ali-react-table] <BaseTable /> props.columns 需要传入一个数组",columns),columns=[]),function dfs(columns){var _step,result=[],_iterator=getDerivedStateFromProps_createForOfIteratorHelper(columns);try{for(_iterator.s();!(_step=_iterator.n()).done;){var column=_step.value;if(null==column.width&&null!=defaultColumnWidth&&(column=Object.assign({},column,{width:defaultColumnWidth})),Object(isLeafNode.a)(column))column.hidden?warnColumnHiddenDeprecated(column):result.push(column);else{var nextChildren=dfs(column.children);nextChildren.length>0&&result.push(Object.assign({},column,{children:nextChildren}))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return result}(columns)}(columnsProp,props.defaultColumnWidth),leftNestedLockCount=getLeftNestedLockCount(columns),fullFlat=Object(collectNodes.a)(columns,"leaf-only");if(leftNestedLockCount===columns.length)return{flat:{left:[],right:[],full:fullFlat,center:fullFlat},nested:{left:[],right:[],full:columns,center:columns},useVirtual:{horizontal:!1,vertical:!1,header:!1},stickyLeftMap:new Map,stickyRightMap:new Map};for(var leftNested=columns.slice(0,leftNestedLockCount),rightNestedLockCount=getLeftNestedLockCount(columns.slice().reverse()),centerNested=columns.slice(leftNestedLockCount,columns.length-rightNestedLockCount),rightNested=columns.slice(columns.length-rightNestedLockCount),shouldEnableHozVirtual=fullFlat.length>=100&&fullFlat.every((function(col){return null!=col.width})),shouldEnableVerVirtual=dataSourceProp.length>=100,useVirtual="object"!==getDerivedStateFromProps_typeof(useVirtualProp)?{horizontal:resolveVirtualEnabled(useVirtualProp,shouldEnableHozVirtual),vertical:resolveVirtualEnabled(useVirtualProp,shouldEnableVerVirtual),header:resolveVirtualEnabled(useVirtualProp,!1)}:{horizontal:resolveVirtualEnabled(useVirtualProp.horizontal,shouldEnableHozVirtual),vertical:resolveVirtualEnabled(useVirtualProp.vertical,shouldEnableVerVirtual),header:resolveVirtualEnabled(useVirtualProp.header,shouldEnableVerVirtual)},flat={left:Object(collectNodes.a)(leftNested,"leaf-only"),full:fullFlat,right:Object(collectNodes.a)(rightNested,"leaf-only"),center:Object(collectNodes.a)(centerNested,"leaf-only")},fullFlatCount=flat.full.length,leftFlatCount=flat.left.length,rightFlatCount=flat.right.length,stickyLeftMap=new Map,stickyLeft=0,i=0;i<leftFlatCount;i++)stickyLeftMap.set(i,stickyLeft),stickyLeft+=flat.full[i].width;for(var stickyRightMap=new Map,stickyRight=0,_i=0;_i<rightFlatCount;_i++)stickyRightMap.set(fullFlatCount-1-_i,stickyRight),stickyRight+=flat.full[fullFlatCount-1-_i].width;return{flat:flat,nested:{left:leftNested,full:columns,right:rightNested,center:centerNested},useVirtual:useVirtual,stickyLeftMap:stickyLeftMap,stickyRightMap:stickyRightMap}}try{getDerivedStateFromProps.displayName="getDerivedStateFromProps",getDerivedStateFromProps.__docgenInfo={description:"",displayName:"getDerivedStateFromProps",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/getDerivedStateFromProps.tsx#getDerivedStateFromProps"]={docgenInfo:getDerivedStateFromProps.__docgenInfo,name:"getDerivedStateFromProps",path:"../ali-react-table/src/base-table/getDerivedStateFromProps.tsx#getDerivedStateFromProps"})}catch(__react_docgen_typescript_loader_error){}var getTreeDepth=__webpack_require__(1340);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return header_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||header_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function header_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return header_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?header_arrayLikeToArray(o,minLen):void 0}}function header_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function range(n){for(var array=[],i=0;i<n;i++)array.push(i);return array}function filterNestedCenter(centerNested,hoz,leftFlatCount){return function dfs(cols,startColIndex){var _step,leafCount=0,filtered=[],_iterator=function header_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=header_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(cols);try{for(_iterator.s();!(_step=_iterator.n()).done;){var col=_step.value,colIndex=startColIndex+leafCount;if(Object(isLeafNode.a)(col))leafCount+=1,leftFlatCount+hoz.leftIndex<=colIndex&&colIndex<leftFlatCount+hoz.rightIndex&&filtered.push({colIndex:colIndex,col:col});else{var dfsRes=dfs(col.children,colIndex);leafCount+=dfsRes.leafCount,dfsRes.filtered.length>0&&filtered.push({colIndex:colIndex,col:col,children:dfsRes.filtered})}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return{filtered:filtered,leafCount:leafCount}}(centerNested,leftFlatCount).filtered}function calculateLeveledAndFlat(inputNested,rowCount){for(var leveled=[],depth=0;depth<rowCount;depth++)leveled.push([]);var flat=[];return function dfs(input,depth){for(var leafCount=0,i=0;i<input.length;i++){var indexedCol=input[i];if(Object(isLeafNode.a)(indexedCol)){leafCount+=1;var wrapped={type:"normal",width:indexedCol.col.width,col:indexedCol.col,colIndex:indexedCol.colIndex,colSpan:1,isLeaf:!0};leveled[depth].push(wrapped),flat.push(wrapped)}else{var dfsRes=dfs(indexedCol.children,depth+1);leafCount+=dfsRes.leafCount,dfsRes.leafCount>0&&leveled[depth].push({type:"normal",width:indexedCol.col.width,col:indexedCol.col,colIndex:indexedCol.colIndex,colSpan:dfsRes.leafCount,isLeaf:!1})}}return{leafCount:leafCount}}(inputNested,0),{flat:flat,leveled:leveled}}function attachColIndex(inputNested,colIndexOffset){return function dfs(input,startColIndex){for(var result=[],leafCount=0,i=0;i<input.length;i++){var col=input[i],colIndex=startColIndex+leafCount;if(Object(isLeafNode.a)(col))leafCount+=1,result.push({colIndex:colIndex,col:col});else{var sub=dfs(col.children,colIndex);leafCount+=sub.leafCount,sub.leafCount>0&&result.push({col:col,colIndex:colIndex,children:sub.result})}}return{result:result,leafCount:leafCount}}(inputNested,colIndexOffset).result}function TableHeader(props){var nested=props.nested,flat=props.flat,stickyLeftMap=props.stickyLeftMap,stickyRightMap=props.stickyRightMap,rowCount=Object(getTreeDepth.a)(nested.full)+1,renderInfo=function calculateRenderInfo(_ref,rowCount){var flat=_ref.flat,nested=_ref.nested,hoz=_ref.hoz;if(_ref.useVirtual.header){var leftPart=calculateLeveledAndFlat(attachColIndex(nested.left,0),rowCount),centerPart=calculateLeveledAndFlat(filterNestedCenter(nested.center,hoz,flat.left.length),rowCount),rightPart=calculateLeveledAndFlat(attachColIndex(nested.right,flat.left.length+flat.center.length),rowCount);return{flat:[].concat(_toConsumableArray(leftPart.flat),[{type:"blank",width:hoz.leftBlank,blankSide:"left"}],_toConsumableArray(centerPart.flat),[{type:"blank",width:hoz.rightBlank,blankSide:"right"}],_toConsumableArray(rightPart.flat)),leveled:range(rowCount).map((function(depth){return[].concat(_toConsumableArray(leftPart.leveled[depth]),[{type:"blank",width:hoz.leftBlank,blankSide:"left"}],_toConsumableArray(centerPart.leveled[depth]),[{type:"blank",width:hoz.rightBlank,blankSide:"right"}],_toConsumableArray(rightPart.leveled[depth]))}))}}return calculateLeveledAndFlat(attachColIndex(nested.full,0),rowCount)}(props,rowCount),fullFlatCount=flat.full.length,leftFlatCount=flat.left.length,rightFlatCount=flat.right.length,thead=renderInfo.leveled.map((function(wrappedCols,level){var headerCells=wrappedCols.map((function(wrapped){if("normal"===wrapped.type){var _col$headerCellProps,_col$title,colIndex=wrapped.colIndex,colSpan=wrapped.colSpan,isLeaf=wrapped.isLeaf,col=wrapped.col,headerCellProps=null!==(_col$headerCellProps=col.headerCellProps)&&void 0!==_col$headerCellProps?_col$headerCellProps:{},positionStyle={};return colIndex<leftFlatCount?(positionStyle.position="sticky",positionStyle.left=stickyLeftMap.get(colIndex)):colIndex>=fullFlatCount-rightFlatCount&&(positionStyle.position="sticky",positionStyle.right=stickyRightMap.get(colIndex)),react_default.a.createElement("th",_extends({key:colIndex},headerCellProps,{className:classnames_default()(styles.a.tableHeaderCell,headerCellProps.className,{first:0===colIndex,last:colIndex+colSpan===fullFlatCount,"lock-left":colIndex<leftFlatCount,"lock-right":colIndex>=fullFlatCount-rightFlatCount}),colSpan:colSpan,rowSpan:isLeaf?rowCount-level:void 0,style:Object.assign({textAlign:col.align},headerCellProps.style,positionStyle)}),null!==(_col$title=col.title)&&void 0!==_col$title?_col$title:col.name)}return wrapped.width>0?react_default.a.createElement("th",{key:wrapped.blankSide}):null}));return react_default.a.createElement("tr",{key:level,className:classnames_default()(styles.a.tableHeaderRow,{first:0===level,last:level===rowCount-1})},headerCells)}));return react_default.a.createElement("table",null,react_default.a.createElement("colgroup",null,renderInfo.flat.map((function(wrapped){return"blank"===wrapped.type?wrapped.width>0?react_default.a.createElement("col",{key:wrapped.blankSide,style:{width:wrapped.width}}):null:react_default.a.createElement("col",{key:wrapped.colIndex,style:{width:wrapped.width}})}))),react_default.a.createElement("thead",null,thead))}TableHeader.displayName="TableHeader";try{header.displayName="header",header.__docgenInfo={description:"",displayName:"header",props:{nested:{defaultValue:null,description:"",name:"nested",required:!0,type:{name:"{ full: ArtColumn[]; left: ArtColumn[]; center: ArtColumn[]; right: ArtColumn[]; }"}},flat:{defaultValue:null,description:"",name:"flat",required:!0,type:{name:"{ full: ArtColumn[]; left: ArtColumn[]; center: ArtColumn[]; right: ArtColumn[]; }"}},useVirtual:{defaultValue:null,description:"",name:"useVirtual",required:!0,type:{name:"{ horizontal: boolean; vertical: boolean; header: boolean; }"}},hoz:{defaultValue:null,description:"",name:"hoz",required:!0,type:{name:"HorizontalRenderRange"}},stickyLeftMap:{defaultValue:null,description:"",name:"stickyLeftMap",required:!0,type:{name:"Map<number, number>"}},stickyRightMap:{defaultValue:null,description:"",name:"stickyRightMap",required:!0,type:{name:"Map<number, number>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/header.tsx#header"]={docgenInfo:header.__docgenInfo,name:"header",path:"../ali-react-table/src/base-table/header.tsx#header"})}catch(__react_docgen_typescript_loader_error){}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var ItemSizeStore_ItemSizeStore=function(){function ItemSizeStore(estimatedRowHeight){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ItemSizeStore),this.cache=[],this.estimatedRowHeight=void 0,this.estimatedRowHeight=estimatedRowHeight}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ItemSizeStore,[{key:"getRenderRangeWhenBelowView",value:function getRenderRangeWhenBelowView(itemCount){var start={topIndex:0,topBlank:0},end=this.getEnd(0,start,itemCount);return Object.assign({},start,end)}},{key:"getRenderRangeWhenAboveView",value:function getRenderRangeWhenAboveView(itemCount){var totalSize=this.getEstimatedTotalSize(itemCount),start=this.getStart(totalSize,itemCount),end=this.getEnd(totalSize,start,itemCount);return Object.assign({},start,end)}},{key:"getRenderRangeWhenInView",value:function getRenderRangeWhenInView(offset,maxRenderHeight,itemCount){var start=this.getStart(offset,itemCount),end=this.getEnd(offset+maxRenderHeight,start,itemCount);return Object.assign({},start,end)}},{key:"binarySearchStart",value:function binarySearchStart(searchOffset){for(var min=0,max=this.cache.length-1;min<max;){var middle=Math.ceil((min+max)/2);this.cache[middle].offset<=searchOffset?min=middle:max=middle-1}return max}},{key:"getStart",value:function getStart(offset,itemCount){if(0===this.cache.length)return{topIndex:0,topBlank:0};var maxBottom=this.getMaxBottom();if(maxBottom<offset){for(var lack=offset-maxBottom,maxLackCount=itemCount-this.cache.length,lackCount=Math.min(Math.floor(lack/this.estimatedRowHeight),maxLackCount),i=0,cntOffset=maxBottom;i<lackCount;i+=1,cntOffset+=this.estimatedRowHeight)this.cache.push({offset:cntOffset,size:this.estimatedRowHeight});var topIndex=this.cache.length-1,topBlank=this.cache[topIndex].offset;return this.overscanUpwards(topIndex,topBlank)}var _topIndex=this.binarySearchStart(offset),_topBlank=this.cache[_topIndex].offset;return this.overscanUpwards(_topIndex,_topBlank)}},{key:"overscanUpwards",value:function overscanUpwards(topIndex,topBlank){for(var overscanSize=0,overscanCount=0;overscanCount<topIndex&&overscanSize<100;)overscanCount+=1,overscanSize+=this.getItemSize(topIndex-overscanCount);return{topIndex:topIndex-overscanCount,topBlank:topBlank-overscanSize}}},{key:"getEnd",value:function getEnd(endOffset,startInfo,itemCount){for(var bottomIndex=startInfo.topIndex,offset=startInfo.topBlank;bottomIndex<itemCount&&offset<endOffset;)offset+=this.getItemSize(bottomIndex),bottomIndex+=1;var bottomBlank=this.getEstimatedTotalSize(itemCount)-offset;return this.overscanDownwards(bottomIndex,bottomBlank,itemCount)}},{key:"overscanDownwards",value:function overscanDownwards(bottomIndex,bottomBlank,itemCount){for(var overscanSize=0,overscanCount=0;overscanCount<itemCount-bottomIndex&&overscanSize<100;)overscanSize+=this.getItemSize(bottomIndex+overscanCount),overscanCount+=1;return{bottomIndex:bottomIndex+overscanCount,bottomBlank:bottomBlank-overscanSize}}},{key:"getItemSize",value:function getItemSize(index){return index<this.cache.length?this.cache[index].size:this.estimatedRowHeight}},{key:"setMaxItemCount",value:function setMaxItemCount(itemCount){itemCount<this.cache.length&&(this.cache.length=itemCount)}},{key:"updateItem",value:function updateItem(index,offset,size){this.cache[index]={offset:offset,size:size}}},{key:"getEstimatedTotalSize",value:function getEstimatedTotalSize(itemCount){var measuredTotalSize=0,measuredCount=0,size=this.cache.length;if(size>0){var lastItem=this.cache[size-1];measuredTotalSize=lastItem.offset+lastItem.size,measuredCount=size}return measuredTotalSize+(itemCount-measuredCount)*this.estimatedRowHeight}},{key:"getMaxBottom",value:function getMaxBottom(){if(0===this.cache.length)return 0;var item=this.cache[this.cache.length-1];return item.offset+item.size}}],[{key:"getFullRenderRange",value:function getFullRenderRange(itemCount){return{topIndex:0,topBlank:0,bottomIndex:itemCount,bottomBlank:0}}}]),ItemSizeStore}();function SpanManager_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var SpanManager=function(){function SpanManager(){!function SpanManager_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SpanManager),this.rects=[]}return function SpanManager_createClass(Constructor,protoProps,staticProps){return protoProps&&SpanManager_defineProperties(Constructor.prototype,protoProps),staticProps&&SpanManager_defineProperties(Constructor,staticProps),Constructor}(SpanManager,[{key:"testSkip",value:function testSkip(rowIndex,colIndex){return this.rects.some((function(_ref){var left=_ref.left,right=_ref.right,top=_ref.top,bottom=_ref.bottom;return left<=colIndex&&colIndex<right&&top<=rowIndex&&rowIndex<bottom}))}},{key:"stripUpwards",value:function stripUpwards(rowIndex){this.rects=this.rects.filter((function(rect){return rect.bottom>rowIndex}))}},{key:"add",value:function add(rowIndex,colIndex,colSpan,rowSpan){this.rects.push({left:colIndex,right:colIndex+colSpan,top:rowIndex,bottom:rowIndex+rowSpan})}}]),SpanManager}(),ResizeObserver_es=__webpack_require__(173),Observable=__webpack_require__(82),merge=__webpack_require__(1359);function getRect(ele){return ele===window?{left:0,top:0,bottom:window.innerHeight,right:window.innerWidth}:ele.getBoundingClientRect()}function fromResizeEvent(element){return element===window?Object(fromEvent.a)(element,"resize"):new Observable.a((function(subscriber){var resizeObserver=new ResizeObserver_es.default((function(){subscriber.next()}));return resizeObserver.observe(element),function(){resizeObserver.disconnect()}}))}function getVisiblePartObservable(target,flowRoot){return Object(merge.a)(Object(fromEvent.a)(flowRoot,"scroll"),fromResizeEvent(flowRoot),fromResizeEvent(target)).pipe(map.a((function(){return function getVisiblePart(target,flowRoot){var targetRect=getRect(target),rootRect=getRect(flowRoot);return{offsetY:Math.max(0,rootRect.top-targetRect.top),offsetX:Math.max(0,rootRect.left-targetRect.left),clipRect:{left:Math.max(targetRect.left,rootRect.left),top:Math.max(targetRect.top,rootRect.top),right:Math.min(targetRect.right,rootRect.right),bottom:Math.min(targetRect.bottom,rootRect.bottom)}}}(target,flowRoot)})))}var DefaultLoadingIcon=react_default.a.memo((function(){return react_default.a.createElement("svg",{style:{margin:"auto",display:"block",width:40,height:40},viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},react_default.a.createElement("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#23a7fa",strokeDasharray:"188 64",strokeLinecap:"round",strokeWidth:"10"},react_default.a.createElement("animateTransform",{attributeName:"transform",dur:"1.5s",keyTimes:"0;1",repeatCount:"indefinite",type:"rotate",values:"0 50 50;360 50 50"})))}));function DefaultLoadingContentWrapper(_ref){var children=_ref.children,visible=_ref.visible;return react_default.a.createElement("div",{className:"art-loading-content-wrapper",style:{filter:visible?"blur(1px)":"none"}},children)}function Loading(_ref2){var visible=_ref2.visible,children=_ref2.children,_ref2$LoadingContentW=_ref2.LoadingContentWrapper,LoadingContentWrapper=void 0===_ref2$LoadingContentW?DefaultLoadingContentWrapper:_ref2$LoadingContentW,_ref2$LoadingIcon=_ref2.LoadingIcon,LoadingIcon=void 0===_ref2$LoadingIcon?DefaultLoadingIcon:_ref2$LoadingIcon;return react_default.a.createElement("div",{className:styles.a.loadingWrapper},visible&&react_default.a.createElement("div",{className:styles.a.loadingIndicatorWrapper},react_default.a.createElement("div",{className:styles.a.loadingIndicator},react_default.a.createElement(LoadingIcon,null))),react_default.a.createElement(LoadingContentWrapper,{visible:visible,children:children}))}DefaultLoadingContentWrapper.displayName="DefaultLoadingContentWrapper",Loading.displayName="Loading";try{loading.displayName="loading",loading.__docgenInfo={description:"",displayName:"loading",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},LoadingContentWrapper:{defaultValue:null,description:"",name:"LoadingContentWrapper",required:!1,type:{name:"ComponentType<LoadingContentWrapperProps>"}},LoadingIcon:{defaultValue:null,description:"",name:"LoadingIcon",required:!1,type:{name:"ComponentType<{}>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/loading.tsx#loading"]={docgenInfo:loading.__docgenInfo,name:"loading",path:"../ali-react-table/src/base-table/loading.tsx#loading"})}catch(__react_docgen_typescript_loader_error){}function table_typeof(obj){return(table_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||table_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function table_extends(){return(table_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function table_toConsumableArray(arr){return function table_arrayWithoutHoles(arr){if(Array.isArray(arr))return table_arrayLikeToArray(arr)}(arr)||function table_iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||table_unsupportedIterableToArray(arr)||function table_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function table_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return table_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?table_arrayLikeToArray(o,minLen):void 0}}function table_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function table_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function table_createClass(Constructor,protoProps,staticProps){return protoProps&&table_defineProperties(Constructor.prototype,protoProps),staticProps&&table_defineProperties(Constructor,staticProps),Constructor}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==table_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var propsDotEmptyContentDeprecatedWarned=!1;var table_BaseTable=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(BaseTable,_React$Component);var _super=_createSuper(BaseTable);function BaseTable(props){var _this;return function table_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BaseTable),(_this=_super.call(this,props)).store=new ItemSizeStore_ItemSizeStore(_this.props.estimatedRowHeight),_this.artTableWrapperRef=react_default.a.createRef(),_this.doms=void 0,_this.rootSubscription=new Subscription.a,_this.data$=void 0,_this.state=Object.assign({},getDerivedStateFromProps(props),{hasScroll:!0,needRenderLock:!0,offsetY:0,offsetX:0,maxRenderHeight:600,maxRenderWidth:800}),_this}return table_createClass(BaseTable,[{key:"getDoms",value:function getDoms(){return this.doms}}]),table_createClass(BaseTable,[{key:"updateStickyScroll",value:function updateStickyScroll(){var _this$doms=this.doms,stickyScroll=_this$doms.stickyScroll,artTable=_this$doms.artTable,stickyScrollItem=_this$doms.stickyScrollItem;if(artTable){var innerTableWidth=artTable.querySelector(".".concat(styles.a.tableBody," table")).offsetWidth,artTableWidth=artTable.offsetWidth,scrollbarSize=function getScrollbarSize(){return null==scrollBarSize$&&(scrollBarSize$=new BehaviorSubject.a(getScrollbarSizeImpl()),throttledWindowResize$.pipe(Object(map.a)((function(){return getScrollbarSizeImpl()}))).subscribe(scrollBarSize$)),scrollBarSize$.value}();stickyScroll.style.marginTop="-".concat(scrollbarSize.height,"px"),artTableWidth>=innerTableWidth?this.state.hasScroll&&this.setState({hasScroll:!1}):!this.state.hasScroll&&scrollbarSize.height>5&&this.setState({hasScroll:!0}),stickyScrollItem.style.width="".concat(innerTableWidth,"px")}}},{key:"renderTableHeader",value:function renderTableHeader(_ref){var hoz=_ref.horizontal,_this$props=this.props,stickyTop=_this$props.stickyTop,hasHeader=_this$props.hasHeader,_this$state=this.state,flat=_this$state.flat,nested=_this$state.nested,useVirtual=_this$state.useVirtual,stickyLeftMap=_this$state.stickyLeftMap,stickyRightMap=_this$state.stickyRightMap;return react_default.a.createElement("div",{className:classnames_default()(styles.a.tableHeader,"no-scrollbar"),style:{top:0===stickyTop?void 0:stickyTop,display:hasHeader?void 0:"none"}},react_default.a.createElement(TableHeader,{nested:nested,flat:flat,hoz:hoz,useVirtual:useVirtual,stickyLeftMap:stickyLeftMap,stickyRightMap:stickyRightMap}))}},{key:"updateOffsetX",value:function updateOffsetX(nextOffsetX){this.state.useVirtual.horizontal&&Math.abs(nextOffsetX-this.state.offsetX)>=50&&this.setState({offsetX:nextOffsetX})}},{key:"syncHorizontalScrollFromTableBody",value:function syncHorizontalScrollFromTableBody(){this.syncHorizontalScroll(this.doms.tableBody.scrollLeft)}},{key:"syncHorizontalScroll",value:function syncHorizontalScroll(x){this.updateOffsetX(x);var _this$doms2=this.doms,tableBody=_this$doms2.tableBody,artTableWrapper=_this$doms2.artTableWrapper,flat=this.state.flat,showLeftLockShadow=flat.left.length>0&&this.state.needRenderLock&&x>0,leftLockShadow=query(artTableWrapper,styles.a.leftLockShadow);showLeftLockShadow?leftLockShadow.classList.add("show-shadow"):leftLockShadow.classList.remove("show-shadow");var showRightLockShadow=flat.right.length>0&&this.state.needRenderLock&&x<tableBody.scrollWidth-tableBody.clientWidth,rightLockShadow=query(artTableWrapper,styles.a.rightLockShadow);showRightLockShadow?rightLockShadow.classList.add("show-shadow"):rightLockShadow.classList.remove("show-shadow")}},{key:"getVerticalRenderRange",value:function getVerticalRenderRange(){var dataSource=this.props.dataSource,_this$state2=this.state,useVirtual=_this$state2.useVirtual,offsetY=_this$state2.offsetY,maxRenderHeight=_this$state2.maxRenderHeight,itemCount=dataSource.length;return useVirtual.vertical?maxRenderHeight<=0?offsetY<=0?this.store.getRenderRangeWhenBelowView(itemCount):this.store.getRenderRangeWhenAboveView(itemCount):this.store.getRenderRangeWhenInView(offsetY,maxRenderHeight,itemCount):ItemSizeStore_ItemSizeStore.getFullRenderRange(itemCount)}},{key:"getHorizontalRenderRange",value:function getHorizontalRenderRange(){var _this$state3=this.state,offsetX=_this$state3.offsetX,maxRenderWidth=_this$state3.maxRenderWidth,useVirtual=_this$state3.useVirtual,flat=_this$state3.flat;if(!useVirtual.horizontal)return{leftIndex:0,leftBlank:0,rightIndex:flat.full.length,rightBlank:0};for(var leftIndex=0,centerCount=0,leftBlank=0,centerRenderWidth=0,overscannedOffsetX=Math.max(0,offsetX-100);leftIndex<flat.center.length;){var col=flat.center[leftIndex];if(!(col.width+leftBlank<overscannedOffsetX))break;leftIndex+=1,leftBlank+=col.width}for(var minCenterRenderWidth=maxRenderWidth+(overscannedOffsetX-leftBlank)+200;leftIndex+centerCount<flat.center.length;){var _col=flat.center[leftIndex+centerCount];if(!(_col.width+centerRenderWidth<minCenterRenderWidth))break;centerRenderWidth+=_col.width,centerCount+=1}var rightBlankCount=flat.center.length-leftIndex-centerCount;return{leftIndex:leftIndex,leftBlank:leftBlank,rightIndex:leftIndex+centerCount,rightBlank:sum(flat.center.slice(flat.center.length-rightBlankCount).map((function(col){return col.width})))}}},{key:"getRenderRange",value:function getRenderRange(){return{vertical:this.getVerticalRenderRange(),horizontal:this.getHorizontalRenderRange()}}},{key:"getFlatHozWrappedCols",value:function getFlatHozWrappedCols(hoz){var flat=this.state.flat;return[].concat(table_toConsumableArray(flat.left.map((function(col,i){return{type:"normal",col:col,colIndex:i}}))),[hoz.leftBlank>0&&{type:"blank",blankSide:"left",width:hoz.leftBlank}],table_toConsumableArray(flat.center.slice(hoz.leftIndex,hoz.rightIndex).map((function(col,i){return{type:"normal",col:col,colIndex:flat.left.length+hoz.leftIndex+i}}))),[hoz.rightBlank>0&&{type:"blank",blankSide:"right",width:hoz.rightBlank}],table_toConsumableArray(flat.right.map((function(col,i){return{type:"normal",col:col,colIndex:flat.full.length-flat.right.length+i}})))).filter(Boolean)}},{key:"renderTableBody",value:function renderTableBody(renderRange){var ver=renderRange.vertical,hoz=renderRange.horizontal,_this$props2=this.props,dataSource=_this$props2.dataSource,getRowProps=_this$props2.getRowProps,primaryKey=_this$props2.primaryKey,isLoading=_this$props2.isLoading,emptyCellHeight=_this$props2.emptyCellHeight,wrappedCols=this.getFlatHozWrappedCols(hoz),colgroup=react_default.a.createElement("colgroup",null,wrappedCols.map((function(wrapped){return"blank"===wrapped.type?react_default.a.createElement("col",{key:wrapped.blankSide,style:{width:wrapped.width}}):react_default.a.createElement("col",{key:wrapped.colIndex,style:{width:wrapped.col.width}})})));if(ver.bottomIndex-ver.topIndex==0){var _this$props3=this.props,components=_this$props3.components,emptyContent=_this$props3.emptyContent,EmptyContent=components.EmptyContent;return null==EmptyContent&&null!=emptyContent&&(!function warnPropsDotEmptyContentIsDeprecated(){propsDotEmptyContentDeprecatedWarned||(propsDotEmptyContentDeprecatedWarned=!0,console.warn("[ali-react-table] BaseTable props.emptyContent 已经过时，请使用 props.components.EmptyContent 来自定义数据为空时的表格表现"))}(),EmptyContent=function EmptyContent(){return emptyContent}),react_default.a.createElement("div",{className:styles.a.tableBody},react_default.a.createElement(EmptyTable,{colgroup:colgroup,colSpan:wrappedCols.length,isLoading:isLoading,EmptyContent:EmptyContent,emptyCellHeight:emptyCellHeight}))}var _this$state4=this.state,flat=_this$state4.flat,stickyLeftMap=_this$state4.stickyLeftMap,stickyRightMap=_this$state4.stickyRightMap,fullFlatCount=flat.full.length,leftFlatCount=flat.left.length,rightFlatCount=flat.right.length,spanManager=new SpanManager,rows=dataSource.slice(ver.topIndex,ver.bottomIndex).map((function renderRow(record,i){var rowIndex=ver.topIndex+i;spanManager.stripUpwards(rowIndex);var rowProps=getRowProps(record,rowIndex),rowClass=classnames_default()(styles.a.tableRow,{first:0===rowIndex,last:rowIndex===dataSource.length-1,even:rowIndex%2==0,odd:rowIndex%2==1},null==rowProps?void 0:rowProps.className);return react_default.a.createElement("tr",table_extends({},rowProps,{className:rowClass,key:internals.a.safeGetRowKey(primaryKey,record,rowIndex),"data-rowindex":rowIndex}),wrappedCols.map((function(wrapped){return"blank"===wrapped.type?react_default.a.createElement("td",{key:wrapped.blankSide}):function renderCell(record,rowIndex,column,colIndex){var _column$getCellProps,_column$getCellProps2;if(spanManager.testSkip(rowIndex,colIndex))return null;var value=internals.a.safeGetValue(column,record,rowIndex),cellProps=null!==(_column$getCellProps=null===(_column$getCellProps2=column.getCellProps)||void 0===_column$getCellProps2?void 0:_column$getCellProps2.call(column,value,record,rowIndex))&&void 0!==_column$getCellProps?_column$getCellProps:{},cellContent=value;column.render&&(cellContent=column.render(value,record,rowIndex));var colSpan=1,rowSpan=1;if(column.getSpanRect){var spanRect=column.getSpanRect(value,record,rowIndex);colSpan=null==spanRect?1:spanRect.right-colIndex,rowSpan=null==spanRect?1:spanRect.bottom-rowIndex}else null!=cellProps.colSpan&&(colSpan=cellProps.colSpan),null!=cellProps.rowSpan&&(rowSpan=cellProps.rowSpan);rowSpan=Math.min(rowSpan,ver.bottomIndex-rowIndex);var hasSpan=(colSpan=Math.min(colSpan,leftFlatCount+hoz.rightIndex-colIndex))>1||rowSpan>1;hasSpan&&spanManager.add(rowIndex,colIndex,colSpan,rowSpan);var positionStyle={};colIndex<leftFlatCount?(positionStyle.position="sticky",positionStyle.left=stickyLeftMap.get(colIndex)):colIndex>=fullFlatCount-rightFlatCount&&(positionStyle.position="sticky",positionStyle.right=stickyRightMap.get(colIndex));return react_default.a.createElement("td",Object.assign({key:colIndex},cellProps,{className:classnames_default()(styles.a.tableCell,cellProps.className,{first:0===colIndex,last:colIndex+colSpan===fullFlatCount,"lock-left":colIndex<leftFlatCount,"lock-right":colIndex>=fullFlatCount-rightFlatCount})},hasSpan?{colSpan:colSpan,rowSpan:rowSpan}:null,{style:Object.assign({textAlign:column.align},cellProps.style,positionStyle)}),cellContent)}(record,rowIndex,wrapped.col,wrapped.colIndex)})))}));return react_default.a.createElement("div",{className:styles.a.tableBody},react_default.a.createElement("div",{key:"top-blank",className:classnames_default()(styles.a.virtualBlank,"top"),style:{height:ver.topBlank}}),react_default.a.createElement("table",null,colgroup,react_default.a.createElement("tbody",null,rows)),react_default.a.createElement("div",{key:"bottom-blank",className:classnames_default()(styles.a.virtualBlank,"bottom"),style:{height:ver.bottomBlank}}))}},{key:"isLock",value:function isLock(){var nested=this.state.nested;return nested.left.length>0||nested.right.length>0}},{key:"render",value:function render(){var _this2=this,_this$props4=this.props,dataSource=_this$props4.dataSource,className=_this$props4.className,style=_this$props4.style,hasHeader=_this$props4.hasHeader,useOuterBorder=_this$props4.useOuterBorder,isStickyHead=_this$props4.isStickyHead,isLoading=_this$props4.isLoading,components=_this$props4.components,flat=this.state.flat,renderRange=this.getRenderRange();return function styleWrapper(node){var artTableWrapperProps=function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({className:classnames_default()(styles.a.artTableWrapper,{"use-outer-border":useOuterBorder,sticky:isStickyHead,empty:0===dataSource.length,lock:_this2.isLock(),"has-header":hasHeader},className),style:style},STYLED_REF_PROP,_this2.artTableWrapperRef);return react_default.a.createElement(styles.c,artTableWrapperProps,node)}(react_default.a.createElement(Loading,{visible:isLoading,LoadingIcon:components.LoadingIcon,LoadingContentWrapper:components.LoadingContentWrapper},react_default.a.createElement("div",{className:styles.a.artTable},this.renderTableHeader(renderRange),this.renderTableBody(renderRange),react_default.a.createElement("div",{className:styles.a.lockShadowMask,style:{left:0,width:sum(flat.left.map((function(col){return col.width})))+styles.b}},react_default.a.createElement("div",{className:classnames_default()(styles.a.lockShadow,styles.a.leftLockShadow)})),react_default.a.createElement("div",{className:styles.a.lockShadowMask,style:{right:0,width:sum(flat.right.map((function(col){return col.width})))+styles.b}},react_default.a.createElement("div",{className:classnames_default()(styles.a.lockShadow,styles.a.rightLockShadow)}))),react_default.a.createElement("div",{className:styles.a.stickyScroll,style:{display:this.state.hasScroll?"block":"none",bottom:this.props.stickyBottom}},react_default.a.createElement("div",{className:styles.a.stickyScrollItem}))))}},{key:"componentDidMount",value:function componentDidMount(){this.updateDoms(),this.data$=new BehaviorSubject.a({props:this.props,state:this.state,prevProps:null,prevState:null}),this.initSubscriptions(),this.didMountOrUpdate()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){this.updateDoms(),this.data$.next({props:this.props,state:this.state,prevProps:prevProps,prevState:prevState}),this.didMountOrUpdate(prevProps,prevState)}},{key:"didMountOrUpdate",value:function didMountOrUpdate(prevProps,prevState){this.syncHorizontalScrollFromTableBody(),this.updateStickyScroll(),this.adjustNeedRenderLock(),this.updateItemSizeStoreAndTriggerRerenderIfNecessary(prevProps),this.resetStickyScrollIfNecessary(prevState)}},{key:"resetStickyScrollIfNecessary",value:function resetStickyScrollIfNecessary(prevState){null!=prevState&&this.state.hasScroll&&!prevState.hasScroll&&(this.doms.stickyScroll.scrollLeft=0)}},{key:"initSubscriptions",value:function initSubscriptions(){var _this3=this,_this$doms3=this.doms,tableHeader=_this$doms3.tableHeader,tableBody=_this$doms3.tableBody,stickyScroll=_this$doms3.stickyScroll;this.rootSubscription.add(throttledWindowResize$.subscribe((function(){_this3.updateStickyScroll(),_this3.adjustNeedRenderLock()}))),this.rootSubscription.add(syncScrollLeft([tableBody,stickyScroll,tableHeader],(function(scrollLeft){_this3.syncHorizontalScroll(scrollLeft)})));var visiblePart$=this.data$.pipe(map.a((function(data){return data.props.flowRoot})),switchMap.a((function(flowRoot){var wrapper=_this3.artTableWrapperRef.current;if("auto"===flowRoot){var computedStyle=getComputedStyle(wrapper);return Object(of.a)("visible"!==computedStyle.overflowY?wrapper:window)}return"self"===flowRoot?Object(of.a)(wrapper):"function"==typeof flowRoot?Object(timer.a)(0,animationFrame.a).pipe(map.a(flowRoot)):Object(of.a)(flowRoot)})),distinctUntilChanged.a()).pipe(switchMap.a((function(resolvedFlowRoot){return getVisiblePartObservable(_this3.doms.artTable,resolvedFlowRoot)})));this.rootSubscription.add(Object(combineLatest.a)([visiblePart$.pipe(map.a((function(p){return p.clipRect})),distinctUntilChanged.a(shallowEqual)),this.data$.pipe(filter.a((function(data){var _data$prevProps;return!(null===(_data$prevProps=data.prevProps)||void 0===_data$prevProps?void 0:_data$prevProps.isLoading)&&data.props.isLoading})))]).subscribe((function(_ref2){var clipRect=_slicedToArray(_ref2,1)[0],loadingIndicator=query(_this3.doms.artTableWrapper,styles.a.loadingIndicator);if(loadingIndicator){var height=clipRect.bottom-clipRect.top;loadingIndicator.style.top="".concat(height/2,"px"),loadingIndicator.style.marginTop="".concat(height/2,"px")}}))),this.rootSubscription.add(visiblePart$.pipe(filter.a((function(){var _this3$state$useVirtu=_this3.state.useVirtual,horizontal=_this3$state$useVirtu.horizontal,vertical=_this3$state$useVirtu.vertical;return horizontal||vertical})),map.a((function(_ref4){var clipRect=_ref4.clipRect,offsetY=_ref4.offsetY;return{maxRenderHeight:clipRect.bottom-clipRect.top,maxRenderWidth:clipRect.right-clipRect.left,offsetY:offsetY}})),distinctUntilChanged.a((function(x,y){return Math.abs(x.maxRenderWidth-y.maxRenderWidth)<50&&Math.abs(x.maxRenderHeight-y.maxRenderHeight)<50&&Math.abs(x.offsetY-y.offsetY)<50}))).subscribe((function(sizeAndOffset){_this3.setState(sizeAndOffset)})))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.rootSubscription.unsubscribe()}},{key:"updateDoms",value:function updateDoms(){var artTableWrapper=this.artTableWrapperRef.current,artTable=query(artTableWrapper,styles.a.artTable);this.doms={artTableWrapper:artTableWrapper,artTable:artTable,tableHeader:query(artTable,styles.a.tableHeader),tableBody:query(artTable,styles.a.tableBody),stickyScroll:query(artTableWrapper,styles.a.stickyScroll),stickyScrollItem:query(artTableWrapper,styles.a.stickyScrollItem)}}},{key:"updateItemSizeStoreAndTriggerRerenderIfNecessary",value:function updateItemSizeStoreAndTriggerRerenderIfNecessary(prevProps){var _virtualTop$clientHei;null!=prevProps&&prevProps.dataSource.length!==this.props.dataSource.length&&this.store.setMaxItemCount(this.props.dataSource.length);var _step,virtualTop=this.doms.artTable.querySelector(".".concat(styles.a.virtualBlank,".top")),virtualTopHeight=null!==(_virtualTop$clientHei=null==virtualTop?void 0:virtualTop.clientHeight)&&void 0!==_virtualTop$clientHei?_virtualTop$clientHei:0,maxTrRowIndex=-1,maxTrBottom=-1,_iterator=function table_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=table_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e3){didErr=!0,err=_e3},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(function queryAll(elem,className){return null==elem?void 0:elem.querySelectorAll("."+className)}(this.doms.artTable,styles.a.tableRow));try{for(_iterator.s();!(_step=_iterator.n()).done;){var tr=_step.value,_rowIndex=Number(tr.dataset.rowindex);if(!isNaN(_rowIndex)){maxTrRowIndex=Math.max(maxTrRowIndex,_rowIndex);var offset=tr.offsetTop+virtualTopHeight,size=tr.offsetHeight;maxTrBottom=Math.max(maxTrBottom,offset+size),this.store.updateItem(_rowIndex,offset,size)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}-1!==maxTrRowIndex&&(maxTrBottom<this.state.offsetY+this.state.maxRenderHeight&&this.getRenderRange().vertical.bottomIndex-1>maxTrRowIndex&&this.forceUpdate())}},{key:"adjustNeedRenderLock",value:function adjustNeedRenderLock(){var _this$state5=this.state,needRenderLock=_this$state5.needRenderLock,flat=_this$state5.flat;if(this.isLock()){var nextNeedRenderLock=sum(flat.full.map((function(col){return col.width})))>this.doms.artTable.clientWidth;needRenderLock!==nextNeedRenderLock&&this.setState({needRenderLock:nextNeedRenderLock})}else needRenderLock&&this.setState({needRenderLock:!1})}}]),BaseTable}(react_default.a.Component);table_BaseTable.defaultProps={isStickyHead:!0,stickyTop:0,stickyBottom:0,useVirtual:"auto",estimatedRowHeight:48,hasHeader:!0,isLoading:!1,components:{},getRowProps:noop.a,flowRoot:"auto"},table_BaseTable.getDerivedStateFromProps=getDerivedStateFromProps;try{table_BaseTable.displayName="BaseTable",table_BaseTable.__docgenInfo={description:"",displayName:"BaseTable",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:{value:"auto"},description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:{value:48},description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:{value:!0},description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:{value:0},description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:{value:0},description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:{value:!0},description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:{value:!1},description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:{value:"{}"},description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:{value:"auto"},description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/table.tsx#BaseTable"]={docgenInfo:table_BaseTable.__docgenInfo,name:"BaseTable",path:"../ali-react-table/src/base-table/table.tsx#BaseTable"})}catch(__react_docgen_typescript_loader_error){}try{table_BaseTable.getDerivedStateFromProps.displayName="BaseTable.getDerivedStateFromProps",table_BaseTable.getDerivedStateFromProps.__docgenInfo={description:"",displayName:"BaseTable.getDerivedStateFromProps",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/base-table/table.tsx#BaseTable.getDerivedStateFromProps"]={docgenInfo:table_BaseTable.getDerivedStateFromProps.__docgenInfo,name:"BaseTable.getDerivedStateFromProps",path:"../ali-react-table/src/base-table/table.tsx#BaseTable.getDerivedStateFromProps"})}catch(__react_docgen_typescript_loader_error){}},259:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RadioButtonGroup}));__webpack_require__(84);var _alifd_next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(50),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);function RadioButtonGroup(_ref){var dataSource=_ref.dataSource,value=_ref.value,onChange=_ref.onChange,style=_ref.style,className=_ref.className,size=_ref.size;return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_1__.a.Group,{style:style,className:className,size:size},dataSource.map((function(item){return react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_1__.a,{key:item.value,type:item.value===value?"primary":"normal",disabled:item.disabled,onClick:function onClick(){item.value!==value&&onChange(item.value)}},item.label)})))}RadioButtonGroup.displayName="RadioButtonGroup";try{RadioButtonGroup.displayName="RadioButtonGroup",RadioButtonGroup.__docgenInfo={description:"",displayName:"RadioButtonGroup",props:{dataSource:{defaultValue:null,description:"",name:"dataSource",required:!0,type:{name:"{ value: string; label: string; disabled?: boolean; }[]"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(nextValue: string) => void"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/RadioButtonGroup.tsx#RadioButtonGroup"]={docgenInfo:RadioButtonGroup.__docgenInfo,name:"RadioButtonGroup",path:"../assets/src/RadioButtonGroup.tsx#RadioButtonGroup"})}catch(__react_docgen_typescript_loader_error){}},269:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return mergeCellProps}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(51),__webpack_require__(65),__webpack_require__(105),__webpack_require__(41),__webpack_require__(54),__webpack_require__(55);var classnames__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(3),classnames__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_9__);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function composeEventHandler(handler1,handler2){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];handler1(args),handler2(args)}}function mergeCellProps(base,extra){if(null==base)return extra;if(null==extra)return base;for(var result=Object.assign({},base),_i=0,_Object$keys=Object.keys(extra);_i<_Object$keys.length;_i++){var key=_Object$keys[_i],value=extra[key],type=_typeof(value);if(null===value)result[key]=null;else if(void 0===value);else if("number"===type||"string"===type||"boolean"===type)result[key]="className"===key?classnames__WEBPACK_IMPORTED_MODULE_9___default()(result[key],value):value;else if("function"===type){var prev=result[key];result[key]=null==prev?value:composeEventHandler(prev,value)}else"object"===type&&(result[key]=Object.assign({},result[key],value))}return result}},29:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return amount})),__webpack_require__.d(__webpack_exports__,"d",(function(){return time})),__webpack_require__.d(__webpack_exports__,"c",(function(){return ratio})),__webpack_require__.d(__webpack_exports__,"b",(function(){return lfl}));__webpack_require__(248);var numeral__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(147),numeral__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(numeral__WEBPACK_IMPORTED_MODULE_1__),moment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(16),moment__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_2__),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__),plain=function plain(v){return"-"===v||null==v?"-":String(v)},amount0=function amount0(v){return"-"===v||null==v?"-":numeral__WEBPACK_IMPORTED_MODULE_1___default()(v).format("0,0")},amount=amount0;function time(d){return moment__WEBPACK_IMPORTED_MODULE_2___default()(d,"YYYY-MM-DD HH:mm:ss.sss").format("YYYY年MM月DD日 HH:mm:ss")}var amount1=function amount1(v){return"-"===v||null==v?"-":numeral__WEBPACK_IMPORTED_MODULE_1___default()(v).format("0,0.0")},amount2=function amount2(v){return"-"===v||null==v?"-":numeral__WEBPACK_IMPORTED_MODULE_1___default()(v).format("0,0.00")},ratio=function ratio(v){return"-"===v||null==v?"-":numeral__WEBPACK_IMPORTED_MODULE_1___default()(v).format("0.00%")},BeautifulUpIcon=Object(react__WEBPACK_IMPORTED_MODULE_3__.memo)((function(_ref){var _ref$size=_ref.size,size=void 0===_ref$size?12:_ref$size,style=_ref.style;return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("svg",{viewBox:"0 0 1024 1024",width:size,height:size,fill:"currentColor",style:style},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("path",{d:"M682.667 512v426.667H341.333V512h-256L512 0l426.667 512h-256z"}))})),BeautifulDownIcon=Object(react__WEBPACK_IMPORTED_MODULE_3__.memo)((function(_ref2){var _ref2$size=_ref2.size,size=void 0===_ref2$size?12:_ref2$size,style=_ref2.style;return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("svg",{viewBox:"0 0 1024 1024",width:size,height:size,fill:"currentColor",style:style},react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("path",{d:"M682.667 426.667V0H341.333v426.667h-256l426.667 512 426.667-512h-256z"}))})),lfl=function lfl(value){return null==value||"-"===value||isNaN(value)||value===1/0||value===-1/0?render("-"):render((value=Number(value))>0?react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span",{style:{color:"#f4485c"}},numeral__WEBPACK_IMPORTED_MODULE_1___default()(value).format("0.00%")),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(BeautifulUpIcon,{style:{marginLeft:4,color:"#f4485c"}})):value<0?react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_3___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span",{style:{color:"#00a854"}},numeral__WEBPACK_IMPORTED_MODULE_1___default()(value).format("0.00%")),react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement(BeautifulDownIcon,{style:{marginLeft:4,color:"#00a854"}})):react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("span",{style:{color:"#838383"}},"0"));function render(children){return react__WEBPACK_IMPORTED_MODULE_3___default.a.createElement("div",{className:"lfl-cell",style:{display:"inline-flex",alignItems:"center",justifyContent:"flex-end"}},children)}},money=function money(v){return"-"===v||null==v?"-":(v=Number(v))<0?"-".concat(money(-v)):0===v?String(v):v<1e4?numeral__WEBPACK_IMPORTED_MODULE_1___default()(v).format("0,0"):v<1e5?"".concat(numeral__WEBPACK_IMPORTED_MODULE_1___default()(v/1e4).format("0.0"),"万"):v<1e8?"".concat(numeral__WEBPACK_IMPORTED_MODULE_1___default()(v/1e4).format("0"),"万"):"".concat(v<1e9?numeral__WEBPACK_IMPORTED_MODULE_1___default()(v/1e8).format("0.0"):numeral__WEBPACK_IMPORTED_MODULE_1___default()(v/1e8).format("0"),"亿")};try{time.displayName="time",time.__docgenInfo={description:"",displayName:"time",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#time"]={docgenInfo:time.__docgenInfo,name:"time",path:"../assets/src/format.tsx#time"})}catch(__react_docgen_typescript_loader_error){}try{plain.displayName="plain",plain.__docgenInfo={description:"",displayName:"plain",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#plain"]={docgenInfo:plain.__docgenInfo,name:"plain",path:"../assets/src/format.tsx#plain"})}catch(__react_docgen_typescript_loader_error){}try{amount0.displayName="amount0",amount0.__docgenInfo={description:"数字格式化：千分位 & 保留到个位数",displayName:"amount0",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#amount0"]={docgenInfo:amount0.__docgenInfo,name:"amount0",path:"../assets/src/format.tsx#amount0"})}catch(__react_docgen_typescript_loader_error){}try{amount.displayName="amount",amount.__docgenInfo={description:"",displayName:"amount",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#amount"]={docgenInfo:amount.__docgenInfo,name:"amount",path:"../assets/src/format.tsx#amount"})}catch(__react_docgen_typescript_loader_error){}try{amount1.displayName="amount1",amount1.__docgenInfo={description:"数字格式化：千分位 & 保留到一位小数",displayName:"amount1",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#amount1"]={docgenInfo:amount1.__docgenInfo,name:"amount1",path:"../assets/src/format.tsx#amount1"})}catch(__react_docgen_typescript_loader_error){}try{amount2.displayName="amount2",amount2.__docgenInfo={description:"数字格式化：千分位 & 保留两位小数",displayName:"amount2",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#amount2"]={docgenInfo:amount2.__docgenInfo,name:"amount2",path:"../assets/src/format.tsx#amount2"})}catch(__react_docgen_typescript_loader_error){}try{ratio.displayName="ratio",ratio.__docgenInfo={description:"",displayName:"ratio",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#ratio"]={docgenInfo:ratio.__docgenInfo,name:"ratio",path:"../assets/src/format.tsx#ratio"})}catch(__react_docgen_typescript_loader_error){}try{lfl.displayName="lfl",lfl.__docgenInfo={description:"环比/同比格式化函数，注意 lfl 并不是一个 React 组件. 注意 lfl 生成的 div 样式",displayName:"lfl",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#lfl"]={docgenInfo:lfl.__docgenInfo,name:"lfl",path:"../assets/src/format.tsx#lfl"})}catch(__react_docgen_typescript_loader_error){}try{money.displayName="money",money.__docgenInfo={description:"",displayName:"money",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/format.tsx#money"]={docgenInfo:money.__docgenInfo,name:"money",path:"../assets/src/format.tsx#money"})}catch(__react_docgen_typescript_loader_error){}},294:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TablePipeline})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useTablePipeline}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(246),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(65),__webpack_require__(93),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(0),_utils__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(228),_utils__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(269);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var TablePipeline=function(){function TablePipeline(_ref){var state=_ref.state,setState=_ref.setState,context=_ref.context;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TablePipeline),this.snapshots={},this.rowPropsGetters=[],this._dataSource=void 0,this._columns=void 0,this.ctx={indents:TablePipeline.defaultIndents},this.state=void 0,this.setState=void 0,this.state=state,this.setState=setState,Object.assign(this.ctx,context)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TablePipeline,[{key:"appendRowPropsGetter",value:function appendRowPropsGetter(getter){return this.rowPropsGetters.push(getter),this}},{key:"getDataSource",value:function getDataSource(name){return null==name?this._dataSource:this.snapshots[name].dataSource}},{key:"getColumns",value:function getColumns(name){return null==name?this._columns:this.snapshots[name].columns}},{key:"setStateAtKey",value:function setStateAtKey(stateKey,partialState,extraInfo){this.setState(Object.assign({},this.state,function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}({},stateKey,partialState)),stateKey,partialState,extraInfo)}},{key:"ensurePrimaryKey",value:function ensurePrimaryKey(prefix){if(null==this.ctx.primaryKey)throw new Error("使用 ".concat(prefix," 之前必须先设置 primaryKey"));return this.ctx.primaryKey}},{key:"input",value:function input(_input){if(null!=this._dataSource||null!=this._columns)throw new Error("input 不能调用两次");return this._dataSource=_input.dataSource,this._columns=_input.columns,this.snapshot("input"),this}},{key:"dataSource",value:function dataSource(rows){return this._dataSource=rows,this}},{key:"columns",value:function columns(cols){return this._columns=cols,this}},{key:"primaryKey",value:function primaryKey(key){return this.ctx.primaryKey=key,this}},{key:"snapshot",value:function snapshot(name){return this.snapshots[name]={dataSource:this._dataSource,columns:this._columns,rowPropsGetters:this.rowPropsGetters.slice()},this}},{key:"useTransform",value:function useTransform(transform){var next=transform({dataSource:this.getDataSource(),columns:this.getColumns()});return this.dataSource(next.dataSource).columns(next.columns)}},{key:"use",value:function use(step){return step(this)}},{key:"mapDataSource",value:function mapDataSource(mapper){return this.dataSource(mapper(this.getDataSource()))}},{key:"mapColumns",value:function mapColumns(mapper){return this.columns(mapper(this.getColumns()))}},{key:"traverseColumn",value:function traverseColumn(fn){return this.useTransform(Object(_utils__WEBPACK_IMPORTED_MODULE_17__.a)(fn))}},{key:"getProps",value:function getProps(){var _this=this,result={dataSource:this._dataSource,columns:this._columns};return this.ctx.primaryKey&&(result.primaryKey=this.ctx.primaryKey),this.rowPropsGetters.length>0&&(result.getRowProps=function(row,rowIndex){return _this.rowPropsGetters.reduce((function(res,get){return Object(_utils__WEBPACK_IMPORTED_MODULE_18__.a)(res,get(row,rowIndex))}),{})}),result}}]),TablePipeline}();function useTablePipeline(context){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_16__.useState)({}),2),state=_useState2[0],setState=_useState2[1];return new TablePipeline({state:state,setState:setState,context:context})}TablePipeline.defaultIndents={iconIndent:-8,iconWidth:16,iconGap:0,indentSize:16}},34:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cols})),__webpack_require__.d(__webpack_exports__,"b",(function(){return testProvColumns})),__webpack_require__.d(__webpack_exports__,"c",(function(){return useAllDataSource})),__webpack_require__.d(__webpack_exports__,"e",(function(){return useProvinceDataSource})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useCityDataSource}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(75),__webpack_require__(326),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(84),__webpack_require__(62),__webpack_require__(327),__webpack_require__(63),__webpack_require__(59),__webpack_require__(248),__webpack_require__(65),__webpack_require__(41),__webpack_require__(243),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);var lodash__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(120),lodash__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_20__),react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),_cdn_data__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(118),_format__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(29);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var rawCols={provinceName:{code:"provinceName",name:"省份",width:150},cityName:{code:"cityName",name:"城市",width:150},confirmedCount:{code:"confirmedCount",name:"确诊",width:100,render:_format__WEBPACK_IMPORTED_MODULE_23__.a,align:"right"},suspectedCount:{code:"suspectedCount",name:"疑似",width:100,render:_format__WEBPACK_IMPORTED_MODULE_23__.a,align:"right"},curedCount:{code:"curedCount",name:"治愈",width:100,render:_format__WEBPACK_IMPORTED_MODULE_23__.a,align:"right"},deadCount:{code:"deadCount",name:"死亡",width:100,render:_format__WEBPACK_IMPORTED_MODULE_23__.a,align:"right"},updateTime:{code:"updateTime",name:"最后更新时间",width:180,render:_format__WEBPACK_IMPORTED_MODULE_23__.d}},lockProvCol=Object.assign({lock:!0},rawCols.provinceName),lockCityCol=Object.assign({lock:!0},rawCols.cityName),lockTimeCol=Object.assign({lock:!0},rawCols.updateTime),indCols=[rawCols.confirmedCount,rawCols.curedCount,rawCols.deadCount],cols=Object.assign({},rawCols,{indCols:indCols,lockProvCol:lockProvCol,lockCityCol:lockCityCol,lockTimeCol:lockTimeCol}),testProvColumns=[cols.provinceName].concat(function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(iter))return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(cols.indCols),[cols.updateTime]);function useAllDataSource(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)({dataSource:[],isLoading:!0}),2),_useState2$=_useState2[0],dataSource=_useState2$.dataSource,isLoading=_useState2$.isLoading,setState=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){Object(_cdn_data__WEBPACK_IMPORTED_MODULE_22__.c)().then((function(data){setState({dataSource:lodash__WEBPACK_IMPORTED_MODULE_20___default.a.sortBy(data.map((function(rawItem){return{provinceName:rawItem.provinceName,cityName:rawItem.cityName,confirmedCount:Number(rawItem.city_confirmedCount),suspectedCount:Number(rawItem.city_suspectedCount),curedCount:Number(rawItem.city_curedCount),deadCount:Number(rawItem.city_deadCount),updateTime:rawItem.updateTime}})),(function(d){return d.updateTime})),isLoading:!1})}))}),[]),{dataSource:dataSource,isLoading:isLoading}}function useProvinceDataSource(){var _useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)({dataSource:[],isLoading:!0}),2),_useState4$=_useState4[0],dataSource=_useState4$.dataSource,isLoading=_useState4$.isLoading,setState=_useState4[1];return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){Object(_cdn_data__WEBPACK_IMPORTED_MODULE_22__.c)().then((function(data){var provinceItems=lodash__WEBPACK_IMPORTED_MODULE_20___default.a.uniqBy(data,(function(d){return d.provinceName+"--"+d.updateTime})).map((function(d){return{provinceName:d.provinceName,confirmedCount:Number(d.province_confirmedCount),suspectedCount:Number(d.province_suspectedCount),curedCount:Number(d.province_curedCount),deadCount:Number(d.province_deadCount),updateTime:d.updateTime}}));setState({dataSource:lodash__WEBPACK_IMPORTED_MODULE_20___default.a.orderBy(Object.values(lodash__WEBPACK_IMPORTED_MODULE_20___default.a.groupBy(provinceItems,(function(d){return d.provinceName}))).map((function(data){return lodash__WEBPACK_IMPORTED_MODULE_20___default.a.maxBy(data,(function(d){return d.updateTime}))})),(function(d){return-d.confirmedCount})),isLoading:!1})}))}),[]),{dataSource:dataSource,isLoading:isLoading}}function useCityDataSource(){var _useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)({dataSource:[],isLoading:!0}),2),_useState6$=_useState6[0],dataSource=_useState6$.dataSource,isLoading=_useState6$.isLoading,setState=_useState6[1];return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){Object(_cdn_data__WEBPACK_IMPORTED_MODULE_22__.c)().then((function(data){var items=Object.values(lodash__WEBPACK_IMPORTED_MODULE_20___default.a.groupBy(data,(function(d){return d.provinceName}))).map((function(byProv){var rawProvItem=lodash__WEBPACK_IMPORTED_MODULE_20___default.a.maxBy(byProv,(function(d){return d.updateTime})),cityItems=Object.values(lodash__WEBPACK_IMPORTED_MODULE_20___default.a.groupBy(byProv,(function(d){return d.cityName}))).map((function(byCity){var rawCityItem=lodash__WEBPACK_IMPORTED_MODULE_20___default.a.maxBy(byCity,(function(d){return d.updateTime}));return{provinceName:rawCityItem.provinceName,cityName:rawCityItem.cityName,confirmedCount:Number(rawCityItem.city_confirmedCount),suspectedCount:Number(rawCityItem.city_suspectedCount),curedCount:Number(rawCityItem.city_curedCount),deadCount:Number(rawCityItem.city_deadCount),updateTime:rawCityItem.updateTime}}));return{provinceName:rawProvItem.provinceName,confirmedCount:Number(rawProvItem.province_confirmedCount),suspectedCount:Number(rawProvItem.province_suspectedCount),curedCount:Number(rawProvItem.province_curedCount),deadCount:Number(rawProvItem.province_deadCount),updateTime:rawProvItem.updateTime,children:cityItems}}));setState({dataSource:lodash__WEBPACK_IMPORTED_MODULE_20___default.a.sortBy(items,(function(d){return-d.confirmedCount})).flat(),isLoading:!1})}))}),[]),{dataSource:dataSource,isLoading:isLoading}}},367:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ROW_KEY}));var ROW_KEY="rowKey"},374:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return buildDrillTree}));__webpack_require__(62),__webpack_require__(105);var _utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(463),_simpleEncode__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(225);function buildDrillTree(data,codes){var array,_ref=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref$encode=_ref.encode,encode=void 0===_ref$encode?_simpleEncode__WEBPACK_IMPORTED_MODULE_3__.a:_ref$encode,_ref$totalValue=_ref.totalValue,totalValue=void 0===_ref$totalValue?"总计":_ref$totalValue,_ref$includeTopWrappe=_ref.includeTopWrapper,includeTopWrapper=void 0!==_ref$includeTopWrappe&&_ref$includeTopWrappe,_ref$isExpand=_ref.isExpand,isExpand=void 0===_ref$isExpand?function(){return!0}:_ref$isExpand,_ref$enforceExpandTot=_ref.enforceExpandTotalNode,enforceExpandTotalNode=void 0===_ref$enforceExpandTot||_ref$enforceExpandTot,emptyPath=[],totalKey=encode(emptyPath),hasChild=!1;if(0===codes.length?array=[]:enforceExpandTotalNode||isExpand(totalKey)?array=dfs(data,[]):(array=[],hasChild=data.length>0),includeTopWrapper){var rootNode={key:totalKey,value:totalValue,path:emptyPath,children:array};return hasChild&&(rootNode.hasChild=hasChild),[rootNode]}return includeTopWrapper?[{key:totalKey,value:totalValue,path:emptyPath,children:array}]:array;function dfs(slice,path){for(var depth=path.length,array=[],code=codes[depth],groups=Object(_utils__WEBPACK_IMPORTED_MODULE_2__.a)(slice,(function(row){return row[code]})),_i=0,_Object$keys=Object.keys(groups);_i<_Object$keys.length;_i++){var groupKey=_Object$keys[_i];path.push(groupKey);var node={key:encode(path),value:groupKey,path:path.slice()};array.push(node);var group=groups[groupKey];group.length>0&&depth<codes.length-1&&(isExpand(node.key)?node.children=dfs(group,path):node.hasChild=!0),path.pop()}return array}}},375:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return applyTransforms}));__webpack_require__(246);function applyTransforms(input){for(var _len=arguments.length,transforms=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)transforms[_key-1]=arguments[_key];return transforms.reduce((function(v,fn){return fn(v)}),input)}},463:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return groupBy}));__webpack_require__(43),__webpack_require__(53),__webpack_require__(56),__webpack_require__(67),__webpack_require__(58),__webpack_require__(51),__webpack_require__(62),__webpack_require__(63),__webpack_require__(59),__webpack_require__(41),__webpack_require__(64),__webpack_require__(54),__webpack_require__(55);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function groupBy(list,iteratee){var _step,groups={},_iterator=_createForOfIteratorHelper(list);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,key=iteratee(item);null==groups[key]&&(groups[key]=[]),groups[key].push(item)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return groups}},52:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ThemedBaseTable})),__webpack_require__.d(__webpack_exports__,"b",(function(){return useThemedTablePipeline}));__webpack_require__(65);var _alifd_next__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(151),ali_react_table__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(229),ali_react_table__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(294),antd__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(335),assets_src__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(146),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var ThemedBaseTable=react__WEBPACK_IMPORTED_MODULE_6___default.a.forwardRef((function(props,ref){var tableTheme=Object(react__WEBPACK_IMPORTED_MODULE_6__.useContext)(assets_src__WEBPACK_IMPORTED_MODULE_5__.c),Table=ali_react_table__WEBPACK_IMPORTED_MODULE_2__.a;return"hippo"===tableTheme?Table=assets_src__WEBPACK_IMPORTED_MODULE_5__.e:"antd"===tableTheme&&(Table=assets_src__WEBPACK_IMPORTED_MODULE_5__.a),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_6___default.a.Fragment,null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(Table,_extends({ref:ref},props)))}));function useThemedTablePipeline(arg){var tableTheme=Object(react__WEBPACK_IMPORTED_MODULE_6__.useContext)(assets_src__WEBPACK_IMPORTED_MODULE_5__.c),indents=ali_react_table__WEBPACK_IMPORTED_MODULE_3__.a.defaultIndents,components=_alifd_next__WEBPACK_IMPORTED_MODULE_1__;return"hippo"===tableTheme?indents={iconIndent:-8,iconGap:16,iconWidth:16,indentSize:24}:"antd"==tableTheme&&(components=antd__WEBPACK_IMPORTED_MODULE_4__,indents={iconIndent:-8,iconGap:8,iconWidth:16,indentSize:16}),Object(ali_react_table__WEBPACK_IMPORTED_MODULE_3__.b)({components:components,indents:indents})}try{useThemedTablePipeline.displayName="useThemedTablePipeline",useThemedTablePipeline.__docgenInfo={description:"",displayName:"useThemedTablePipeline",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/themed-table.tsx#useThemedTablePipeline"]={docgenInfo:useThemedTablePipeline.__docgenInfo,name:"useThemedTablePipeline",path:"stories/themed-table.tsx#useThemedTablePipeline"})}catch(__react_docgen_typescript_loader_error){}try{ThemedBaseTable.displayName="ThemedBaseTable",ThemedBaseTable.__docgenInfo={description:"",displayName:"ThemedBaseTable",props:{primaryKey:{defaultValue:null,description:"主键",name:"primaryKey",required:!1,type:{name:"PrimaryKey"}},dataSource:{defaultValue:null,description:"表格展示的数据源",name:"dataSource",required:!0,type:{name:"any[]"}},columns:{defaultValue:null,description:"表格的列配置",name:"columns",required:!0,type:{name:"ArtColumn[]"}},useVirtual:{defaultValue:null,description:"是否开启虚拟滚动",name:"useVirtual",required:!1,type:{name:'boolean | "auto" | { horizontal?: VirtualEnum; vertical?: VirtualEnum; header?: VirtualEnum; }'}},estimatedRowHeight:{defaultValue:null,description:"虚拟滚动开启情况下，表格中每一行的预估高度",name:"estimatedRowHeight",required:!1,type:{name:"number"}},isStickyHead:{defaultValue:null,description:"表格头部是否置顶，默认为 true",name:"isStickyHead",required:!1,type:{name:"boolean"}},stickyTop:{defaultValue:null,description:"表格置顶后，距离顶部的距离",name:"stickyTop",required:!1,type:{name:"number"}},stickyBottom:{defaultValue:null,description:"表格置顶后，距离底部的距离",name:"stickyBottom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"自定义类名",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"自定义内联样式",name:"style",required:!1,type:{name:"CSSProperties & Partial<{ '--color': string; '--bgcolor': string; '--hover-bgcolor': string; '--row-height': string; '--cell-padding': string; '--font-size': string; '-line-height': string; ... 10 more ...; '--header-cell-border-vertical': string; }>"}},hasHeader:{defaultValue:null,description:"表格是否具有头部",name:"hasHeader",required:!1,type:{name:"boolean"}},useOuterBorder:{defaultValue:null,description:"使用来自外层 div 的边框代替单元格的外边框",name:"useOuterBorder",required:!1,type:{name:"boolean"}},isLoading:{defaultValue:null,description:"表格是否在加载中",name:"isLoading",required:!1,type:{name:"boolean"}},emptyCellHeight:{defaultValue:null,description:"数据为空时，单元格的高度",name:"emptyCellHeight",required:!1,type:{name:"number"}},emptyContent:{defaultValue:null,description:"@deprecated 数据为空时，表格的展示内容。请使用 components.EmptyContent 代替",name:"emptyContent",required:!1,type:{name:"ReactNode"}},components:{defaultValue:null,description:"覆盖表格内部用到的组件",name:"components",required:!1,type:{name:"{ LoadingContentWrapper?: ComponentType<LoadingContentWrapperProps>; LoadingIcon?: ComponentType<{}>; EmptyContent?: ComponentType<...>; }"}},defaultColumnWidth:{defaultValue:null,description:"列的默认宽度",name:"defaultColumnWidth",required:!1,type:{name:"number"}},flowRoot:{defaultValue:null,description:"表格所处于的块格式化上下文(BFC)\nhttps://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Block_formatting_context",name:"flowRoot",required:!1,type:{name:'"auto" | "self" | (() => HTMLElement | (Window & typeof globalThis)) | HTMLElement | (Window & typeof globalThis)'}},getRowProps:{defaultValue:null,description:"",name:"getRowProps",required:!1,type:{name:"(record: any, rowIndex: number) => HTMLAttributes<HTMLTableRowElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/themed-table.tsx#ThemedBaseTable"]={docgenInfo:ThemedBaseTable.__docgenInfo,name:"ThemedBaseTable",path:"stories/themed-table.tsx#ThemedBaseTable"})}catch(__react_docgen_typescript_loader_error){}},69:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return LOCK_SHADOW_PADDING})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Classes})),__webpack_require__.d(__webpack_exports__,"c",(function(){return StyledArtTableWrapper}));var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(71),LOCK_SHADOW_PADDING=20,Classes={artTableWrapper:"".concat("art-","table-wrapper"),artTable:"".concat("art-","table"),tableHeader:"".concat("art-","table-header"),tableBody:"".concat("art-","table-body"),tableRow:"".concat("art-","table-row"),tableHeaderRow:"".concat("art-","table-header-row"),tableCell:"".concat("art-","table-cell"),tableHeaderCell:"".concat("art-","table-header-cell"),virtualBlank:"".concat("art-","virtual-blank"),stickyScroll:"".concat("art-","sticky-scroll"),stickyScrollItem:"".concat("art-","sticky-scroll-item"),lockShadowMask:"".concat("art-","lock-shadow-mask"),lockShadow:"".concat("art-","lock-shadow"),leftLockShadow:"".concat("art-","left-lock-shadow"),rightLockShadow:"".concat("art-","right-lock-shadow"),emptyWrapper:"".concat("art-","empty-wrapper"),loadingWrapper:"".concat("art-","loading-wrapper"),loadingIndicatorWrapper:"".concat("art-","loading-indicator-wrapper"),loadingIndicator:"".concat("art-","loading-indicator")},Z_lock=5,Z_header=10,Z_lockShadow=20,Z_scrollItem=30,Z_loadingIndicator=40,StyledArtTableWrapper=styled_components__WEBPACK_IMPORTED_MODULE_0__.b.div.withConfig({displayName:"styles__StyledArtTableWrapper",componentId:"sc-1nii5ed-0"})(["--row-height:48px;--color:#333;--bgcolor:white;--hover-bgcolor:var(--hover-color,#f5f5f5);--highlight-bgcolor:#eee;--header-row-height:32px;--header-color:#5a6c84;--header-bgcolor:#e9edf2;--header-hover-bgcolor:#ddd;--header-highlight-bgcolor:#e4e8ed;--cell-padding:8px 12px;--font-size:12px;--line-height:1.28571;--lock-shadow:rgba(152,152,152,0.5) 0 0 6px 2px;--border-color:#dfe3e8;--cell-border:1px solid var(--border-color);--cell-border-horizontal:var(--cell-border);--cell-border-vertical:var(--cell-border);--header-cell-border:1px solid var(--border-color);--header-cell-border-horizontal:var(--header-cell-border);--header-cell-border-vertical:var(--header-cell-border);box-sizing:border-box;*{box-sizing:border-box;}cursor:default;color:var(--color);font-size:var(--font-size);line-height:var(--line-height);position:relative;&.use-outer-border{border-top:var(--cell-border-horizontal);border-right:var(--cell-border-vertical);border-bottom:var(--cell-border-horizontal);border-left:var(--cell-border-vertical);td.first,th.first{border-left:none;}td.last,th.last{border-right:none;}tr.first th,tr.first td{border-top:none;}tr.last td{border-bottom:none;}}.no-scrollbar{::-webkit-scrollbar{display:none;}}.","{overflow-x:auto;overflow-y:hidden;background:var(--header-bgcolor);}.","{overflow-x:auto;overflow-y:hidden;background:var(--bgcolor);}&.sticky .","{position:sticky;top:0;z-index:",";}table{width:100%;table-layout:fixed;border-collapse:separate;border-spacing:0;display:table;margin:0;padding:0;}tr:not(.no-hover):hover > td{background:var(--hover-bgcolor);}tr:not(.no-highlight).highlight > td{background:var(--highlight-bgcolor);}th{font-weight:normal;text-align:left;padding:var(--cell-padding);height:var(--header-row-height);color:var(--header-color);background:var(--header-bgcolor);border:none;border-right:var(--header-cell-border-vertical);border-bottom:var(--header-cell-border-horizontal);}tr.first th{border-top:var(--header-cell-border-horizontal);}th.first{border-left:var(--header-cell-border-vertical);}td{padding:var(--cell-padding);background:var(--bgcolor);height:var(--row-height);border:none;border-right:var(--cell-border-vertical);border-bottom:var(--cell-border-horizontal);}td.first{border-left:var(--cell-border-vertical);}tr.first td{border-top:var(--cell-border-horizontal);}&.has-header tr.first td{border-top:none;}.lock-left,.lock-right{z-index:",";}.","{position:absolute;top:0;bottom:0;z-index:",";pointer-events:none;overflow:hidden;.","{height:100%;}.","{margin-right:","px;box-shadow:none;&.show-shadow{box-shadow:var(--lock-shadow);border-right:var(--cell-border-vertical);}}.","{margin-left:","px;box-shadow:none;&.show-shadow{box-shadow:var(--lock-shadow);border-left:var(--cell-border-vertical);}}}.","{pointer-events:none;color:#99a3b3;font-size:12px;text-align:center;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);.empty-image{width:50px;height:50px;}.empty-tips{margin-top:16px;line-height:1.5;}}.","{overflow:auto;position:sticky;bottom:0;z-index:",";margin-top:-17px;}.","{height:1px;visibility:hidden;}.","{position:relative;.","{position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none;}.","{position:sticky;z-index:",";transform:translateY(-50%);}}"],Classes.tableHeader,Classes.tableBody,Classes.tableHeader,Z_header,Z_lock,Classes.lockShadowMask,Z_lockShadow,Classes.lockShadow,Classes.leftLockShadow,LOCK_SHADOW_PADDING,Classes.rightLockShadow,LOCK_SHADOW_PADDING,Classes.emptyWrapper,Classes.stickyScroll,Z_scrollItem,Classes.stickyScrollItem,Classes.loadingWrapper,Classes.loadingIndicatorWrapper,Classes.loadingIndicator,Z_loadingIndicator)},74:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return internals}));__webpack_require__(59);function safeGetValue(column,record,rowIndex){return column.getValue?column.getValue(record,rowIndex):record[column.code]}var internals={safeRenderHeader:function safeRenderHeader(column){var _column$title;return null!==(_column$title=column.title)&&void 0!==_column$title?_column$title:column.name},safeGetValue:safeGetValue,safeGetRowKey:function safeGetRowKey(primaryKey,record,rowIndex){var key;return"string"==typeof primaryKey?key=record[primaryKey]:"function"==typeof primaryKey&&(key=primaryKey(record)),null==key&&(key=String(rowIndex)),key},safeGetCellProps:function safeGetCellProps(column,record,rowIndex){if(column.getCellProps){var value=safeGetValue(column,record,rowIndex);return column.getCellProps(value,record,rowIndex)||{}}return{}},safeRender:function safeRender(column,record,rowIndex){var value=safeGetValue(column,record,rowIndex);return column.render?column.render(value,record,rowIndex):value}}},76:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"o",(function(){return repeat})),__webpack_require__.d(__webpack_exports__,"n",(function(){return randomPick})),__webpack_require__.d(__webpack_exports__,"m",(function(){return operationCol})),__webpack_require__.d(__webpack_exports__,"g",(function(){return dataSource1})),__webpack_require__.d(__webpack_exports__,"a",(function(){return columns1})),__webpack_require__.d(__webpack_exports__,"h",(function(){return dataSource2})),__webpack_require__.d(__webpack_exports__,"b",(function(){return columns2})),__webpack_require__.d(__webpack_exports__,"i",(function(){return dataSource3})),__webpack_require__.d(__webpack_exports__,"c",(function(){return columns3})),__webpack_require__.d(__webpack_exports__,"j",(function(){return dataSource4})),__webpack_require__.d(__webpack_exports__,"d",(function(){return columns4})),__webpack_require__.d(__webpack_exports__,"k",(function(){return dataSource5})),__webpack_require__.d(__webpack_exports__,"e",(function(){return columns5})),__webpack_require__.d(__webpack_exports__,"l",(function(){return dataSource6})),__webpack_require__.d(__webpack_exports__,"f",(function(){return columns6}));__webpack_require__(75),__webpack_require__(84);var _alifd_next__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(140),_alifd_next__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(40),ali_react_table__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(203),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),styled_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(71),ali_react_table_src_common_views__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(99);function repeat(arr,n){for(var result=[],i=0;i<n;i++)result=result.concat(arr);return result}function randomPick(arr){return arr[Math.floor(Math.random()*arr.length)]}var OperationsDiv=styled_components__WEBPACK_IMPORTED_MODULE_6__.b.div.withConfig({displayName:"biz-assets__OperationsDiv",componentId:"sc-1u58rr0-0"})(["display:flex;height:20px;align-items:center;.item{height:20px;cursor:pointer;color:#3858cf;display:flex;align-items:center;&.danger{color:#eb4141;}}.sep{height:10px;width:1px;margin-left:12px;margin-right:12px;background:#eeeeee;}"]);function renderOptions(){return react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(OperationsDiv,null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"item"},"编辑"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"sep"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"item danger"},"删除"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"sep"}),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_2__.a,{trigger:react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement("div",{className:"item"},"更多",react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(ali_react_table_src_common_views__WEBPACK_IMPORTED_MODULE_7__.c.CaretDown,{style:{color:"#A6A6A6"}})),triggerType:"click"},react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a,null,react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a.Item,null,"Option 1"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a.Item,null,"Option 2"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a.Item,null,"Option 3"),react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(_alifd_next__WEBPACK_IMPORTED_MODULE_3__.a.Item,null,"Option 4"))))}renderOptions.displayName="renderOptions";var operationCol={lock:!0,name:"操作",render:renderOptions,width:200},dataSource1=[{id:"1",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"招商银行丨杭州分行",applier:"James Collier"},{id:"2",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"建设银行丨未来科技城",applier:"Philip Burke"},{id:"3",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"交通银行丨浙大路支行",applier:"Wesley Cruz"},{id:"4",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"招商银行丨庆春路支行",applier:"Billy Horton"},{id:"5",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"招商银行丨文一路分行",applier:"Paul Tran"},{id:"6",name:"阿里巴巴网络技术有限公司",amount:"600,000.00(CNY)",dept:"农业银行丨杭州分行",applier:"Anna Poole"}],columns1=[{code:"name",width:220,name:"公司名称"},{code:"amount",width:160,align:"right",name:"金额"},{code:"dept",width:160,name:"金融机构"},{code:"applier",width:120,name:"申请人"}],dataSource2=[{name:"蚂蚁金服",dept:"消费者事业部-淘宝-UED",dest:"South Maddison",guide:"Don Moreno"},{name:"阿里巴巴(中国)有限公司",dept:"航旅事业部-酒店业务",dest:"Emilhaven",guide:"Douglas Richards"},{name:"菜鸟网络",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee"},{name:"蚂蚁金服",dept:"信息平台部-用户体验部",dest:"杭州千岛湖",guide:"Eric Castillo"},{name:"阿里巴巴(中国)有限公司",dept:"消费者事业部-淘宝-UED",dest:"East Karl",guide:"Herbert Patton"}],columns2=[{code:"name",name:"公司名称",width:200},{code:"dept",name:"部门名称",width:180},{code:"dest",name:"团建目的地",width:160},{code:"guide",name:"当地导游",width:160}],dataSource3=[{name:"阿里巴巴网络技术有限公司1",entity:"蚂蚁金服（中国）",dept:"招商银行丨杭州分行",applier:"Don Moreno"},{name:"阿里巴巴网络技术有限公司2",entity:"蚂蚁金服（中国）",dept:"建设银行丨未来科技城",applier:"Douglas Richards"},{name:"阿里巴巴网络技术有限公司3",entity:"蚂蚁金服（中国）",dept:"交通银行丨浙大路支行",applier:"Douglas Lee"},{name:"阿里巴巴网络技术有限公司4",entity:"蚂蚁金服（中国）",dept:"招商银行丨庆春路支行",applier:"Eric Castillo"},{name:"阿里巴巴网络技术有限公司5",entity:"蚂蚁金服（中国）",dept:"招商银行丨文一路分行",applier:"Herbert Patton"}],columns3=[{code:"name",name:"公司名称",width:200,features:{sortable:!0}},{code:"entity",name:"支付实体",width:160},{code:"dept",name:"金融机构",width:160,features:{sortable:!0}},{code:"applier",name:"申请人",width:160,features:{sortable:!0}},operationCol];function makeChildren(prefix){return[{id:"".concat(prefix,"-1"),title:"二级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee",children:[{id:"".concat(prefix,"-1-1"),title:"三级标题",dept:"盒马产品技术部-UED",dest:"云南大理",guide:"Douglas Lee"},{id:"".concat(prefix,"-1-2"),title:"三级标题",dept:"盒马产品技术部-前端",dest:"云南大理",guide:"Douglas Lee"}]},{id:"".concat(prefix,"-2"),title:"二级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee",children:[{id:"".concat(prefix,"-2-1"),title:"三级标题",dept:"盒马产品技术部-UED",dest:"云南大理",guide:"Douglas Lee"},{id:"".concat(prefix,"-2-2"),title:"三级标题",dept:"盒马产品技术部-前端",dest:"云南大理",guide:"Douglas Lee"}]},{id:"".concat(prefix,"-3"),title:"二级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee"}]}function makeChildren2(prefix){return[{id:"".concat(prefix,"-1"),title:"二级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee",children:[{id:"".concat(prefix,"-1-1"),title:"三级标题",dept:"盒马产品技术部-UED",dest:"云南大理",guide:"Douglas Lee"},{id:"".concat(prefix,"-1-2"),title:"三级标题",dept:"盒马产品技术部-前端",dest:"云南大理",guide:"Douglas Lee"}]},{id:"".concat(prefix,"-2"),title:"二级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee",children:[{id:"".concat(prefix,"-2-1"),title:"三级标题",dept:"盒马产品技术部-UED",dest:"云南大理",guide:"Douglas Lee"},{id:"".concat(prefix,"-2-2"),title:"三级标题",dept:"盒马产品技术部-前端",dest:"云南大理",guide:"Douglas Lee"}]}]}var dataSource4=[{id:"1",title:"一级标题",dept:"消费者事业部-淘宝-UED",dest:"South Maddison",guide:"Don Moreno",children:makeChildren("1")},{id:"2",title:"一级标题",dept:"航旅事业部-酒店业务",dest:"Emilhaven",guide:"Douglas Richards",children:makeChildren("2")},{id:"3",title:"一级标题",dept:"消费者事业部-淘宝-UED",dest:"云南大理",guide:"Douglas Lee",children:makeChildren("3")},{id:"4",title:"一级标题",dept:"信息平台部-用户体验部",dest:"杭州千岛湖",guide:"Eric Castillo",children:makeChildren("4")},{id:"5",title:"一级标题",dept:"消费者事业部-淘宝-UED",dest:"East Karl",guide:"Herbert Patton"}],columns4=[{code:"title",name:"标题",width:200},{code:"dept",name:"部门名称",width:180},{code:"dest",name:"团建目的地",width:160},{code:"guide",name:"当地导游",width:160},operationCol],dataSource5=[{id:"1",title:"阿里巴巴网络技术有限公司",children:makeChildren2("1")},{id:"2",title:"蚂蚁金服有限公司",children:makeChildren2("2")},{id:"3",title:"其他",children:makeChildren2("3")}],columns5=[{code:"title",name:"标题",width:200},{code:"dept",name:"部门名称",width:180},{code:"dest",name:"团建目的地",width:160},{code:"guide",name:"当地导游",width:160}],col=ali_react_table__WEBPACK_IMPORTED_MODULE_4__.a.array({align:"center",width:80,headerCellProps:{style:{textAlign:"center",padding:0}}}),dataSource6=["UED","客服","产品","运营","前端","数据"].map((function(occupation){return{occupation:occupation,hc_2014:104,hc_2015:168,hc_lfl:50,age_2014:30,age_2015:32,age_lfl:15,rate_2014:.3,rate_2015:.45,rate2_2014:.33,rate2_2015:.48}})),columns6=col([{lock:!0,code:"occupation",name:"职务",width:120},{name:"人数",children:col([{code:"hc_2014",name:"2014年"},{code:"hc_2015",name:"2015年"},{code:"hc_lfl",name:"同比增长"}])},{name:"年龄",children:col([{code:"age_2014",name:"2014年"},{code:"age_2015",name:"2015年"},{code:"age_lfl",name:"同比增长"}])},{name:"占比",children:col([{code:"rate_2014",name:"2014年"},{code:"rate_2015",name:"2015年"}])},{name:"占比2",children:col([{code:"rate_2014",name:"2014年"},{code:"rate_2015",name:"2015年"}])}]);try{randomPick.displayName="randomPick",randomPick.__docgenInfo={description:"",displayName:"randomPick",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/biz-assets.tsx#randomPick"]={docgenInfo:randomPick.__docgenInfo,name:"randomPick",path:"../assets/src/biz-assets.tsx#randomPick"})}catch(__react_docgen_typescript_loader_error){}try{makeChildren.displayName="makeChildren",makeChildren.__docgenInfo={description:"",displayName:"makeChildren",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../assets/src/biz-assets.tsx#makeChildren"]={docgenInfo:makeChildren.__docgenInfo,name:"makeChildren",path:"../assets/src/biz-assets.tsx#makeChildren"})}catch(__react_docgen_typescript_loader_error){}},789:function(module,exports,__webpack_require__){__webpack_require__(790),__webpack_require__(941),__webpack_require__(942),__webpack_require__(1115),module.exports=__webpack_require__(1174)},856:function(module,exports){},942:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(512)},95:function(module,__webpack_exports__,__webpack_require__){"use strict";function isLeafNode(node){return null==node.children||0===node.children.length}__webpack_require__.d(__webpack_exports__,"a",(function(){return isLeafNode}))},99:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return InlineFlexCell})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ExpansionCell})),__webpack_require__.d(__webpack_exports__,"c",(function(){return icons}));__webpack_require__(65);var react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(71);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}var InlineFlexCell=styled_components__WEBPACK_IMPORTED_MODULE_2__.b.div.withConfig({displayName:"common-views__InlineFlexCell",componentId:"sc-9m70ao-0"})(["display:inline-flex;align-items:center;"]),ExpansionCell=Object(styled_components__WEBPACK_IMPORTED_MODULE_2__.b)(InlineFlexCell).withConfig({displayName:"common-views__ExpansionCell",componentId:"sc-9m70ao-1"})(["&.leaf{cursor:default;}.expansion-icon{fill:#999;flex:0 0 16px;transition:transform 200ms;&.expanded{transform-origin:center center;transform:rotate(90deg);}}"]);function CaretDownIcon(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends({focusable:"false",preserveAspectRatio:"xMidYMid meet",fill:"currentColor",width:"16",height:"16",viewBox:"0 0 32 32"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M24 12L16 22 8 12z"}))}function InfoIcon(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends({focusable:"false",preserveAspectRatio:"xMidYMid meet",fill:"currentColor",width:"16",height:"16",viewBox:"0 0 16 16"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M8.5 11L8.5 6.5 6.5 6.5 6.5 7.5 7.5 7.5 7.5 11 6 11 6 12 10 12 10 11zM8 3.5c-.4 0-.8.3-.8.8S7.6 5 8 5c.4 0 .8-.3.8-.8S8.4 3.5 8 3.5z"}),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M8,15c-3.9,0-7-3.1-7-7s3.1-7,7-7s7,3.1,7,7S11.9,15,8,15z M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z"}))}function CaretRightIcon(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends({focusable:"false",preserveAspectRatio:"xMidYMid meet",fill:"currentColor",width:"16",height:"16",viewBox:"0 0 32 32"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M12 8L22 16 12 24z"}))}function LoadingIcon(props){return react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("svg",_extends({width:"16",height:"16",fill:"currentColor",viewBox:"0 0 1024 1024"},props),react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("path",{d:"M512 74.667c-17.067 0-32 14.933-32 32V256c0 17.067 14.933 32 32 32s32-14.933 32-32V106.667c0-17.067-14.933-32-32-32zm181.333 288c8.534 0 17.067-2.134 23.467-8.534L821.333 249.6c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0L672 309.333c-12.8 12.8-12.8 32 0 44.8 4.267 6.4 12.8 8.534 21.333 8.534zm224 117.333H768c-17.067 0-32 14.933-32 32s14.933 32 32 32h149.333c17.067 0 32-14.933 32-32s-14.933-32-32-32zM714.667 669.867c-12.8-12.8-32-12.8-44.8 0s-12.8 32 0 44.8L774.4 819.2c6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533c12.8-12.8 12.8-32 0-44.8L714.667 669.867zM512 736c-17.067 0-32 14.933-32 32v149.333c0 17.067 14.933 32 32 32s32-14.933 32-32V768c0-17.067-14.933-32-32-32zm-202.667-66.133L204.8 774.4c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533l104.534-104.533c12.8-12.8 12.8-32 0-44.8s-36.267-12.8-46.934 0zM288 512c0-17.067-14.933-32-32-32H106.667c-17.067 0-32 14.933-32 32s14.933 32 32 32H256c17.067 0 32-14.933 32-32zm-40.533-309.333c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8L307.2 352c6.4 6.4 14.933 8.533 23.467 8.533s17.066-2.133 23.466-8.533c12.8-12.8 12.8-32 0-44.8L247.467 202.667z"}))}CaretDownIcon.displayName="CaretDownIcon",InfoIcon.displayName="InfoIcon",CaretRightIcon.displayName="CaretRightIcon",LoadingIcon.displayName="LoadingIcon";var icons={Loading:LoadingIcon,CaretDown:CaretDownIcon,CaretRight:CaretRightIcon,Info:InfoIcon};try{InlineFlexCell.displayName="InlineFlexCell",InlineFlexCell.__docgenInfo={description:"",displayName:"InlineFlexCell",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement) => void) | RefObject<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"never"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/common-views.tsx#InlineFlexCell"]={docgenInfo:InlineFlexCell.__docgenInfo,name:"InlineFlexCell",path:"../ali-react-table/src/common-views.tsx#InlineFlexCell"})}catch(__react_docgen_typescript_loader_error){}try{ExpansionCell.displayName="ExpansionCell",ExpansionCell.__docgenInfo={description:"",displayName:"ExpansionCell",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement) => void) | RefObject<HTMLDivElement>"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"never"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"never"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../ali-react-table/src/common-views.tsx#ExpansionCell"]={docgenInfo:ExpansionCell.__docgenInfo,name:"ExpansionCell",path:"../ali-react-table/src/common-views.tsx#ExpansionCell"})}catch(__react_docgen_typescript_loader_error){}}},[[789,1,2]]]);